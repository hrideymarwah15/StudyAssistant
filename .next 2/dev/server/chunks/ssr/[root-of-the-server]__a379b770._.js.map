{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n// ==================== LEARNING ANALYTICS ====================\n\nexport interface LearningSession {\n  subject: string\n  duration: number // minutes\n  score?: number\n  date: Date\n  type: 'study' | 'practice' | 'review' | 'exam'\n}\n\nexport interface LearningPattern {\n  subject: string\n  averageScore: number\n  totalTime: number\n  sessionsCount: number\n  bestTimeOfDay: string\n  improvementRate: number // points per session\n  recommendedFrequency: number // sessions per week\n  weakTopics: string[]\n}\n\nexport function analyzeLearningPatterns(sessions: LearningSession[]): LearningPattern[] {\n  const subjectGroups = sessions.reduce((acc, session) => {\n    if (!acc[session.subject]) {\n      acc[session.subject] = []\n    }\n    acc[session.subject].push(session)\n    return acc\n  }, {} as Record<string, LearningSession[]>)\n\n  return Object.entries(subjectGroups).map(([subject, subjSessions]) => {\n    const scores = subjSessions.filter(s => s.score !== undefined).map(s => s.score!)\n    const averageScore = scores.length > 0 ? scores.reduce((a, b) => a + b, 0) / scores.length : 0\n    \n    const totalTime = subjSessions.reduce((sum, s) => sum + s.duration, 0)\n    const sessionsCount = subjSessions.length\n    \n    // Find best time of day\n    const hourGroups = subjSessions.reduce((acc, s) => {\n      const hour = s.date.getHours()\n      if (!acc[hour]) acc[hour] = []\n      acc[hour].push(s)\n      return acc\n    }, {} as Record<number, LearningSession[]>)\n    \n    const bestHour = Object.entries(hourGroups)\n      .sort(([,a], [,b]) => b.length - a.length)[0]?.[0] || '9'\n    \n    const bestTimeOfDay = `${bestHour}:00`\n\n    // Calculate improvement rate\n    const sortedByDate = subjSessions\n      .filter(s => s.score !== undefined)\n      .sort((a, b) => a.date.getTime() - b.date.getTime())\n    \n    let improvementRate = 0\n    if (sortedByDate.length >= 2) {\n      const firstScore = sortedByDate[0].score!\n      const lastScore = sortedByDate[sortedByDate.length - 1].score!\n      improvementRate = (lastScore - firstScore) / (sortedByDate.length - 1)\n    }\n\n    // Recommended frequency based on current performance\n    let recommendedFrequency = 3 // default\n    if (averageScore > 90) recommendedFrequency = 2\n    else if (averageScore < 70) recommendedFrequency = 5\n\n    // Identify weak topics (mock - in real app, analyze content)\n    const weakTopics = averageScore < 80 ? ['Fundamentals', 'Problem solving'] : []\n\n    return {\n      subject,\n      averageScore,\n      totalTime,\n      sessionsCount,\n      bestTimeOfDay,\n      improvementRate,\n      recommendedFrequency,\n      weakTopics\n    }\n  })\n}\n\nexport function predictOptimalStudyTime(patterns: LearningPattern[]): {\n  bestDayTime: string\n  recommendedDuration: number\n  subjectsToFocus: string[]\n} {\n  // Find most productive time across subjects\n  const times = patterns.map(p => p.bestTimeOfDay)\n  const bestDayTime = times.sort((a, b) => \n    times.filter(t => t === b).length - times.filter(t => t === a).length\n  )[0] || '09:00'\n\n  // Average recommended duration\n  const avgDuration = patterns.reduce((sum, p) => sum + (p.totalTime / p.sessionsCount), 0) / patterns.length\n  const recommendedDuration = Math.max(25, Math.min(120, avgDuration)) // 25-120 min\n\n  // Subjects needing most attention\n  const subjectsToFocus = patterns\n    .filter(p => p.averageScore < 85 || p.improvementRate < 2)\n    .map(p => p.subject)\n    .slice(0, 3)\n\n  return { bestDayTime, recommendedDuration, subjectsToFocus }\n}\n\nexport function calculateCognitiveLoad(\n  studySessions: Array<{ duration: number; startTime: Date; focusScore?: number }>,\n  timeWindow: number = 7 // days\n): { current: number; optimal: number; status: 'low' | 'optimal' | 'high' | 'overloaded' } {\n  const now = new Date()\n  const windowStart = new Date(now.getTime() - timeWindow * 24 * 60 * 60 * 1000)\n\n  const recentSessions = studySessions.filter(session =>\n    new Date(session.startTime) >= windowStart\n  )\n\n  // Calculate total study time in the window\n  const totalStudyMinutes = recentSessions.reduce((acc, session) => acc + session.duration, 0)\n\n  // Calculate average focus score\n  const avgFocusScore = recentSessions.length > 0\n    ? recentSessions.reduce((acc, session) => acc + (session.focusScore || 80), 0) / recentSessions.length\n    : 80\n\n  // Optimal study time per week (2 hours/day = 14 hours/week = 840 minutes)\n  const optimalMinutes = timeWindow * 2 * 60\n\n  // Cognitive load percentage (adjusted by focus score)\n  const baseLoad = (totalStudyMinutes / optimalMinutes) * 100\n  const adjustedLoad = baseLoad * (avgFocusScore / 100)\n\n  // Determine status\n  let status: 'low' | 'optimal' | 'high' | 'overloaded'\n  if (adjustedLoad < 40) status = 'low'\n  else if (adjustedLoad < 80) status = 'optimal'\n  else if (adjustedLoad < 110) status = 'high'\n  else status = 'overloaded'\n\n  return {\n    current: Math.min(adjustedLoad, 150), // Cap at 150%\n    optimal: 75, // 75% is optimal\n    status\n  }\n}\n\nexport function generateSpacedRepetitionSchedule(\n  items: { id: string; lastReviewed: Date; difficulty: number; correctStreak: number; totalAttempts: number }[],\n  currentDate: Date = new Date()\n): { itemId: string; nextReview: Date; priority: number; interval: number }[] {\n  return items.map(item => {\n    const daysSinceReview = Math.floor((currentDate.getTime() - item.lastReviewed.getTime()) / (1000 * 60 * 60 * 24))\n\n    // Enhanced spaced repetition using modified SM-2 algorithm\n    const baseIntervals = [1, 3, 7, 14, 30, 60, 120, 240] // Fibonacci-like progression\n    const difficultyMultiplier = Math.max(0.5, Math.min(2.0, item.difficulty + 0.5)) // 0.5-2.0 range\n    const streakBonus = Math.min(item.correctStreak * 0.1, 1.0) // Up to 10% bonus per correct streak\n\n    // Calculate optimal interval\n    let intervalIndex = Math.min(Math.floor(daysSinceReview / 7), baseIntervals.length - 1)\n    let interval = baseIntervals[intervalIndex] * difficultyMultiplier * (1 + streakBonus)\n\n    // Cap interval at 1 year for very easy/well-known items\n    interval = Math.min(interval, 365)\n\n    const nextReview = new Date(item.lastReviewed)\n    nextReview.setDate(nextReview.getDate() + interval)\n\n    // Calculate priority based on multiple factors\n    const overdueDays = Math.max(0, currentDate.getTime() - nextReview.getTime()) / (1000 * 60 * 60 * 24)\n    const difficultyPriority = item.difficulty * 2 // Harder items get higher priority\n    const overduePriority = overdueDays * 0.5 // Overdue items get priority boost\n    const streakPriority = item.correctStreak > 0 ? 0 : 1 // New/incorrect items get priority\n\n    const priority = Math.min(difficultyPriority + overduePriority + streakPriority, 10) // Cap at 10\n\n    return {\n      itemId: item.id,\n      nextReview,\n      priority,\n      interval: Math.round(interval)\n    }\n  }).sort((a, b) => b.priority - a.priority)\n}\n\nexport function analyzeKnowledgeGaps(\n  flashcards: Array<{ id: string; deckId: string; lastReviewed: Date; correctStreak: number; totalAttempts: number; difficulty: number }>,\n  studySessions: Array<{ subject: string; startTime: Date; duration: number }>,\n  timeWindow: number = 30 // days\n): Array<{ topic: string; confidence: number; lastReviewed: Date; recommendedReview: Date; priority: 'low' | 'medium' | 'high' }> {\n  const now = new Date()\n  const windowStart = new Date(now.getTime() - timeWindow * 24 * 60 * 60 * 1000)\n\n  // Group flashcards by subject/topic (using deckId as proxy)\n  const topicGroups = flashcards.reduce((acc, card) => {\n    const topic = `Topic_${card.deckId}`\n    if (!acc[topic]) acc[topic] = []\n    acc[topic].push(card)\n    return acc\n  }, {} as Record<string, typeof flashcards>)\n\n  const gaps: Array<{ topic: string; confidence: number; lastReviewed: Date; recommendedReview: Date; priority: 'low' | 'medium' | 'high' }> = []\n\n  for (const [topic, cards] of Object.entries(topicGroups)) {\n    // Calculate confidence based on performance metrics\n    const avgCorrectStreak = cards.reduce((acc, card) => acc + card.correctStreak, 0) / cards.length\n    const avgAccuracy = cards.reduce((acc, card) => {\n      const accuracy = card.totalAttempts > 0 ? (card.correctStreak / card.totalAttempts) * 100 : 0\n      return acc + accuracy\n    }, 0) / cards.length\n\n    const confidence = Math.min((avgCorrectStreak * 10 + avgAccuracy) / 2, 100)\n\n    // Find most recent review\n    const lastReviewed = cards.reduce((latest, card) =>\n      card.lastReviewed > latest ? card.lastReviewed : latest,\n      new Date(0)\n    )\n\n    // Calculate recommended review date based on confidence and time since last review\n    const daysSinceReview = Math.floor((now.getTime() - lastReviewed.getTime()) / (1000 * 60 * 60 * 24))\n    const baseInterval = Math.max(1, 7 - Math.floor(confidence / 20)) // 1-7 days based on confidence\n    const recommendedReview = new Date(lastReviewed.getTime() + baseInterval * 24 * 60 * 60 * 1000)\n\n    // Determine priority\n    let priority: 'low' | 'medium' | 'high' = 'low'\n    if (confidence < 50 || daysSinceReview > 14) priority = 'high'\n    else if (confidence < 75 || daysSinceReview > 7) priority = 'medium'\n\n    gaps.push({\n      topic: topic.replace('Topic_', 'Subject '),\n      confidence,\n      lastReviewed,\n      recommendedReview,\n      priority\n    })\n  }\n\n  // Sort by priority and confidence\n  return gaps.sort((a, b) => {\n    const priorityOrder = { high: 3, medium: 2, low: 1 }\n    const priorityDiff = priorityOrder[b.priority] - priorityOrder[a.priority]\n    if (priorityDiff !== 0) return priorityDiff\n    return a.confidence - b.confidence // Lower confidence first\n  })\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive active:scale-[0.98] transform\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-lg hover:shadow-primary/25 focus-visible:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 hover:shadow-lg hover:shadow-destructive/25 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border-2 bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:border-accent-foreground/20 hover:shadow-md dark:bg-input/30 dark:border-input dark:hover:bg-input/50 dark:hover:border-accent-foreground/20',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-md focus-visible:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground hover:shadow-sm dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline hover:text-primary/80',\n        success: 'bg-green-600 text-white hover:bg-green-700 hover:shadow-lg hover:shadow-green-500/25 focus-visible:bg-green-700',\n        warning: 'bg-orange-600 text-white hover:bg-orange-700 hover:shadow-lg hover:shadow-orange-500/25 focus-visible:bg-orange-700',\n      },\n      size: {\n        default: 'h-10 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 text-xs',\n        lg: 'h-12 rounded-lg px-6 has-[>svg]:px-4 text-base',\n        xl: 'h-14 rounded-lg px-8 has-[>svg]:px-5 text-lg',\n        icon: 'size-10',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-12',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,0eACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;YACN,SAAS;YACT,SAAS;QACX;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/components/error-boundary.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { Component, type ReactNode } from \"react\"\nimport { Button } from \"@/components/ui/button\"\n\ninterface Props {\n  children: ReactNode\n}\n\ninterface State {\n  hasError: boolean\n  error?: Error\n}\n\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error }\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error(\"Error caught by boundary:\", error, errorInfo)\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n          <div className=\"max-w-md w-full text-center\">\n            <div className=\"mb-6\">\n              <div className=\"w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-3xl\">⚠️</span>\n              </div>\n              <h1 className=\"text-2xl font-serif font-bold text-foreground mb-2\">\n                Oops! Something went wrong\n              </h1>\n              <p className=\"text-muted-foreground mb-6\">\n                We encountered an unexpected error. Please try refreshing the page.\n              </p>\n              {process.env.NODE_ENV === \"development\" && this.state.error && (\n                <details className=\"text-left mb-6 p-4 bg-muted rounded-lg\">\n                  <summary className=\"cursor-pointer font-semibold text-sm mb-2\">\n                    Error Details\n                  </summary>\n                  <pre className=\"text-xs text-muted-foreground overflow-auto\">\n                    {this.state.error.message}\n                    {\"\\n\"}\n                    {this.state.error.stack}\n                  </pre>\n                </details>\n              )}\n            </div>\n            <div className=\"space-y-2\">\n              <Button\n                onClick={() => {\n                  this.setState({ hasError: false, error: undefined })\n                  window.location.href = \"/\"\n                }}\n                className=\"w-full bg-primary hover:bg-primary/90 text-primary-foreground\"\n              >\n                Go to Home\n              </Button>\n              <Button\n                variant=\"outline\"\n                onClick={() => window.location.reload()}\n                className=\"w-full\"\n              >\n                Refresh Page\n              </Button>\n            </div>\n          </div>\n        </div>\n      )\n    }\n\n    return this.props.children\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAcO,MAAM,sBAAsB,kNAAS;IAC1C,YAAY,KAAY,CAAE;QACxB,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG;YAAE,UAAU;QAAM;IACjC;IAEA,OAAO,yBAAyB,KAAY,EAAS;QACnD,OAAO;YAAE,UAAU;YAAM;QAAM;IACjC;IAEA,kBAAkB,KAAY,EAAE,SAA0B,EAAE;QAC1D,QAAQ,KAAK,CAAC,6BAA6B,OAAO;IACpD;IAEA,SAAS;QACP,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACvB,qBACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAK,WAAU;kDAAW;;;;;;;;;;;8CAE7B,8OAAC;oCAAG,WAAU;8CAAqD;;;;;;8CAGnE,8OAAC;oCAAE,WAAU;8CAA6B;;;;;;gCAGzC,oDAAyB,iBAAiB,IAAI,CAAC,KAAK,CAAC,KAAK,kBACzD,8OAAC;oCAAQ,WAAU;;sDACjB,8OAAC;4CAAQ,WAAU;sDAA4C;;;;;;sDAG/D,8OAAC;4CAAI,WAAU;;gDACZ,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO;gDACxB;gDACA,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK;;;;;;;;;;;;;;;;;;;sCAK/B,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,qIAAM;oCACL,SAAS;wCACP,IAAI,CAAC,QAAQ,CAAC;4CAAE,UAAU;4CAAO,OAAO;wCAAU;wCAClD,OAAO,QAAQ,CAAC,IAAI,GAAG;oCACzB;oCACA,WAAU;8CACX;;;;;;8CAGD,8OAAC,qIAAM;oCACL,SAAQ;oCACR,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;oCACrC,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;QAOX;QAEA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;IAC5B;AACF"}},
    {"offset": {"line": 539, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/firebase.ts"],"sourcesContent":["\"use client\"\n\nimport { initializeApp, getApps, type FirebaseApp } from \"firebase/app\"\nimport { getAuth, GoogleAuthProvider, browserLocalPersistence, setPersistence } from \"firebase/auth\"\nimport { getFirestore } from \"firebase/firestore\"\nimport { getStorage } from \"firebase/storage\"\nimport { getDatabase } from \"firebase/database\"\n\n// Firebase configuration - Read from environment variables\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || \"\",\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || \"\",\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || \"\",\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || \"\",\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || \"\",\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || \"\",\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\n  databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,\n};\n\n// Check if running in browser\nconst isBrowser = typeof window !== \"undefined\"\n\n// Validate Firebase configuration\nconst isConfigValid = firebaseConfig.apiKey && firebaseConfig.authDomain && firebaseConfig.projectId\nif (!isConfigValid && isBrowser) {\n  console.error(\"❌ Firebase configuration is incomplete. Please check your .env.local file.\")\n  console.error(\"Required variables: NEXT_PUBLIC_FIREBASE_API_KEY, NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN, NEXT_PUBLIC_FIREBASE_PROJECT_ID\")\n  console.error(\"Current config:\", {\n    apiKey: firebaseConfig.apiKey ? \"✓ Set\" : \"✗ Missing\",\n    authDomain: firebaseConfig.authDomain ? \"✓ Set\" : \"✗ Missing\",\n    projectId: firebaseConfig.projectId ? \"✓ Set\" : \"✗ Missing\",\n  })\n}\n\n// Initialize Firebase only if it hasn't been initialized already\n// This prevents the \"Firebase: Error (app/already-initialized)\" error\nlet app: FirebaseApp\nif (getApps().length === 0) {\n  try {\n    app = initializeApp(firebaseConfig)\n    if (isBrowser) {\n      console.log(\"✓ Firebase initialized successfully for project:\", firebaseConfig.projectId)\n    }\n  } catch (error: any) {\n    console.error(\"Firebase initialization error:\", error)\n    throw new Error(\"Failed to initialize Firebase. Please check your configuration.\")\n  }\n} else {\n  app = getApps()[0]\n}\n\n// Initialize Firebase services with error handling\nexport const auth = getAuth(app)\nexport const db = getFirestore(app)\nexport const storage = getStorage(app)\nexport const realtimeDb = getDatabase(app)\n\n// Set auth persistence to LOCAL (persists even after browser is closed)\nif (isBrowser) {\n  setPersistence(auth, browserLocalPersistence).catch((error) => {\n    console.error(\"Failed to set auth persistence:\", error)\n  })\n}\n\n// Log auth state for debugging\nif (isBrowser) {\n  auth.onAuthStateChanged((user) => {\n    if (user) {\n      console.log(\"✓ User authenticated:\", user.email, \"UID:\", user.uid)\n    } else {\n      console.log(\"○ No user signed in\")\n    }\n  }, (error) => {\n    const authError = error as { code?: string; message?: string }\n    console.error(\"✗ Auth state error:\", authError.code, authError.message)\n  })\n}\n\nexport const googleProvider = new GoogleAuthProvider()\ngoogleProvider.setCustomParameters({\n  prompt: \"select_account\",\n})\n\nexport default app\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AANA;;;;;;AAQA,2DAA2D;AAC3D,MAAM,iBAAiB;IACrB,QAAQ,+EAA4C;IACpD,YAAY,iEAAgD;IAC5D,WAAW,iDAA+C;IAC1D,eAAe,qEAAmD;IAClE,mBAAmB,oDAAwD;IAC3E,OAAO,iFAA2C;IAClD,aAAa;IACb,WAAW;AACb;AAEA,8BAA8B;AAC9B,MAAM,YAAY,kDAAkB;AAEpC,kCAAkC;AAClC,MAAM,gBAAgB,eAAe,MAAM,IAAI,eAAe,UAAU,IAAI,eAAe,SAAS;AACpG;;AAUA,iEAAiE;AACjE,sEAAsE;AACtE,IAAI;AACJ,IAAI,IAAA,2KAAO,IAAG,MAAM,KAAK,GAAG;IAC1B,IAAI;QACF,MAAM,IAAA,iLAAa,EAAC;QACpB;;IAGF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,kCAAkC;QAChD,MAAM,IAAI,MAAM;IAClB;AACF,OAAO;IACL,MAAM,IAAA,2KAAO,GAAE,CAAC,EAAE;AACpB;AAGO,MAAM,OAAO,IAAA,6KAAO,EAAC;AACrB,MAAM,KAAK,IAAA,iLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,kMAAU,EAAC;AAC3B,MAAM,aAAa,IAAA,oMAAW,EAAC;AAEtC,wEAAwE;AACxE;;AAMA,+BAA+B;AAC/B;;AAaO,MAAM,iBAAiB,IAAI,wLAAkB;AACpD,eAAe,mBAAmB,CAAC;IACjC,QAAQ;AACV;uCAEe"}},
    {"offset": {"line": 620, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/hooks/useAuth.ts"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { type User, onAuthStateChanged, signOut } from \"firebase/auth\"\nimport { auth } from \"@/lib/firebase\"\n\nexport function useAuth() {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<Error | null>(null)\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(\n      auth,\n      (currentUser) => {\n        setUser(currentUser)\n        setLoading(false)\n        setError(null)\n      },\n      (err) => {\n        console.error(\"Auth state change error:\", err)\n        setError(err as Error)\n        setLoading(false)\n      },\n    )\n\n    return () => unsubscribe()\n  }, [])\n\n  const logout = async () => {\n    try {\n      await signOut(auth)\n      setUser(null)\n    } catch (err) {\n      setError(err as Error)\n    }\n  }\n\n  return { user, loading, error, logout }\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AACA;AAJA;;;;AAMO,SAAS;IACd,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAe;IAEjD,IAAA,kNAAS,EAAC;QACR,MAAM,cAAc,IAAA,wLAAkB,EACpC,uHAAI,EACJ,CAAC;YACC,QAAQ;YACR,WAAW;YACX,SAAS;QACX,GACA,CAAC;YACC,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,SAAS;YACT,WAAW;QACb;QAGF,OAAO,IAAM;IACf,GAAG,EAAE;IAEL,MAAM,SAAS;QACb,IAAI;YACF,MAAM,IAAA,6KAAO,EAAC,uHAAI;YAClB,QAAQ;QACV,EAAE,OAAO,KAAK;YACZ,SAAS;QACX;IACF;IAEA,OAAO;QAAE;QAAM;QAAS;QAAO;IAAO;AACxC"}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/components/auth-provider.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, type ReactNode } from \"react\"\nimport { useAuth } from \"@/lib/hooks/useAuth\"\nimport type { User } from \"firebase/auth\"\n\ninterface AuthContextType {\n  user: User | null\n  loading: boolean\n  error: Error | null\n  logout: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const auth = useAuth()\n\n  return <AuthContext.Provider value={auth}>{children}</AuthContext.Provider>\n}\n\nexport function useAuthContext() {\n  const context = useContext(AuthContext)\n  if (!context) {\n    throw new Error(\"useAuthContext must be used within AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAaA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,OAAO,IAAA,kIAAO;IAEpB,qBAAO,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAAO;;;;;;AAC7C;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 703, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/components/theme-provider.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport {\n  ThemeProvider as NextThemesProvider,\n  type ThemeProviderProps,\n} from 'next-themes'\n\nexport function ThemeProvider({ children, ...props }: ThemeProviderProps) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAQO,SAAS,cAAc,EAAE,QAAQ,EAAE,GAAG,OAA2B;IACtE,qBAAO,8OAAC,iKAAkB;QAAE,GAAG,KAAK;kBAAG;;;;;;AACzC"}},
    {"offset": {"line": 726, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/components/ui/loading.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { createContext, useContext, useState, ReactNode } from 'react'\nimport { Loader2 } from 'lucide-react'\n\ninterface LoadingContextType {\n  isLoading: boolean\n  loadingMessage: string\n  setLoading: (loading: boolean, message?: string) => void\n}\n\nconst LoadingContext = createContext<LoadingContextType | undefined>(undefined)\n\nexport function LoadingProvider({ children }: { children: ReactNode }) {\n  const [isLoading, setIsLoading] = useState(false)\n  const [loadingMessage, setLoadingMessage] = useState('Loading...')\n\n  const setLoading = (loading: boolean, message = 'Loading...') => {\n    setIsLoading(loading)\n    setLoadingMessage(message)\n  }\n\n  return (\n    <LoadingContext.Provider value={{ isLoading, loadingMessage, setLoading }}>\n      {children}\n      {isLoading && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n          <div className=\"bg-slate-800 rounded-lg border border-slate-700 shadow-lg p-6 flex items-center gap-3\">\n            <Loader2 className=\"w-6 h-6 animate-spin text-primary\" />\n            <span className=\"text-slate-100\">{loadingMessage}</span>\n          </div>\n        </div>\n      )}\n    </LoadingContext.Provider>\n  )\n}\n\nexport function useLoading() {\n  const context = useContext(LoadingContext)\n  if (context === undefined) {\n    throw new Error('useLoading must be used within a LoadingProvider')\n  }\n  return context\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAWA,MAAM,+BAAiB,IAAA,sNAAa,EAAiC;AAE9D,SAAS,gBAAgB,EAAE,QAAQ,EAA2B;IACnE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IAErD,MAAM,aAAa,CAAC,SAAkB,UAAU,YAAY;QAC1D,aAAa;QACb,kBAAkB;IACpB;IAEA,qBACE,8OAAC,eAAe,QAAQ;QAAC,OAAO;YAAE;YAAW;YAAgB;QAAW;;YACrE;YACA,2BACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4NAAO;4BAAC,WAAU;;;;;;sCACnB,8OAAC;4BAAK,WAAU;sCAAkB;;;;;;;;;;;;;;;;;;;;;;;AAM9C;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 822, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/voice.ts"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useCallback, useRef } from \"react\"\n\n// Web Speech API types\ninterface SpeechRecognitionEvent extends Event {\n  results: SpeechRecognitionResultList\n  resultIndex: number\n}\n\ninterface SpeechRecognitionResultList {\n  length: number\n  item(index: number): SpeechRecognitionResult\n  [index: number]: SpeechRecognitionResult\n}\n\ninterface SpeechRecognitionResult {\n  isFinal: boolean\n  length: number\n  item(index: number): SpeechRecognitionAlternative\n  [index: number]: SpeechRecognitionAlternative\n}\n\ninterface SpeechRecognitionAlternative {\n  transcript: string\n  confidence: number\n}\n\ninterface SpeechRecognition extends EventTarget {\n  continuous: boolean\n  interimResults: boolean\n  lang: string\n  start(): void\n  stop(): void\n  abort(): void\n  onerror: ((event: Event & { error: string }) => void) | null\n  onresult: ((event: SpeechRecognitionEvent) => void) | null\n  onstart: (() => void) | null\n  onend: (() => void) | null\n  onspeechend: (() => void) | null\n}\n\ndeclare global {\n  interface Window {\n    SpeechRecognition: new () => SpeechRecognition\n    webkitSpeechRecognition: new () => SpeechRecognition\n  }\n}\n\nexport interface VoiceInputState {\n  isListening: boolean\n  transcript: string\n  interimTranscript: string\n  error: string | null\n  isSupported: boolean\n}\n\nexport interface UseVoiceInputOptions {\n  continuous?: boolean\n  language?: string\n  onResult?: (transcript: string, isFinal: boolean) => void\n  onError?: (error: string) => void\n  onStart?: () => void\n  onEnd?: () => void\n}\n\n// Check if speech recognition is supported\nexport function isSpeechRecognitionSupported(): boolean {\n  if (typeof window === \"undefined\") return false\n  return !!(window.SpeechRecognition || window.webkitSpeechRecognition)\n}\n\n// Main hook for voice input\nexport function useVoiceInput(options: UseVoiceInputOptions = {}): {\n  state: VoiceInputState\n  startListening: () => void\n  stopListening: () => void\n  resetTranscript: () => void\n} {\n  const {\n    continuous = false,\n    language = \"en-US\",\n    onResult,\n    onError,\n    onStart,\n    onEnd\n  } = options\n\n  const [state, setState] = useState<VoiceInputState>({\n    isListening: false,\n    transcript: \"\",\n    interimTranscript: \"\",\n    error: null,\n    isSupported: false\n  })\n\n  const recognitionRef = useRef<SpeechRecognition | null>(null)\n  const transcriptRef = useRef(\"\")\n  \n  // Store callbacks in refs to avoid re-running useEffect\n  const onResultRef = useRef(onResult)\n  const onErrorRef = useRef(onError)\n  const onStartRef = useRef(onStart)\n  const onEndRef = useRef(onEnd)\n  \n  // Update refs when callbacks change\n  useEffect(() => {\n    onResultRef.current = onResult\n    onErrorRef.current = onError\n    onStartRef.current = onStart\n    onEndRef.current = onEnd\n  })\n\n  // Initialize speech recognition - only run once\n  useEffect(() => {\n    if (typeof window === \"undefined\") return\n\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition\n    \n    if (!SpeechRecognition) {\n      setState(prev => ({ ...prev, isSupported: false }))\n      return\n    }\n\n    setState(prev => ({ ...prev, isSupported: true }))\n\n    const recognition = new SpeechRecognition()\n    recognition.continuous = continuous\n    recognition.interimResults = true\n    recognition.lang = language\n\n    recognition.onstart = () => {\n      setState(prev => ({ ...prev, isListening: true, error: null }))\n      onStartRef.current?.()\n    }\n\n    recognition.onend = () => {\n      setState(prev => ({ ...prev, isListening: false }))\n      onEndRef.current?.()\n    }\n\n    recognition.onerror = (event) => {\n      const errorMessage = getErrorMessage(event.error)\n      setState(prev => ({ ...prev, error: errorMessage, isListening: false }))\n      onErrorRef.current?.(errorMessage)\n    }\n\n    recognition.onresult = (event) => {\n      let interimTranscript = \"\"\n      let finalTranscript = transcriptRef.current\n\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const result = event.results[i]\n        const transcript = result[0].transcript\n\n        if (result.isFinal) {\n          finalTranscript += transcript + \" \"\n          transcriptRef.current = finalTranscript\n          onResultRef.current?.(transcript.trim(), true)\n        } else {\n          interimTranscript += transcript\n          onResultRef.current?.(transcript, false)\n        }\n      }\n\n      setState(prev => ({\n        ...prev,\n        transcript: finalTranscript.trim(),\n        interimTranscript\n      }))\n    }\n\n    recognitionRef.current = recognition\n\n    return () => {\n      recognition.abort()\n    }\n  }, [continuous, language]) // Only re-run when these change, not callbacks\n\n  const startListening = useCallback(() => {\n    if (!recognitionRef.current) return\n    \n    try {\n      transcriptRef.current = \"\"\n      setState(prev => ({ ...prev, transcript: \"\", interimTranscript: \"\", error: null }))\n      recognitionRef.current.start()\n    } catch (error) {\n      console.error(\"Error starting speech recognition:\", error)\n    }\n  }, [])\n\n  const stopListening = useCallback(() => {\n    if (!recognitionRef.current) return\n    \n    try {\n      recognitionRef.current.stop()\n    } catch (error) {\n      console.error(\"Error stopping speech recognition:\", error)\n    }\n  }, [])\n\n  const resetTranscript = useCallback(() => {\n    transcriptRef.current = \"\"\n    setState(prev => ({ ...prev, transcript: \"\", interimTranscript: \"\" }))\n  }, [])\n\n  return {\n    state,\n    startListening,\n    stopListening,\n    resetTranscript\n  }\n}\n\n// Helper to get human-readable error messages\nfunction getErrorMessage(error: string): string {\n  switch (error) {\n    case \"no-speech\":\n      return \"No speech detected. Please try again.\"\n    case \"audio-capture\":\n      return \"No microphone found. Please check your audio settings.\"\n    case \"not-allowed\":\n      return \"Microphone access denied. Please allow microphone access.\"\n    case \"network\":\n      return \"Network error. Please check your connection.\"\n    case \"aborted\":\n      return \"Speech recognition was aborted.\"\n    case \"language-not-supported\":\n      return \"Language not supported.\"\n    case \"service-not-allowed\":\n      return \"Speech recognition service not allowed.\"\n    default:\n      return `Speech recognition error: ${error}`\n  }\n}\n\n// Text-to-Speech utility\nexport interface SpeakOptions {\n  rate?: number // 0.1 to 10, default 1\n  pitch?: number // 0 to 2, default 1\n  volume?: number // 0 to 1, default 1\n  voice?: SpeechSynthesisVoice | null\n  lang?: string\n}\n\nexport function speak(text: string, options: SpeakOptions = {}): Promise<void> {\n  return new Promise((resolve, reject) => {\n    if (typeof window === \"undefined\" || !window.speechSynthesis) {\n      reject(new Error(\"Speech synthesis not supported\"))\n      return\n    }\n\n    // Cancel any ongoing speech\n    window.speechSynthesis.cancel()\n\n    const utterance = new SpeechSynthesisUtterance(text)\n    utterance.rate = options.rate ?? 1.1\n    utterance.pitch = options.pitch ?? 1.1\n    utterance.volume = options.volume ?? 0.9\n    utterance.lang = options.lang ?? \"en-US\"\n\n    // Try to find a female voice for smoother sound\n    if (!options.voice) {\n      const voices = window.speechSynthesis.getVoices()\n      // Prefer: Samantha (macOS), Google UK Female, Microsoft Zira, any female voice\n      const femaleVoice = voices.find(v => \n        v.name.includes(\"Samantha\") || \n        v.name.includes(\"Female\") || \n        v.name.includes(\"Zira\") ||\n        v.name.includes(\"Karen\") ||\n        v.name.includes(\"Moira\") ||\n        v.name.includes(\"Fiona\") ||\n        v.name.includes(\"Victoria\") ||\n        v.name.includes(\"Google UK English Female\")\n      ) || voices.find(v => v.lang.startsWith(\"en\"))\n      \n      if (femaleVoice) {\n        utterance.voice = femaleVoice\n      }\n    } else {\n      utterance.voice = options.voice\n    }\n\n    utterance.onend = () => resolve()\n    utterance.onerror = (event) => {\n      // Don't reject on cancel - it's expected behavior\n      if (event.error === 'canceled' || event.error === 'interrupted') {\n        resolve()\n      } else {\n        reject(new Error(event.error))\n      }\n    }\n\n    window.speechSynthesis.speak(utterance)\n  })\n}\n\n// Get available voices\nexport function getVoices(): SpeechSynthesisVoice[] {\n  if (typeof window === \"undefined\" || !window.speechSynthesis) return []\n  return window.speechSynthesis.getVoices()\n}\n\n// Stop speaking\nexport function stopSpeaking(): void {\n  if (typeof window === \"undefined\" || !window.speechSynthesis) return\n  window.speechSynthesis.cancel()\n}\n\n// Check if currently speaking\nexport function isSpeaking(): boolean {\n  if (typeof window === \"undefined\" || !window.speechSynthesis) return false\n  return window.speechSynthesis.speaking\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA;AAFA;;AAmEO,SAAS;IACd,wCAAmC,OAAO;;;AAE5C;AAGO,SAAS,cAAc,UAAgC,CAAC,CAAC;IAM9D,MAAM,EACJ,aAAa,KAAK,EAClB,WAAW,OAAO,EAClB,QAAQ,EACR,OAAO,EACP,OAAO,EACP,KAAK,EACN,GAAG;IAEJ,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAkB;QAClD,aAAa;QACb,YAAY;QACZ,mBAAmB;QACnB,OAAO;QACP,aAAa;IACf;IAEA,MAAM,iBAAiB,IAAA,+MAAM,EAA2B;IACxD,MAAM,gBAAgB,IAAA,+MAAM,EAAC;IAE7B,wDAAwD;IACxD,MAAM,cAAc,IAAA,+MAAM,EAAC;IAC3B,MAAM,aAAa,IAAA,+MAAM,EAAC;IAC1B,MAAM,aAAa,IAAA,+MAAM,EAAC;IAC1B,MAAM,WAAW,IAAA,+MAAM,EAAC;IAExB,oCAAoC;IACpC,IAAA,kNAAS,EAAC;QACR,YAAY,OAAO,GAAG;QACtB,WAAW,OAAO,GAAG;QACrB,WAAW,OAAO,GAAG;QACrB,SAAS,OAAO,GAAG;IACrB;IAEA,gDAAgD;IAChD,IAAA,kNAAS,EAAC;QACR,wCAAmC;;;QAEnC,MAAM;QASN,MAAM;IAmDR,GAAG;QAAC;QAAY;KAAS,GAAE,+CAA+C;IAE1E,MAAM,iBAAiB,IAAA,oNAAW,EAAC;QACjC,IAAI,CAAC,eAAe,OAAO,EAAE;QAE7B,IAAI;YACF,cAAc,OAAO,GAAG;YACxB,SAAS,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,YAAY;oBAAI,mBAAmB;oBAAI,OAAO;gBAAK,CAAC;YACjF,eAAe,OAAO,CAAC,KAAK;QAC9B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sCAAsC;QACtD;IACF,GAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,IAAI,CAAC,eAAe,OAAO,EAAE;QAE7B,IAAI;YACF,eAAe,OAAO,CAAC,IAAI;QAC7B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sCAAsC;QACtD;IACF,GAAG,EAAE;IAEL,MAAM,kBAAkB,IAAA,oNAAW,EAAC;QAClC,cAAc,OAAO,GAAG;QACxB,SAAS,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,YAAY;gBAAI,mBAAmB;YAAG,CAAC;IACtE,GAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA;QACA;IACF;AACF;AAEA,8CAA8C;AAC9C,SAAS,gBAAgB,KAAa;IACpC,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO,CAAC,0BAA0B,EAAE,OAAO;IAC/C;AACF;AAWO,SAAS,MAAM,IAAY,EAAE,UAAwB,CAAC,CAAC;IAC5D,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,wCAA8D;YAC5D,OAAO,IAAI,MAAM;YACjB;QACF;;;QAKA,MAAM;IAuCR;AACF;AAGO,SAAS;IACd,wCAA8D,OAAO,EAAE;;;AAEzE;AAGO,SAAS;IACd,wCAA8D;;;AAEhE;AAGO,SAAS;IACd,wCAA8D,OAAO;;;AAEvE"}},
    {"offset": {"line": 967, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/ai-client.ts"],"sourcesContent":["\"use client\"\n\n// Unified AI Client - Uses Groq (free tier) with Gemini fallback\n// Groq: 14,400 requests/day free, fastest inference\n// Gemini: 15 RPM / 1M tokens/day free\n\nconst GROQ_API_KEY = process.env.NEXT_PUBLIC_GROQ_API_KEY || \"\"\nconst GEMINI_API_KEY = process.env.NEXT_PUBLIC_GEMINI_API_KEY || \"\"\n\n// Models\nconst GROQ_MODEL = \"llama-3.1-70b-versatile\" // Fast, high quality\nconst GEMINI_MODEL = \"gemini-2.0-flash\"\n\nexport interface Message {\n  role: \"user\" | \"assistant\" | \"system\"\n  content: string\n}\n\nexport interface ChatOptions {\n  temperature?: number\n  maxTokens?: number\n  systemPrompt?: string\n}\n\nexport interface GeneratedFlashcard {\n  front: string\n  back: string\n}\n\n// Sleep helper for retry delays\nconst sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms))\n\n// Truncate content intelligently\nfunction truncateContent(content: string, maxChars: number): string {\n  if (content.length <= maxChars) return content\n  let truncated = content.slice(0, maxChars)\n  const lastPeriod = truncated.lastIndexOf('. ')\n  const lastNewline = truncated.lastIndexOf('\\n')\n  const cutPoint = Math.max(lastPeriod, lastNewline)\n  if (cutPoint > maxChars * 0.8) {\n    truncated = truncated.slice(0, cutPoint + 1)\n  }\n  return truncated + \"\\n\\n[Content truncated...]\"\n}\n\n// Fix truncated JSON arrays\nfunction fixTruncatedJson(jsonStr: string): string {\n  let fixed = jsonStr.trim()\n  \n  if (!fixed.startsWith('[')) {\n    const arrayStart = fixed.indexOf('[')\n    if (arrayStart !== -1) {\n      fixed = fixed.slice(arrayStart)\n    } else {\n      throw new Error(\"No JSON array found\")\n    }\n  }\n  \n  let bracketCount = 0\n  let inString = false\n  let escapeNext = false\n  let lastCompleteObject = -1\n  \n  for (let i = 0; i < fixed.length; i++) {\n    const char = fixed[i]\n    if (escapeNext) { escapeNext = false; continue }\n    if (char === '\\\\') { escapeNext = true; continue }\n    if (char === '\"') { inString = !inString; continue }\n    if (inString) continue\n    if (char === '{') bracketCount++\n    if (char === '}') {\n      bracketCount--\n      if (bracketCount === 0) lastCompleteObject = i\n    }\n  }\n  \n  if (lastCompleteObject > 0) {\n    fixed = fixed.slice(0, lastCompleteObject + 1)\n    if (!fixed.endsWith(']')) fixed += ']'\n  }\n  \n  fixed = fixed.replace(/,\\s*\\]$/, ']')\n  fixed = fixed.replace(/,\\s*$/, '') + ']'\n  if (!fixed.endsWith(']')) fixed += ']'\n  \n  return fixed\n}\n\n// ==================== GROQ API ====================\nasync function chatWithGroq(messages: Message[], options: ChatOptions = {}): Promise<string> {\n  if (!GROQ_API_KEY) {\n    throw new Error(\"GROQ_API_KEY not configured\")\n  }\n\n  const allMessages = options.systemPrompt \n    ? [{ role: \"system\" as const, content: options.systemPrompt }, ...messages]\n    : messages\n\n  const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n    method: \"POST\",\n    headers: {\n      \"Authorization\": `Bearer ${GROQ_API_KEY}`,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      model: GROQ_MODEL,\n      messages: allMessages,\n      temperature: options.temperature ?? 0.7,\n      max_tokens: options.maxTokens ?? 4096\n    })\n  })\n\n  if (!response.ok) {\n    const error = await response.json()\n    throw new Error(`Groq API error: ${error.error?.message || response.statusText}`)\n  }\n\n  const data = await response.json()\n  return data.choices?.[0]?.message?.content || \"\"\n}\n\n// ==================== GEMINI API ====================\nasync function chatWithGemini(messages: Message[], options: ChatOptions = {}): Promise<string> {\n  if (!GEMINI_API_KEY) {\n    throw new Error(\"GEMINI_API_KEY not configured\")\n  }\n\n  // Convert messages to Gemini format\n  const contents = messages.map(msg => ({\n    role: msg.role === \"assistant\" ? \"model\" : \"user\",\n    parts: [{ text: msg.content }]\n  }))\n\n  // Add system prompt as first user message if provided\n  if (options.systemPrompt) {\n    contents.unshift({\n      role: \"user\",\n      parts: [{ text: `System Instructions: ${options.systemPrompt}` }]\n    })\n  }\n\n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_MODEL}:generateContent?key=${GEMINI_API_KEY}`,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        contents,\n        generationConfig: {\n          temperature: options.temperature ?? 0.7,\n          maxOutputTokens: options.maxTokens ?? 4096\n        }\n      })\n    }\n  )\n\n  if (!response.ok) {\n    const error = await response.json()\n    throw new Error(`Gemini API error: ${error.error?.message || response.statusText}`)\n  }\n\n  const data = await response.json()\n  return data.candidates?.[0]?.content?.parts?.[0]?.text || \"\"\n}\n\n// ==================== UNIFIED CHAT ====================\nexport async function chat(\n  messages: Message[], \n  options: ChatOptions = {}\n): Promise<string> {\n  const maxRetries = 3\n  \n  // Try Groq first (faster, more generous free tier)\n  if (GROQ_API_KEY) {\n    for (let attempt = 0; attempt < maxRetries; attempt++) {\n      try {\n        if (attempt > 0) {\n          await sleep(Math.pow(2, attempt) * 1000)\n        }\n        return await chatWithGroq(messages, options)\n      } catch (error: any) {\n        console.warn(`Groq attempt ${attempt + 1} failed:`, error.message)\n        if (error.message?.includes(\"rate\") || error.message?.includes(\"429\")) {\n          continue\n        }\n        break // Non-rate-limit error, try fallback\n      }\n    }\n  }\n\n  // Fallback to Gemini\n  if (GEMINI_API_KEY) {\n    for (let attempt = 0; attempt < maxRetries; attempt++) {\n      try {\n        if (attempt > 0) {\n          await sleep(Math.pow(2, attempt) * 1000)\n        }\n        return await chatWithGemini(messages, options)\n      } catch (error: any) {\n        console.warn(`Gemini attempt ${attempt + 1} failed:`, error.message)\n        if (error.message?.includes(\"rate\") || error.message?.includes(\"429\") || error.message?.includes(\"exhausted\")) {\n          continue\n        }\n        throw error\n      }\n    }\n  }\n\n  throw new Error(\"No AI provider available. Please configure NEXT_PUBLIC_GROQ_API_KEY or NEXT_PUBLIC_GEMINI_API_KEY\")\n}\n\n// ==================== FLASHCARD GENERATION ====================\nexport async function generateFlashcards(\n  content: string,\n  topic: string,\n  count: number = 5,\n  difficulty: \"easy\" | \"medium\" | \"hard\" = \"medium\"\n): Promise<GeneratedFlashcard[]> {\n  const maxContentChars = 80000 // ~20k tokens\n  const processedContent = content ? truncateContent(content.trim(), maxContentChars) : \"\"\n\n  const difficultyPrompts = {\n    easy: \"Create simple, straightforward questions with concise answers suitable for beginners.\",\n    medium: \"Create balanced questions that test understanding with moderately detailed answers.\",\n    hard: \"Create challenging questions that require deep understanding with comprehensive answers.\"\n  }\n\n  const systemPrompt = \"You are an expert educator creating flashcards. Return ONLY valid JSON arrays, no other text.\"\n\n  const userPrompt = processedContent && processedContent.length > 50\n    ? `Create ${count} flashcards based ONLY on this study material:\n\n\"\"\"\n${processedContent}\n\"\"\"\n\n${topic ? `Topic: ${topic}` : \"\"}\nDifficulty: ${difficulty} - ${difficultyPrompts[difficulty]}\n\nReturn ONLY a JSON array: [{\"front\": \"Question?\", \"back\": \"Answer\"}]\nCRITICAL: Only use information from the provided material.`\n    : `Create ${count} flashcards about \"${topic}\".\nDifficulty: ${difficulty} - ${difficultyPrompts[difficulty]}\nReturn ONLY a JSON array: [{\"front\": \"Question?\", \"back\": \"Answer\"}]`\n\n  const response = await chat(\n    [{ role: \"user\", content: userPrompt }],\n    { systemPrompt, temperature: 0.7, maxTokens: 8192 }\n  )\n\n  // Parse JSON from response\n  let jsonStr = response\n  \n  // Clean the response to remove markdown formatting and backticks\n  const cleanResponse = response\n    .replace(/```(?:json)?\\s*/g, '')  // Remove opening code block markers\n    .replace(/```\\s*$/g, '')          // Remove closing code block markers\n    .replace(/`/g, '')                // Remove any remaining backticks\n    .trim()\n  \n  // Try to extract JSON from cleaned response\n  const jsonMatch = cleanResponse.match(/```(?:json)?\\s*([\\s\\S]*?)```/)\n  if (jsonMatch) {\n    jsonStr = jsonMatch[1].trim()\n  } else {\n    const arrayMatch = cleanResponse.match(/\\[[\\s\\S]*\\]/)\n    if (arrayMatch) jsonStr = arrayMatch[0]\n  }\n\n  let flashcards: GeneratedFlashcard[]\n  try {\n    flashcards = JSON.parse(jsonStr)\n  } catch {\n    jsonStr = fixTruncatedJson(jsonStr)\n    flashcards = JSON.parse(jsonStr)\n  }\n\n  if (!Array.isArray(flashcards)) {\n    throw new Error(\"Invalid response format\")\n  }\n\n  return flashcards.filter(card => card.front && card.back).slice(0, count)\n}\n\n// ==================== ASSISTANT QUICK RESPONSES ====================\nexport async function getAssistantResponse(\n  userMessage: string,\n  context?: {\n    conversationHistory?: Message[]\n    userMaterials?: string[]\n    currentPage?: string\n  }\n): Promise<string> {\n  const systemPrompt = `You are StudyPal AI, a helpful student assistant. You help with:\n- Answering study questions\n- Explaining concepts\n- Creating flashcards and quizzes\n- Managing study schedules\n- Providing encouragement and study tips\n\nBe concise, friendly, and educational. If asked to create flashcards or perform actions, acknowledge the request and explain what you'll do.\n\n${context?.currentPage ? `The user is currently on the ${context.currentPage} page.` : \"\"}\n${context?.userMaterials?.length ? `The user has materials on: ${context.userMaterials.join(\", \")}` : \"\"}`\n\n  const messages: Message[] = [\n    ...(context?.conversationHistory || []),\n    { role: \"user\", content: userMessage }\n  ]\n\n  return chat(messages, { systemPrompt, temperature: 0.7, maxTokens: 1024 })\n}\n\n// ==================== SUMMARIZATION ====================\nexport async function summarizeContent(\n  content: string,\n  style: \"brief\" | \"detailed\" | \"bullet-points\" = \"bullet-points\"\n): Promise<string> {\n  const processedContent = truncateContent(content, 50000)\n  \n  const stylePrompts = {\n    brief: \"Provide a 2-3 sentence summary.\",\n    detailed: \"Provide a comprehensive summary covering all key points.\",\n    \"bullet-points\": \"Provide a summary as bullet points highlighting key concepts.\"\n  }\n\n  return chat([{\n    role: \"user\",\n    content: `Summarize this content. ${stylePrompts[style]}\n\nContent:\n\"\"\"\n${processedContent}\n\"\"\"`\n  }], { temperature: 0.5, maxTokens: 2048 })\n}\n\n// ==================== EXPLAIN CONCEPT ====================\nexport async function explainConcept(\n  concept: string,\n  level: \"beginner\" | \"intermediate\" | \"advanced\" = \"intermediate\"\n): Promise<string> {\n  const levelPrompts = {\n    beginner: \"Explain like I'm 10 years old, using simple language and analogies.\",\n    intermediate: \"Explain for a college student, with some technical detail.\",\n    advanced: \"Explain in depth with technical terminology and nuances.\"\n  }\n\n  return chat([{\n    role: \"user\",\n    content: `Explain: \"${concept}\"\\n\\n${levelPrompts[level]}`\n  }], { temperature: 0.7, maxTokens: 2048 })\n}\n\n// ==================== GENERATE STUDY PLAN ====================\nexport interface StudyPlanItem {\n  topic: string\n  duration: number // in minutes\n  resources: string[]\n  priority: \"high\" | \"medium\" | \"low\"\n}\n\nexport async function generateStudyPlan(\n  subject: string,\n  goals: string[],\n  availableTime: number, // in hours per week\n  currentLevel: \"beginner\" | \"intermediate\" | \"advanced\" = \"intermediate\",\n  deadline?: Date\n): Promise<StudyPlanItem[]> {\n  const deadlineStr = deadline ? `Deadline: ${deadline.toDateString()}` : \"\"\n  \n  const prompt = `Create a detailed study plan for ${subject} with the following goals: ${goals.join(\", \")}.\nAvailable study time: ${availableTime} hours per week.\nCurrent level: ${currentLevel}.\n${deadlineStr}\n\nReturn a JSON array of study plan items with this structure:\n[\n  {\n    \"topic\": \"Topic name\",\n    \"duration\": 60,\n    \"resources\": [\"Resource 1\", \"Resource 2\"],\n    \"priority\": \"high\"\n  }\n]\n\nMake the plan realistic, progressive, and optimized for spaced repetition.`\n\n  const response = await chat([{\n    role: \"user\",\n    content: prompt\n  }], { temperature: 0.3, maxTokens: 4096 })\n\n  try {\n    // Clean the response by removing markdown code blocks and backticks\n    let cleanResponse = response.trim()\n    \n    // Remove markdown code block markers\n    cleanResponse = cleanResponse.replace(/^```(?:json)?\\s*/i, '').replace(/\\s*```$/, '')\n    \n    // Remove any remaining backticks\n    cleanResponse = cleanResponse.replace(/`/g, '')\n    \n    // Try to find JSON array if response contains extra text\n    const jsonMatch = cleanResponse.match(/\\[[\\s\\S]*\\]/)\n    if (jsonMatch) {\n      cleanResponse = jsonMatch[0]\n    }\n    \n    return JSON.parse(cleanResponse)\n  } catch (e) {\n    console.error(\"Failed to parse study plan JSON:\", e)\n    console.error(\"Raw response:\", response)\n    return []\n  }\n}\n\n// ==================== GENERATE QUIZ ====================\nexport interface QuizQuestion {\n  question: string\n  options: string[]\n  correctAnswer: number\n  explanation: string\n  difficulty: \"easy\" | \"medium\" | \"hard\"\n}\n\nexport async function generateQuiz(\n  contentOrTopic: string,\n  topicOrQuestionCount?: string | number,\n  questionCountOrDifficulty?: number | \"easy\" | \"medium\" | \"hard\",\n  difficulty: \"easy\" | \"medium\" | \"hard\" = \"medium\"\n): Promise<QuizQuestion[]> {\n  let content: string\n  let topic: string\n  let questionCount: number = 10\n\n  // Handle overloads\n  if (typeof topicOrQuestionCount === 'string') {\n    // generateQuiz(content, topic, questionCount?, difficulty?)\n    content = contentOrTopic\n    topic = topicOrQuestionCount\n    if (typeof questionCountOrDifficulty === 'number') {\n      questionCount = questionCountOrDifficulty\n    }\n  } else {\n    // generateQuiz(topic, questionCount?, difficulty?)\n    content = contentOrTopic // use topic as content\n    topic = contentOrTopic\n    if (typeof topicOrQuestionCount === 'number') {\n      questionCount = topicOrQuestionCount\n    }\n    if (typeof questionCountOrDifficulty === 'string') {\n      difficulty = questionCountOrDifficulty\n    }\n  }\n\n  const processedContent = truncateContent(content, 30000)\n  \n  const prompt = `Generate a ${questionCount}-question multiple-choice quiz on \"${topic}\" based on this content.\nDifficulty level: ${difficulty}\n\nReturn a JSON array with this exact structure:\n[\n  {\n    \"question\": \"Question text?\",\n    \"options\": [\"A) Option 1\", \"B) Option 2\", \"C) Option 3\", \"D) Option 4\"],\n    \"correctAnswer\": 0,\n    \"explanation\": \"Why this is correct\",\n    \"difficulty\": \"${difficulty}\"\n  }\n]\n\nEnsure questions test understanding, not just memorization. Make options plausible but clearly distinguishable.\n\nContent:\n\"\"\"\n${processedContent}\n\"\"\"`\n\n  const response = await chat([{\n    role: \"user\",\n    content: prompt\n  }], { temperature: 0.4, maxTokens: 6144 })\n\n  try {\n    // Clean the response by removing markdown code blocks and backticks\n    let cleanResponse = response.trim()\n    \n    // Remove markdown code block markers\n    cleanResponse = cleanResponse.replace(/^```(?:json)?\\s*/i, '').replace(/\\s*```$/, '')\n    \n    // Remove any remaining backticks\n    cleanResponse = cleanResponse.replace(/`/g, '')\n    \n    // Try to find JSON array if response contains extra text\n    const jsonMatch = cleanResponse.match(/\\[[\\s\\S]*\\]/)\n    if (jsonMatch) {\n      cleanResponse = jsonMatch[0]\n    }\n    \n    return JSON.parse(cleanResponse)\n  } catch (e) {\n    console.error(\"Failed to parse quiz JSON:\", e)\n    console.error(\"Raw response:\", response)\n    return []\n  }\n}\n\n// ==================== ANALYZE LEARNING PATTERNS ====================\nexport interface LearningAnalysis {\n  strengths: string[]\n  weaknesses: string[]\n  recommendations: string[]\n  predictedImprovement: number // percentage\n  optimalStudyTimes: string[]\n}\n\nexport async function analyzeLearningPatterns(\n  userHistory: {\n    subject: string\n    score: number\n    timeSpent: number\n    date: Date\n  }[]\n): Promise<LearningAnalysis> {\n  const historyStr = userHistory.map(h => \n    `${h.subject}: ${h.score}% in ${h.timeSpent}min on ${h.date.toDateString()}`\n  ).join('\\n')\n\n  const prompt = `Analyze this learning history and provide insights:\n\n${historyStr}\n\nReturn a JSON object with:\n{\n  \"strengths\": [\"Strength 1\", \"Strength 2\"],\n  \"weaknesses\": [\"Weakness 1\"],\n  \"recommendations\": [\"Recommendation 1\"],\n  \"predictedImprovement\": 15,\n  \"optimalStudyTimes\": [\"Morning 9-11 AM\", \"Evening 7-9 PM\"]\n}\n\nFocus on patterns, time management, and subject-specific advice.`\n\n  const response = await chat([{\n    role: \"user\",\n    content: prompt\n  }], { temperature: 0.2, maxTokens: 2048 })\n\n  try {\n    // Clean the response by removing markdown code blocks and backticks\n    let cleanResponse = response.trim()\n    \n    // Remove markdown code block markers\n    cleanResponse = cleanResponse.replace(/^```(?:json)?\\s*/i, '').replace(/\\s*```$/, '')\n    \n    // Remove any remaining backticks\n    cleanResponse = cleanResponse.replace(/`/g, '')\n    \n    // Try to find JSON object if response contains extra text\n    const jsonMatch = cleanResponse.match(/\\{[\\s\\S]*\\}/)\n    if (jsonMatch) {\n      cleanResponse = jsonMatch[0]\n    }\n    \n    return JSON.parse(cleanResponse)\n  } catch (e) {\n    console.error(\"Failed to parse analysis JSON:\", e)\n    console.error(\"Raw response:\", response)\n    return {\n      strengths: [],\n      weaknesses: [],\n      recommendations: [],\n      predictedImprovement: 0,\n      optimalStudyTimes: []\n    }\n  }\n}\n\n// ==================== GENERATE PERSONALIZED CONTENT ====================\nexport async function generatePersonalizedContent(\n  userProfile: {\n    learningStyle: \"visual\" | \"auditory\" | \"kinesthetic\" | \"reading\"\n    goals: string[]\n    currentLevel: string\n    preferredSubjects: string[]\n  },\n  topic: string,\n  contentType: \"summary\" | \"examples\" | \"practice\" | \"explanation\"\n): Promise<string> {\n  const stylePrompts = {\n    visual: \"Include diagrams, charts, and visual analogies\",\n    auditory: \"Use storytelling and audio-friendly explanations\",\n    kinesthetic: \"Include hands-on examples and practical applications\",\n    reading: \"Provide detailed written explanations with references\"\n  }\n\n  const typePrompts = {\n    summary: \"Create a concise summary\",\n    examples: \"Provide practical examples and case studies\",\n    practice: \"Generate practice problems and exercises\",\n    explanation: \"Explain the concept in depth\"\n  }\n\n  const prompt = `Create ${contentType} content for \"${topic}\" tailored to:\n- Learning style: ${userProfile.learningStyle} (${stylePrompts[userProfile.learningStyle]})\n- Goals: ${userProfile.goals.join(\", \")}\n- Current level: ${userProfile.currentLevel}\n- Preferred subjects: ${userProfile.preferredSubjects.join(\", \")}\n\n${typePrompts[contentType]}\n\nMake it engaging, personalized, and effective for this learner.`\n\n  return chat([{\n    role: \"user\",\n    content: prompt\n  }], { temperature: 0.6, maxTokens: 3072 })\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1496, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/firestore.ts"],"sourcesContent":["\"use client\"\n\nimport { \n  collection, \n  doc, \n  addDoc, \n  updateDoc, \n  deleteDoc, \n  getDocs, \n  getDoc, \n  query, \n  where, \n  orderBy, \n  onSnapshot,\n  serverTimestamp,\n  Timestamp,\n  setDoc\n} from \"firebase/firestore\"\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\"\nimport { db, storage } from \"./firebase\"\n\n// Types\nexport interface MaterialFolder {\n  id: string\n  name: string\n  color: string\n  userId: string\n  createdAt: Date\n}\n\nexport interface Material {\n  id: string\n  title: string\n  type: \"pdf\" | \"image\" | \"text\" | \"other\"\n  subject: string\n  fileUrl?: string\n  content?: string\n  folderId?: string\n  userId: string\n  createdAt: Date\n}\n\nexport interface Flashcard {\n  id: string\n  front: string\n  back: string\n  difficulty: \"easy\" | \"medium\" | \"hard\"\n  deckId: string\n  userId: string\n  createdAt: Date\n  lastReviewed?: Date\n  nextReview?: Date\n  reviewCount?: number\n  easeFactor?: number\n}\n\nexport interface FlashcardDeck {\n  id: string\n  name: string\n  subject: string\n  cardCount: number\n  userId: string\n  createdAt: Date\n}\n\nexport interface StudyTask {\n  id: string\n  planId: string\n  day: number\n  title: string\n  completed: boolean\n  hours: number\n  dueDate: Date\n  userId: string\n  priority: \"low\" | \"medium\" | \"high\"\n  status: \"pending\" | \"in-progress\" | \"completed\"\n}\n\nexport interface StudyPlan {\n  id: string\n  name: string\n  subject: string\n  examDate: Date\n  difficulty: \"easy\" | \"medium\" | \"hard\"\n  hoursPerDay: number\n  userId: string\n  createdAt: Date\n  completedTasks: number\n  totalTasks: number\n}\n\nexport interface GroupMember {\n  userId: string\n  displayName: string\n  email: string\n  role: \"admin\" | \"member\"\n  joinedAt: Date\n  avatarUrl?: string\n}\n\nexport interface StudyGroup {\n  id: string\n  name: string\n  subject: string\n  description: string\n  members: GroupMember[]\n  memberCount: number\n  createdBy: string\n  createdAt: Date\n  maxMembers?: number\n  isPrivate?: boolean\n}\n\nexport interface GroupMessage {\n  id: string\n  groupId: string\n  content: string\n  userId: string\n  userName: string\n  createdAt: Date\n}\n\nexport interface BookmarkedJob {\n  id: string\n  jobId: string\n  title: string\n  company: string\n  location: string\n  deadline: string\n  type: string\n  url: string\n  userId: string\n  createdAt: Date\n}\n\n// Assistant Conversation\nexport interface ConversationMessage {\n  role: \"user\" | \"assistant\"\n  content: string\n  timestamp: Date\n}\n\nexport interface Conversation {\n  id: string\n  userId: string\n  title: string\n  messages: ConversationMessage[]\n  context?: {\n    materialIds?: string[]\n    deckIds?: string[]\n    planIds?: string[]\n  }\n  createdAt: Date\n  updatedAt: Date\n}\n\n// Assistant Memory (for \"remember that...\" commands)\nexport interface Memory {\n  id: string\n  userId: string\n  content: string\n  category: \"note\" | \"reminder\" | \"fact\" | \"preference\"\n  relatedEntities?: string[]\n  createdAt: Date\n}\n\n// ==================== ENHANCED TASK SYSTEM ====================\nexport interface Task {\n  id: string\n  userId: string\n  title: string\n  description?: string\n  priority: \"low\" | \"medium\" | \"high\" | \"urgent\"\n  status: \"todo\" | \"in-progress\" | \"done\" | \"blocked\"\n  tags: string[] // e.g., [\"DSA\", \"project\", \"CP\", \"gym\"]\n  course?: string\n  topic?: string\n  type?: \"Assignment\" | \"Revision\" | \"Practice\" | \"Reading\" | \"Project\" | \"Exam Prep\" | \"Other\"\n  difficulty?: \"Easy\" | \"Medium\" | \"Hard\"\n  estimatedMinutes: number\n  actualMinutes?: number\n  dueDate?: Date\n  scheduledDate?: Date\n  scheduledStartTime?: string // \"14:00\"\n  scheduledEndTime?: string // \"16:00\"\n  subtasks: Subtask[]\n  links?: TaskLink[]\n  completedAt?: Date\n  createdAt: Date\n  updatedAt: Date\n}\n\nexport interface Subtask {\n  id: string\n  title: string\n  completed: boolean\n}\n\nexport interface TaskLink {\n  type: \"github\" | \"leetcode\" | \"codeforces\" | \"document\" | \"other\"\n  url: string\n  label?: string\n}\n\n// ==================== CALENDAR & EVENTS ====================\nexport interface CalendarEvent {\n  id: string\n  userId: string\n  title: string\n  type: \"class\" | \"lab\" | \"exam\" | \"assignment\" | \"meeting\" | \"focus\" | \"break\" | \"other\" | \"study-session\" | \"contest\"\n  course?: string\n  description?: string\n  location?: string\n  startTime: Date\n  endTime: Date\n  isAllDay: boolean\n  isRecurring: boolean\n  recurrence?: {\n    frequency: \"daily\" | \"weekly\" | \"biweekly\" | \"monthly\"\n    daysOfWeek?: number[] // 0-6, Sunday-Saturday\n    endDate?: Date\n    exceptions?: Date[] // Dates to skip\n  }\n  color?: string\n  reminders?: number[] // Minutes before event\n  meetingLink?: string\n  isOnline?: boolean\n  createdAt: Date\n}\n\n// ==================== TIME BLOCKS & POMODORO ====================\nexport interface TimeBlock {\n  id: string\n  userId: string\n  taskId?: string\n  title: string\n  type: \"deep-work\" | \"shallow-work\" | \"break\" | \"meeting\" | \"personal\"\n  startTime: Date\n  endTime: Date\n  completed: boolean\n  actualDuration?: number // minutes\n  notes?: string\n  createdAt: Date\n}\n\nexport interface PomodoroSession {\n  id: string\n  userId: string\n  taskId?: string\n  course?: string\n  startTime: Date\n  endTime?: Date\n  plannedDuration: number // minutes\n  actualDuration?: number\n  type: \"work\" | \"short-break\" | \"long-break\"\n  completed: boolean\n  interrupted: boolean\n  productivityRating?: number // 1-5\n  notes?: string\n}\n\nexport interface PomodoroSettings {\n  userId: string\n  workDuration: number // default 25\n  shortBreakDuration: number // default 5\n  longBreakDuration: number // default 15\n  sessionsBeforeLongBreak: number // default 4\n  autoStartBreaks: boolean\n  autoStartWork: boolean\n  soundEnabled: boolean\n  notificationsEnabled: boolean\n}\n\n// ==================== ANALYTICS & TRACKING ====================\nexport interface StudySession {\n  id: string\n  userId: string\n  taskId?: string\n  course?: string\n  tags: string[]\n  startTime: Date\n  endTime: Date\n  duration: number // minutes\n  productivityRating?: number // 1-5\n  difficultyRating?: number // 1-5\n  notes?: string\n  pomodoroCount?: number\n}\n\nexport interface DailyStats {\n  id: string\n  userId: string\n  date: Date\n  totalStudyMinutes: number\n  taskCompleted: number\n  pomodoroCompleted: number\n  coursesStudied: string[]\n  productivityAvg?: number\n  streakDay: number\n}\n\nexport interface CourseGrade {\n  id: string\n  userId: string\n  courseName: string\n  courseCode?: string\n  credits?: number\n  color: string\n  icon?: string\n  grades: GradeEntry[]\n  currentGrade?: number // Calculated percentage\n  targetGrade?: number\n}\n\nexport interface GradeEntry {\n  id: string\n  name: string // \"Quiz 1\", \"Midterm\", \"Assignment 3\"\n  type: \"quiz\" | \"test\" | \"exam\" | \"assignment\" | \"project\" | \"participation\"\n  score: number\n  maxScore: number\n  weight: number // percentage weight in final grade\n  date: Date\n}\n\n// ==================== HABITS ====================\nexport interface Habit {\n  id: string\n  userId: string\n  name: string\n  description?: string\n  icon?: string\n  color: string\n  frequency: \"daily\" | \"weekly\" | \"custom\"\n  targetDays?: number[] // For weekly: which days (0-6)\n  targetCount?: number // Times per period\n  reminderTime?: string // \"08:00\"\n  currentStreak: number\n  longestStreak: number\n  completions: HabitCompletion[]\n  createdAt: Date\n  isArchived: boolean\n}\n\nexport interface HabitCompletion {\n  date: string // \"2025-12-23\"\n  completed: boolean\n  count?: number // For habits with multiple completions per day\n  notes?: string\n}\n\n// ==================== COURSES ====================\nexport interface Course {\n  id: string\n  userId: string\n  name: string\n  code?: string\n  professor?: string\n  color: string\n  icon?: string\n  credits?: number\n  schedule?: CourseSchedule[]\n  syllabus?: string[]\n  examDate?: Date\n  notes?: string\n}\n\nexport interface CourseSchedule {\n  dayOfWeek: number // 0-6\n  startTime: string // \"09:00\"\n  endTime: string // \"10:30\"\n  location?: string\n  type: \"lecture\" | \"lab\" | \"tutorial\" | \"office-hours\"\n}\n\n// Material Folder Functions\nexport async function getMaterialFolders(userId: string): Promise<MaterialFolder[]> {\n  const snapshot = await getDocs(collection(db, \"materialFolders\"))\n  const folders = snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        createdAt: data.createdAt?.toDate() || new Date()\n      } as MaterialFolder\n    })\n    .filter(f => f.userId === userId)\n  return folders.sort((a, b) => a.name.localeCompare(b.name))\n}\n\nexport async function createMaterialFolder(folder: Omit<MaterialFolder, \"id\" | \"createdAt\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"materialFolders\"), {\n    ...folder,\n    createdAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\nexport async function deleteMaterialFolder(folderId: string): Promise<void> {\n  // Delete the folder\n  await deleteDoc(doc(db, \"materialFolders\", folderId))\n  // Move materials in this folder to root (remove folderId)\n  const snapshot = await getDocs(collection(db, \"materials\"))\n  const folderMaterials = snapshot.docs.filter(d => d.data().folderId === folderId)\n  for (const docSnap of folderMaterials) {\n    await updateDoc(docSnap.ref, { folderId: null })\n  }\n}\n\nexport async function updateMaterialFolder(materialId: string, folderId: string | null): Promise<void> {\n  await updateDoc(doc(db, \"materials\", materialId), { folderId })\n}\n\n// Materials Functions\nexport async function getMaterials(userId: string, folderId?: string | null): Promise<Material[]> {\n  // Fetch all and filter client-side to avoid index requirements\n  const snapshot = await getDocs(collection(db, \"materials\"))\n  let materials = snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        createdAt: data.createdAt?.toDate() || new Date()\n      } as Material\n    })\n    .filter(m => m.userId === userId)\n  \n  // Filter by folder if specified\n  if (folderId !== undefined) {\n    materials = materials.filter(m => (m.folderId || null) === folderId)\n  }\n  \n  return materials.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())\n}\n\nexport async function addMaterial(material: Omit<Material, \"id\" | \"createdAt\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"materials\"), {\n    ...material,\n    createdAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\nexport async function uploadFile(file: File, userId: string): Promise<string> {\n  const fileRef = ref(storage, `materials/${userId}/${Date.now()}_${file.name}`)\n  await uploadBytes(fileRef, file)\n  return getDownloadURL(fileRef)\n}\n\nexport async function deleteMaterial(materialId: string): Promise<void> {\n  await deleteDoc(doc(db, \"materials\", materialId))\n}\n\n// Flashcard Functions\nexport async function getFlashcardDecks(userId: string): Promise<FlashcardDeck[]> {\n  // Fetch all and filter client-side to avoid index requirements\n  const snapshot = await getDocs(collection(db, \"flashcardDecks\"))\n  const decks = snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        createdAt: data.createdAt?.toDate() || new Date()\n      } as FlashcardDeck\n    })\n    .filter(d => d.userId === userId)\n  return decks.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())\n}\n\nexport async function createFlashcardDeck(deck: Omit<FlashcardDeck, \"id\" | \"createdAt\" | \"cardCount\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"flashcardDecks\"), {\n    ...deck,\n    cardCount: 0,\n    createdAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\nexport async function getFlashcards(deckId: string): Promise<Flashcard[]> {\n  // Fetch all and filter client-side to avoid index requirements\n  const snapshot = await getDocs(collection(db, \"flashcards\"))\n  return snapshot.docs\n    .map(docSnap => ({ id: docSnap.id, ...docSnap.data() } as Flashcard))\n    .filter(c => c.deckId === deckId)\n}\n\nexport async function addFlashcard(card: Omit<Flashcard, \"id\" | \"createdAt\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"flashcards\"), {\n    ...card,\n    createdAt: new Date()\n  })\n  // Update deck card count\n  const deckRef = doc(db, \"flashcardDecks\", card.deckId)\n  const deckSnap = await getDoc(deckRef)\n  if (deckSnap.exists()) {\n    await updateDoc(deckRef, { cardCount: (deckSnap.data().cardCount || 0) + 1 })\n  }\n  return docRef.id\n}\n\n// Study Plans Functions\nexport async function getStudyPlans(userId: string): Promise<StudyPlan[]> {\n  const snapshot = await getDocs(collection(db, \"studyPlans\"))\n  const plans = snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        examDate: data.examDate?.toDate() || new Date(),\n        createdAt: data.createdAt?.toDate() || new Date()\n      } as StudyPlan\n    })\n    .filter(p => p.userId === userId)\n  return plans.sort((a, b) => a.examDate.getTime() - b.examDate.getTime())\n}\n\nexport async function createStudyPlan(plan: Omit<StudyPlan, \"id\" | \"createdAt\" | \"completedTasks\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"studyPlans\"), {\n    ...plan,\n    completedTasks: 0,\n    examDate: Timestamp.fromDate(plan.examDate),\n    createdAt: serverTimestamp()\n  })\n  \n  // After tasks are created, update the totalTasks count\n  return docRef.id\n}\n\nexport async function deleteStudyPlan(planId: string): Promise<void> {\n  // Delete the plan\n  await deleteDoc(doc(db, \"studyPlans\", planId))\n  // Delete all tasks associated with this plan\n  const snapshot = await getDocs(collection(db, \"studyTasks\"))\n  const planTasks = snapshot.docs.filter(d => d.data().planId === planId)\n  for (const docSnap of planTasks) {\n    await deleteDoc(docSnap.ref)\n  }\n}\n\nexport async function updatePlanProgress(planId: string, completedTasks: number): Promise<void> {\n  await updateDoc(doc(db, \"studyPlans\", planId), { completedTasks })\n}\n\nexport async function updatePlanTotalTasks(planId: string, totalTasks: number): Promise<void> {\n  await updateDoc(doc(db, \"studyPlans\", planId), { totalTasks })\n}\n\n// Study Tasks Functions\nexport async function getStudyTasks(userId: string, planId?: string): Promise<StudyTask[]> {\n  const snapshot = await getDocs(collection(db, \"studyTasks\"))\n  const tasks = snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        dueDate: data.dueDate?.toDate() || new Date(),\n        priority: data.priority || \"medium\",\n        status: data.status || \"pending\"\n      } as StudyTask\n    })\n    .filter(t => t.userId === userId && (!planId || t.planId === planId))\n  return tasks.sort((a, b) => a.day - b.day)\n}\n\nexport async function createStudyTask(task: Omit<StudyTask, \"id\" | \"completed\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"studyTasks\"), {\n    ...task,\n    completed: false,\n    dueDate: Timestamp.fromDate(task.dueDate)\n  })\n  return docRef.id\n}\n\nexport async function toggleTaskComplete(taskId: string, completed: boolean, planId?: string): Promise<void> {\n  await updateDoc(doc(db, \"studyTasks\", taskId), { completed })\n  \n  // Update plan progress if planId provided\n  if (planId) {\n    const snapshot = await getDocs(collection(db, \"studyTasks\"))\n    const planTasks = snapshot.docs.filter(d => d.data().planId === planId)\n    const completedCount = planTasks.filter(d => d.data().completed || (d.id === taskId && completed)).length\n    await updatePlanProgress(planId, completedCount)\n  }\n}\n\nexport async function deleteStudyTask(taskId: string): Promise<void> {\n  await deleteDoc(doc(db, \"studyTasks\", taskId))\n}\n\nexport async function clearPlanTasks(planId: string): Promise<void> {\n  const snapshot = await getDocs(collection(db, \"studyTasks\"))\n  const planTasks = snapshot.docs.filter(d => d.data().planId === planId)\n  for (const docSnap of planTasks) {\n    await deleteDoc(docSnap.ref)\n  }\n}\n\n// Study Groups Functions\nexport async function getStudyGroups(userId?: string): Promise<StudyGroup[]> {\n  const snapshot = await getDocs(collection(db, \"studyGroups\"))\n  let groups = snapshot.docs.map(doc => ({\n    id: doc.id,\n    ...doc.data(),\n    createdAt: doc.data().createdAt?.toDate() || new Date()\n  })) as StudyGroup[]\n\n  // Filter groups where user is a member if userId is provided\n  if (userId) {\n    groups = groups.filter(group =>\n      group.members.some((member: GroupMember) => member.userId === userId)\n    )\n  }\n\n  // Sort client-side to avoid index requirement\n  return groups.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())\n}\n\nexport async function getStudyGroup(groupId: string): Promise<StudyGroup | null> {\n  const docSnap = await getDoc(doc(db, \"studyGroups\", groupId))\n  if (!docSnap.exists()) return null\n  return {\n    id: docSnap.id,\n    ...docSnap.data(),\n    createdAt: docSnap.data().createdAt?.toDate() || new Date()\n  } as StudyGroup\n}\n\nexport async function createStudyGroup(group: Omit<StudyGroup, \"id\" | \"createdAt\" | \"memberCount\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"studyGroups\"), {\n    ...group,\n    memberCount: group.members.length,\n    createdAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\nexport async function joinGroup(groupId: string, member: GroupMember): Promise<void> {\n  const groupRef = doc(db, \"studyGroups\", groupId)\n  const groupSnap = await getDoc(groupRef)\n  if (groupSnap.exists()) {\n    const groupData = groupSnap.data()\n    const members = groupData.members || []\n\n    // Check if group is full\n    if (members.length >= (groupData.maxMembers || 10)) {\n      throw new Error(\"Group is full\")\n    }\n\n    if (!members.some((m: GroupMember) => m.userId === member.userId)) {\n      await updateDoc(groupRef, {\n        members: [...members, member],\n        memberCount: members.length + 1\n      })\n    }\n  }\n}\n\nexport async function leaveGroup(groupId: string, userId: string): Promise<void> {\n  const groupRef = doc(db, \"studyGroups\", groupId)\n  const groupSnap = await getDoc(groupRef)\n  if (groupSnap.exists()) {\n    const members = groupSnap.data().members || []\n    const newMembers = members.filter((m: string) => m !== userId)\n    await updateDoc(groupRef, {\n      members: newMembers,\n      memberCount: newMembers.length\n    })\n  }\n}\n\n// Group Messages Functions\nexport function subscribeToGroupMessages(\n  groupId: string, \n  callback: (messages: GroupMessage[]) => void\n): () => void {\n  // Subscribe to all messages and filter client-side to avoid index requirements\n  return onSnapshot(collection(db, \"groupMessages\"), (snapshot) => {\n    const messages = snapshot.docs\n      .map(docSnap => {\n        const data = docSnap.data()\n        return {\n          id: docSnap.id,\n          ...data,\n          createdAt: data.createdAt?.toDate() || new Date()\n        } as GroupMessage\n      })\n      .filter(m => m.groupId === groupId)\n    callback(messages.sort((a, b) => a.createdAt.getTime() - b.createdAt.getTime()))\n  })\n}\n\nexport async function sendGroupMessage(message: Omit<GroupMessage, \"id\" | \"createdAt\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"groupMessages\"), {\n    ...message,\n    createdAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\n// Bookmarked Jobs Functions\nexport async function getBookmarkedJobs(userId: string): Promise<BookmarkedJob[]> {\n  // Fetch all and filter client-side to avoid index requirements\n  const snapshot = await getDocs(collection(db, \"bookmarkedJobs\"))\n  return snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        createdAt: data.createdAt?.toDate() || new Date()\n      } as BookmarkedJob\n    })\n    .filter(b => b.userId === userId)\n}\n\nexport async function toggleJobBookmark(job: Omit<BookmarkedJob, \"id\" | \"createdAt\">): Promise<boolean> {\n  // Fetch all and filter client-side to avoid index requirements\n  const snapshot = await getDocs(collection(db, \"bookmarkedJobs\"))\n  const existing = snapshot.docs.find(d => \n    d.data().userId === job.userId && d.data().jobId === job.jobId\n  )\n  \n  if (!existing) {\n    await addDoc(collection(db, \"bookmarkedJobs\"), {\n      ...job,\n      createdAt: serverTimestamp()\n    })\n    return true // Now bookmarked\n  } else {\n    await deleteDoc(existing.ref)\n    return false // Unbookmarked\n  }\n}\n\n// User Profile\nexport async function getUserProfile(userId: string) {\n  const docSnap = await getDoc(doc(db, \"users\", userId))\n  return docSnap.exists() ? docSnap.data() : null\n}\n\nexport async function updateUserProfile(userId: string, data: Record<string, unknown>) {\n  await setDoc(doc(db, \"users\", userId), data, { merge: true })\n}\n\n// ==================== CONVERSATION FUNCTIONS ====================\nexport async function getConversations(userId: string): Promise<Conversation[]> {\n  const snapshot = await getDocs(collection(db, \"conversations\"))\n  return snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        messages: (data.messages || []).map((m: any) => ({\n          ...m,\n          timestamp: m.timestamp?.toDate() || new Date()\n        })),\n        createdAt: data.createdAt?.toDate() || new Date(),\n        updatedAt: data.updatedAt?.toDate() || new Date()\n      } as Conversation\n    })\n    .filter(c => c.userId === userId)\n    .sort((a, b) => b.updatedAt.getTime() - a.updatedAt.getTime())\n}\n\nexport async function createConversation(userId: string, title: string = \"New Conversation\"): Promise<string> {\n  const docRef = await addDoc(collection(db, \"conversations\"), {\n    userId,\n    title,\n    messages: [],\n    createdAt: serverTimestamp(),\n    updatedAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\nexport async function addMessageToConversation(\n  conversationId: string,\n  message: Omit<ConversationMessage, \"timestamp\">\n): Promise<void> {\n  const docRef = doc(db, \"conversations\", conversationId)\n  const docSnap = await getDoc(docRef)\n  \n  if (!docSnap.exists()) {\n    throw new Error(\"Conversation not found\")\n  }\n  \n  const data = docSnap.data()\n  const messages = data.messages || []\n  messages.push({\n    ...message,\n    timestamp: new Date()\n  })\n  \n  await updateDoc(docRef, {\n    messages,\n    updatedAt: serverTimestamp()\n  })\n}\n\nexport async function deleteConversation(conversationId: string): Promise<void> {\n  await deleteDoc(doc(db, \"conversations\", conversationId))\n}\n\nexport async function updateConversationTitle(conversationId: string, title: string): Promise<void> {\n  await updateDoc(doc(db, \"conversations\", conversationId), { title })\n}\n\n// ==================== MEMORY FUNCTIONS ====================\nexport async function getMemories(userId: string): Promise<Memory[]> {\n  const snapshot = await getDocs(collection(db, \"memories\"))\n  return snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        createdAt: data.createdAt?.toDate() || new Date()\n      } as Memory\n    })\n    .filter(m => m.userId === userId)\n    .sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime())\n}\n\nexport async function addMemory(memory: Omit<Memory, \"id\" | \"createdAt\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"memories\"), {\n    ...memory,\n    createdAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\nexport async function deleteMemory(memoryId: string): Promise<void> {\n  await deleteDoc(doc(db, \"memories\", memoryId))\n}\n\nexport async function searchMemories(userId: string, query: string): Promise<Memory[]> {\n  const memories = await getMemories(userId)\n  const lowerQuery = query.toLowerCase()\n  return memories.filter(m => \n    m.content.toLowerCase().includes(lowerQuery)\n  )\n}\n\n// ==================== TASK FUNCTIONS ====================\nexport async function getTasks(userId: string, filters?: {\n  status?: Task[\"status\"]\n  priority?: Task[\"priority\"]\n  course?: string\n  tag?: string\n  dateRange?: { start: Date; end: Date }\n}): Promise<Task[]> {\n  const snapshot = await getDocs(collection(db, \"tasks\"))\n  let tasks = snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        dueDate: data.dueDate?.toDate(),\n        scheduledDate: data.scheduledDate?.toDate(),\n        completedAt: data.completedAt?.toDate(),\n        createdAt: data.createdAt?.toDate() || new Date(),\n        updatedAt: data.updatedAt?.toDate() || new Date(),\n        subtasks: data.subtasks || [],\n        tags: data.tags || [],\n        links: data.links || []\n      } as Task\n    })\n    .filter(t => t.userId === userId)\n\n  if (filters?.status) tasks = tasks.filter(t => t.status === filters.status)\n  if (filters?.priority) tasks = tasks.filter(t => t.priority === filters.priority)\n  if (filters?.course) tasks = tasks.filter(t => t.course === filters.course)\n  if (filters?.tag) tasks = tasks.filter(t => t.tags.includes(filters.tag!))\n  if (filters?.dateRange) {\n    tasks = tasks.filter(t => \n      t.dueDate && t.dueDate >= filters.dateRange!.start && t.dueDate <= filters.dateRange!.end\n    )\n  }\n\n  return tasks.sort((a, b) => {\n    const priorityOrder = { urgent: 0, high: 1, medium: 2, low: 3 }\n    return priorityOrder[a.priority] - priorityOrder[b.priority]\n  })\n}\n\nexport async function createTask(task: Omit<Task, \"id\" | \"createdAt\" | \"updatedAt\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"tasks\"), {\n    ...task,\n    createdAt: serverTimestamp(),\n    updatedAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\nexport async function updateTask(taskId: string, updates: Partial<Task>): Promise<void> {\n  await updateDoc(doc(db, \"tasks\", taskId), {\n    ...updates,\n    updatedAt: serverTimestamp()\n  })\n}\n\nexport async function deleteTask(taskId: string): Promise<void> {\n  await deleteDoc(doc(db, \"tasks\", taskId))\n}\n\nexport async function toggleSubtask(taskId: string, subtaskId: string): Promise<void> {\n  const docRef = doc(db, \"tasks\", taskId)\n  const docSnap = await getDoc(docRef)\n  if (!docSnap.exists()) return\n\n  const task = docSnap.data()\n  const subtasks = task.subtasks || []\n  const updatedSubtasks = subtasks.map((st: Subtask) =>\n    st.id === subtaskId ? { ...st, completed: !st.completed } : st\n  )\n\n  await updateDoc(docRef, { subtasks: updatedSubtasks, updatedAt: serverTimestamp() })\n}\n\n// ==================== CALENDAR EVENT FUNCTIONS ====================\nexport async function getCalendarEvents(userId: string, dateRange?: { start: Date; end: Date }): Promise<CalendarEvent[]> {\n  const snapshot = await getDocs(collection(db, \"calendarEvents\"))\n  let events = snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        startTime: data.startTime?.toDate() || new Date(),\n        endTime: data.endTime?.toDate() || new Date(),\n        createdAt: data.createdAt?.toDate() || new Date(),\n        recurrence: data.recurrence ? {\n          ...data.recurrence,\n          endDate: data.recurrence.endDate?.toDate(),\n          exceptions: data.recurrence.exceptions?.map((e: any) => e.toDate()) || []\n        } : undefined\n      } as CalendarEvent\n    })\n    .filter(e => e.userId === userId)\n\n  if (dateRange) {\n    events = events.filter(e => \n      e.startTime >= dateRange.start && e.startTime <= dateRange.end\n    )\n  }\n\n  return events.sort((a, b) => a.startTime.getTime() - b.startTime.getTime())\n}\n\nexport async function createCalendarEvent(event: Omit<CalendarEvent, \"id\" | \"createdAt\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"calendarEvents\"), {\n    ...event,\n    createdAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\nexport async function updateCalendarEvent(eventId: string, updates: Partial<CalendarEvent>): Promise<void> {\n  await updateDoc(doc(db, \"calendarEvents\", eventId), updates)\n}\n\nexport async function deleteCalendarEvent(eventId: string): Promise<void> {\n  await deleteDoc(doc(db, \"calendarEvents\", eventId))\n}\n\n// ==================== POMODORO FUNCTIONS ====================\nexport async function getPomodoroSettings(userId: string): Promise<PomodoroSettings | null> {\n  const docSnap = await getDoc(doc(db, \"pomodoroSettings\", userId))\n  return docSnap.exists() ? docSnap.data() as PomodoroSettings : null\n}\n\nexport async function savePomodoroSettings(settings: PomodoroSettings): Promise<void> {\n  await setDoc(doc(db, \"pomodoroSettings\", settings.userId), settings)\n}\n\nexport async function logPomodoroSession(session: Omit<PomodoroSession, \"id\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"pomodoroSessions\"), session)\n  return docRef.id\n}\n\nexport async function getPomodoroSessions(userId: string, dateRange?: { start: Date; end: Date }): Promise<PomodoroSession[]> {\n  const snapshot = await getDocs(collection(db, \"pomodoroSessions\"))\n  let sessions = snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        startTime: data.startTime?.toDate() || new Date(),\n        endTime: data.endTime?.toDate()\n      } as PomodoroSession\n    })\n    .filter(s => s.userId === userId)\n\n  if (dateRange) {\n    sessions = sessions.filter(s => \n      s.startTime >= dateRange.start && s.startTime <= dateRange.end\n    )\n  }\n\n  return sessions.sort((a, b) => b.startTime.getTime() - a.startTime.getTime())\n}\n\n// ==================== STUDY SESSION & ANALYTICS FUNCTIONS ====================\nexport async function logStudySession(session: Omit<StudySession, \"id\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"studySessions\"), session)\n  \n  // Update daily stats\n  const dateStr = session.startTime.toISOString().split('T')[0]\n  await updateDailyStats(session.userId, dateStr, session.duration, session.course)\n  \n  return docRef.id\n}\n\nexport async function getStudySessions(userId: string, dateRange?: { start: Date; end: Date }): Promise<StudySession[]> {\n  const snapshot = await getDocs(collection(db, \"studySessions\"))\n  let sessions = snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        startTime: data.startTime?.toDate() || new Date(),\n        endTime: data.endTime?.toDate() || new Date(),\n        tags: data.tags || []\n      } as StudySession\n    })\n    .filter(s => s.userId === userId)\n\n  if (dateRange) {\n    sessions = sessions.filter(s => \n      s.startTime >= dateRange.start && s.startTime <= dateRange.end\n    )\n  }\n\n  return sessions.sort((a, b) => b.startTime.getTime() - a.startTime.getTime())\n}\n\nexport async function getDailyStats(userId: string, date: string): Promise<DailyStats | null> {\n  const docSnap = await getDoc(doc(db, \"dailyStats\", `${userId}_${date}`))\n  if (!docSnap.exists()) return null\n  const data = docSnap.data()\n  return {\n    id: docSnap.id,\n    ...data,\n    date: data.date?.toDate() || new Date(),\n    coursesStudied: data.coursesStudied || []\n  } as DailyStats\n}\n\nexport async function getWeeklyStats(userId: string): Promise<DailyStats[]> {\n  const today = new Date()\n  const weekAgo = new Date(today)\n  weekAgo.setDate(weekAgo.getDate() - 7)\n  \n  const stats: DailyStats[] = []\n  for (let d = new Date(weekAgo); d <= today; d.setDate(d.getDate() + 1)) {\n    const dateStr = d.toISOString().split('T')[0]\n    const dayStat = await getDailyStats(userId, dateStr)\n    if (dayStat) stats.push(dayStat)\n  }\n  return stats\n}\n\nasync function updateDailyStats(userId: string, dateStr: string, minutes: number, course?: string): Promise<void> {\n  const docRef = doc(db, \"dailyStats\", `${userId}_${dateStr}`)\n  const existing = await getDoc(docRef)\n  \n  if (existing.exists()) {\n    const data = existing.data()\n    const coursesStudied = data.coursesStudied || []\n    if (course && !coursesStudied.includes(course)) {\n      coursesStudied.push(course)\n    }\n    await updateDoc(docRef, {\n      totalStudyMinutes: (data.totalStudyMinutes || 0) + minutes,\n      coursesStudied\n    })\n  } else {\n    // Calculate streak\n    const yesterday = new Date(dateStr)\n    yesterday.setDate(yesterday.getDate() - 1)\n    const yesterdayStats = await getDailyStats(userId, yesterday.toISOString().split('T')[0])\n    const streakDay = yesterdayStats ? yesterdayStats.streakDay + 1 : 1\n    \n    await setDoc(docRef, {\n      userId,\n      date: new Date(dateStr),\n      totalStudyMinutes: minutes,\n      taskCompleted: 0,\n      pomodoroCompleted: 0,\n      coursesStudied: course ? [course] : [],\n      streakDay\n    })\n  }\n}\n\n// ==================== COURSE & GRADE FUNCTIONS ====================\nexport async function getCourses(userId: string): Promise<Course[]> {\n  const snapshot = await getDocs(collection(db, \"courses\"))\n  return snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        schedule: data.schedule || [],\n        examDate: data.examDate?.toDate()\n      } as Course\n    })\n    .filter(c => c.userId === userId)\n}\n\nexport async function createCourse(course: Omit<Course, \"id\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"courses\"), course)\n  return docRef.id\n}\n\nexport async function updateCourse(courseId: string, updates: Partial<Course>): Promise<void> {\n  await updateDoc(doc(db, \"courses\", courseId), updates)\n}\n\nexport async function deleteCourse(courseId: string): Promise<void> {\n  await deleteDoc(doc(db, \"courses\", courseId))\n}\n\nexport async function getCourseGrades(userId: string): Promise<CourseGrade[]> {\n  const snapshot = await getDocs(collection(db, \"courseGrades\"))\n  return snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        grades: (data.grades || []).map((g: any) => ({\n          ...g,\n          date: g.date?.toDate() || new Date()\n        }))\n      } as CourseGrade\n    })\n    .filter(g => g.userId === userId)\n}\n\nexport async function addGradeEntry(courseGradeId: string, entry: Omit<GradeEntry, \"id\">): Promise<void> {\n  const docRef = doc(db, \"courseGrades\", courseGradeId)\n  const docSnap = await getDoc(docRef)\n  if (!docSnap.exists()) return\n\n  const data = docSnap.data()\n  const grades = data.grades || []\n  grades.push({ ...entry, id: Date.now().toString() })\n\n  // Calculate current grade\n  const totalWeight = grades.reduce((sum: number, g: GradeEntry) => sum + g.weight, 0)\n  const weightedScore = grades.reduce((sum: number, g: GradeEntry) => \n    sum + (g.score / g.maxScore * 100) * (g.weight / 100), 0\n  )\n  const currentGrade = totalWeight > 0 ? (weightedScore / totalWeight) * 100 : 0\n\n  await updateDoc(docRef, { grades, currentGrade })\n}\n\n// ==================== HABIT FUNCTIONS ====================\nexport async function getHabits(userId: string): Promise<Habit[]> {\n  const snapshot = await getDocs(collection(db, \"habits\"))\n  return snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        createdAt: data.createdAt?.toDate() || new Date(),\n        completions: data.completions || []\n      } as Habit\n    })\n    .filter(h => h.userId === userId && !h.isArchived)\n}\n\nexport async function createHabit(habit: Omit<Habit, \"id\" | \"createdAt\" | \"currentStreak\" | \"longestStreak\" | \"completions\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"habits\"), {\n    ...habit,\n    currentStreak: 0,\n    longestStreak: 0,\n    completions: [],\n    createdAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\nexport async function toggleHabitCompletion(habitId: string, date: string): Promise<void> {\n  const docRef = doc(db, \"habits\", habitId)\n  const docSnap = await getDoc(docRef)\n  if (!docSnap.exists()) return\n\n  const habit = docSnap.data()\n  const completions = habit.completions || []\n  const existingIdx = completions.findIndex((c: HabitCompletion) => c.date === date)\n\n  if (existingIdx >= 0) {\n    completions[existingIdx].completed = !completions[existingIdx].completed\n  } else {\n    completions.push({ date, completed: true })\n  }\n\n  // Calculate streak\n  let streak = 0\n  const today = new Date()\n  for (let i = 0; i < 365; i++) {\n    const checkDate = new Date(today)\n    checkDate.setDate(checkDate.getDate() - i)\n    const dateStr = checkDate.toISOString().split('T')[0]\n    const completion = completions.find((c: HabitCompletion) => c.date === dateStr)\n    if (completion?.completed) {\n      streak++\n    } else if (i > 0) { // Allow today to be incomplete\n      break\n    }\n  }\n\n  const longestStreak = Math.max(habit.longestStreak || 0, streak)\n\n  await updateDoc(docRef, { completions, currentStreak: streak, longestStreak })\n}\n\nexport async function deleteHabit(habitId: string): Promise<void> {\n  await updateDoc(doc(db, \"habits\", habitId), { isArchived: true })\n}\n\n// ==================== TIME BLOCK FUNCTIONS ====================\nexport async function getTimeBlocks(userId: string, date: Date): Promise<TimeBlock[]> {\n  const startOfDay = new Date(date)\n  startOfDay.setHours(0, 0, 0, 0)\n  const endOfDay = new Date(date)\n  endOfDay.setHours(23, 59, 59, 999)\n\n  const snapshot = await getDocs(collection(db, \"timeBlocks\"))\n  return snapshot.docs\n    .map(docSnap => {\n      const data = docSnap.data()\n      return {\n        id: docSnap.id,\n        ...data,\n        startTime: data.startTime?.toDate() || new Date(),\n        endTime: data.endTime?.toDate() || new Date(),\n        createdAt: data.createdAt?.toDate() || new Date()\n      } as TimeBlock\n    })\n    .filter(tb => \n      tb.userId === userId && \n      tb.startTime >= startOfDay && \n      tb.startTime <= endOfDay\n    )\n    .sort((a, b) => a.startTime.getTime() - b.startTime.getTime())\n}\n\nexport async function createTimeBlock(block: Omit<TimeBlock, \"id\" | \"createdAt\">): Promise<string> {\n  const docRef = await addDoc(collection(db, \"timeBlocks\"), {\n    ...block,\n    createdAt: serverTimestamp()\n  })\n  return docRef.id\n}\n\nexport async function updateTimeBlock(blockId: string, updates: Partial<TimeBlock>): Promise<void> {\n  await updateDoc(doc(db, \"timeBlocks\", blockId), updates)\n}\n\nexport async function deleteTimeBlock(blockId: string): Promise<void> {\n  await deleteDoc(doc(db, \"timeBlocks\", blockId))\n}\n\n// ==================== FLASHCARDS ====================\nexport async function createFlashcards(\n  userId: string,\n  cards: Omit<Flashcard, \"id\" | \"userId\" | \"createdAt\">[],\n): Promise<Flashcard[]> {\n  const flashcardsRef = collection(db, \"flashcards\")\n  const createdCards: Flashcard[] = []\n\n  for (const cardData of cards) {\n    const docRef = doc(flashcardsRef)\n    const card: Flashcard = {\n      id: docRef.id,\n      userId,\n      ...cardData,\n      createdAt: new Date(),\n    }\n    await setDoc(docRef, card)\n    createdCards.push(card)\n  }\n\n  return createdCards\n}\n\n// ==================== USER DATA AGGREGATION ====================\nexport async function getUserData(userId: string): Promise<{\n  tasks: Task[]\n  courses: Course[]\n  habits: Habit[]\n  dailyStats: DailyStats | null\n  userStreak: number\n}> {\n  const [tasks, courses, habits] = await Promise.all([\n    getTasks(userId),\n    getCourses(userId),\n    getHabits(userId)\n  ])\n\n  // Get today's stats\n  const today = new Date().toISOString().split('T')[0]\n  const dailyStats = await getDailyStats(userId, today)\n\n  // Calculate user streak (simplified - could be more sophisticated)\n  let userStreak = 0\n  if (dailyStats) {\n    userStreak = dailyStats.streakDay\n  }\n\n  return {\n    tasks,\n    courses,\n    habits,\n    dailyStats,\n    userStreak\n  }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2453, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/assistant.ts"],"sourcesContent":["\"use client\"\n\nimport { chat, generateFlashcards, generateQuiz, summarizeContent, explainConcept, Message } from \"./ai-client\"\nimport { getMaterials } from \"./firestore\"\n\n// ==================== INTENT DETECTION ====================\nexport type Intent =\n  | \"create_flashcards\"\n  | \"quiz_me\"\n  | \"explain\"\n  | \"summarize\"\n  | \"navigate\"\n  | \"add_task\"\n  | \"remember\"\n  | \"search_materials\"\n  | \"general_question\"\n  | \"greeting\"\n  | \"help\"\n  | \"unknown\"\n\nexport interface ParsedCommand {\n  intent: Intent\n  entities: {\n    topic?: string\n    count?: number\n    difficulty?: \"easy\" | \"medium\" | \"hard\"\n    destination?: string\n    date?: string\n    content?: string\n    query?: string\n  }\n  originalText: string\n  confidence: number\n}\n\n// Intent patterns for quick local detection\nconst intentPatterns: { intent: Intent; patterns: RegExp[] }[] = [\n  {\n    intent: \"create_flashcards\",\n    patterns: [\n      /create\\s+(\\d+\\s+)?flashcards?\\s+(about|on|for)\\s+(.+)/i,\n      /make\\s+(\\d+\\s+)?flashcards?\\s+(about|on|for)\\s+(.+)/i,\n      /generate\\s+(\\d+\\s+)?flashcards?\\s+(about|on|for)\\s+(.+)/i,\n      /flashcards?\\s+(about|on|for)\\s+(.+)/i\n    ]\n  },\n  {\n    intent: \"quiz_me\",\n    patterns: [\n      /quiz\\s+me\\s+(on|about)\\s+(.+)/i,\n      /test\\s+me\\s+(on|about)\\s+(.+)/i,\n      /ask\\s+me\\s+questions?\\s+(about|on)\\s+(.+)/i\n    ]\n  },\n  {\n    intent: \"explain\",\n    patterns: [\n      /explain\\s+(.+)/i,\n      /what\\s+is\\s+(.+)/i,\n      /what\\s+are\\s+(.+)/i,\n      /tell\\s+me\\s+about\\s+(.+)/i,\n      /how\\s+does\\s+(.+)\\s+work/i\n    ]\n  },\n  {\n    intent: \"summarize\",\n    patterns: [\n      /summarize\\s+(.+)/i,\n      /summary\\s+of\\s+(.+)/i,\n      /give\\s+me\\s+a\\s+summary\\s+of\\s+(.+)/i\n    ]\n  },\n  {\n    intent: \"navigate\",\n    patterns: [\n      /go\\s+to\\s+(.+)/i,\n      /open\\s+(.+)/i,\n      /show\\s+me\\s+(.+)/i,\n      /take\\s+me\\s+to\\s+(.+)/i\n    ]\n  },\n  {\n    intent: \"add_task\",\n    patterns: [\n      /add\\s+task\\s+(.+)/i,\n      /create\\s+task\\s+(.+)/i,\n      /remind\\s+me\\s+to\\s+(.+)/i,\n      /schedule\\s+(.+)/i\n    ]\n  },\n  {\n    intent: \"remember\",\n    patterns: [\n      /remember\\s+that\\s+(.+)/i,\n      /note\\s+that\\s+(.+)/i,\n      /save\\s+this:\\s*(.+)/i,\n      /keep\\s+in\\s+mind\\s+(.+)/i\n    ]\n  },\n  {\n    intent: \"search_materials\",\n    patterns: [\n      /search\\s+(for\\s+)?(.+)\\s+in\\s+materials/i,\n      /find\\s+(.+)\\s+in\\s+my\\s+(notes|materials)/i,\n      /do\\s+i\\s+have\\s+(notes|materials)\\s+on\\s+(.+)/i,\n      /what\\s+do\\s+i\\s+have\\s+on\\s+(.+)/i\n    ]\n  },\n  {\n    intent: \"greeting\",\n    patterns: [\n      /^(hi|hello|hey|good\\s+(morning|afternoon|evening)|howdy|yo)[\\s!?.]*$/i\n    ]\n  },\n  {\n    intent: \"help\",\n    patterns: [\n      /^(help|what\\s+can\\s+you\\s+do|commands|how\\s+do\\s+i)[\\s?]*$/i,\n      /show\\s+(me\\s+)?help/i\n    ]\n  }\n]\n\n// Page name mappings for navigation\nconst pageAliases: { [key: string]: string } = {\n  \"flashcards\": \"/flashcards\",\n  \"flash cards\": \"/flashcards\",\n  \"cards\": \"/flashcards\",\n  \"materials\": \"/materials\",\n  \"notes\": \"/materials\",\n  \"documents\": \"/materials\",\n  \"planner\": \"/planner\",\n  \"schedule\": \"/planner\",\n  \"calendar\": \"/planner\",\n  \"tasks\": \"/planner\",\n  \"groups\": \"/groups\",\n  \"study groups\": \"/groups\",\n  \"support\": \"/support\",\n  \"help\": \"/support\",\n  \"home\": \"/\",\n  \"dashboard\": \"/\",\n  \"settings\": \"/settings\"\n}\n\n// Parse user input into a command\nexport function parseCommand(input: string): ParsedCommand {\n  const trimmedInput = input.trim()\n  \n  // Check each intent pattern\n  for (const { intent, patterns } of intentPatterns) {\n    for (const pattern of patterns) {\n      const match = trimmedInput.match(pattern)\n      if (match) {\n        const entities = extractEntities(intent, match, trimmedInput)\n        return {\n          intent,\n          entities,\n          originalText: trimmedInput,\n          confidence: 0.9\n        }\n      }\n    }\n  }\n\n  // Default to general question if no pattern matches\n  return {\n    intent: \"general_question\",\n    entities: { query: trimmedInput },\n    originalText: trimmedInput,\n    confidence: 0.5\n  }\n}\n\n// Extract entities from matched patterns\nfunction extractEntities(\n  intent: Intent,\n  match: RegExpMatchArray,\n  originalText: string\n): ParsedCommand[\"entities\"] {\n  const entities: ParsedCommand[\"entities\"] = {}\n\n  switch (intent) {\n    case \"create_flashcards\": {\n      // Extract count if present\n      const countMatch = originalText.match(/(\\d+)\\s+flashcards?/i)\n      if (countMatch) {\n        entities.count = parseInt(countMatch[1])\n      }\n      // Extract topic - last captured group\n      entities.topic = match[match.length - 1]?.trim()\n      // Extract difficulty\n      const diffMatch = originalText.match(/(easy|medium|hard)/i)\n      if (diffMatch) {\n        entities.difficulty = diffMatch[1].toLowerCase() as \"easy\" | \"medium\" | \"hard\"\n      }\n      break\n    }\n    case \"quiz_me\":\n      entities.topic = match[match.length - 1]?.trim()\n      break\n    case \"explain\":\n      entities.topic = match[1]?.trim()\n      break\n    case \"summarize\":\n      entities.content = match[1]?.trim()\n      break\n    case \"navigate\": {\n      const destination = match[1]?.toLowerCase().trim()\n      entities.destination = pageAliases[destination] || destination\n      break\n    }\n    case \"add_task\":\n      entities.content = match[1]?.trim()\n      break\n    case \"remember\":\n      entities.content = match[1]?.trim()\n      break\n    case \"search_materials\":\n      entities.query = match[match.length - 1]?.trim()\n      break\n  }\n\n  return entities\n}\n\n// ==================== COMMAND EXECUTION ====================\nexport interface AssistantContext {\n  userId?: string\n  currentPage?: string\n  conversationHistory?: Message[]\n  userMaterials?: Array<{ id: string; title: string; subject?: string }>\n  userDecks?: Array<{ id: string; name: string }>\n}\n\nexport interface CommandResult {\n  success: boolean\n  message: string\n  action?: {\n    type: \"navigate\" | \"show_flashcards\" | \"show_quiz\" | \"speak\" | \"add_memory\" | \"none\"\n    data?: any\n  }\n  followUp?: string\n}\n\nexport async function executeCommand(\n  command: ParsedCommand,\n  context: AssistantContext\n): Promise<CommandResult> {\n  switch (command.intent) {\n    case \"greeting\":\n      return {\n        success: true,\n        message: getGreeting(),\n        action: { type: \"speak\" }\n      }\n\n    case \"help\":\n      return {\n        success: true,\n        message: getHelpMessage(),\n        action: { type: \"none\" }\n      }\n\n    case \"navigate\":\n      if (command.entities.destination) {\n        return {\n          success: true,\n          message: `Taking you to ${command.entities.destination}...`,\n          action: {\n            type: \"navigate\",\n            data: { path: command.entities.destination }\n          }\n        }\n      }\n      return {\n        success: false,\n        message: \"I didn't catch where you want to go. Try saying 'go to flashcards' or 'open planner'.\"\n      }\n\n    case \"create_flashcards\":\n      if (command.entities.topic && context.userId) {\n        try {\n          const count = command.entities.count || 5\n          const difficulty = command.entities.difficulty || \"medium\"\n          \n          // Try to find relevant materials for the topic\n          const userMaterials = await getMaterials(context.userId)\n          const relevantMaterials = userMaterials.filter(m => \n            m.title?.toLowerCase().includes(command.entities.topic!.toLowerCase()) ||\n            m.subject?.toLowerCase().includes(command.entities.topic!.toLowerCase()) ||\n            m.content?.toLowerCase().includes(command.entities.topic!.toLowerCase())\n          )\n          \n          let content = \"\"\n          let topic = command.entities.topic\n          \n          if (relevantMaterials.length > 0) {\n            // Use the most relevant material's content\n            const bestMatch = relevantMaterials[0]\n            content = bestMatch.content || \"\"\n            topic = bestMatch.title || bestMatch.subject || command.entities.topic\n          }\n          \n          const flashcards = await generateFlashcards(\n            content,\n            topic,\n            count,\n            difficulty\n          )\n          return {\n            success: true,\n            message: relevantMaterials.length > 0 \n              ? `I've created ${flashcards.length} flashcards about \"${topic}\" using your study materials.`\n              : `I've created ${flashcards.length} flashcards about \"${command.entities.topic}\".`,\n            action: {\n              type: \"show_flashcards\",\n              data: { flashcards, topic: command.entities.topic }\n            }\n          }\n        } catch (error: any) {\n          return {\n            success: false,\n            message: `Sorry, I couldn't create flashcards: ${error.message}`\n          }\n        }\n      }\n      return {\n        success: false,\n        message: \"What topic would you like flashcards about?\"\n      }\n\n    case \"quiz_me\":\n      if (command.entities.topic && context.userId) {\n        try {\n          // Try to find relevant materials for the topic\n          const userMaterials = await getMaterials(context.userId)\n          const relevantMaterials = userMaterials.filter(m => \n            m.title?.toLowerCase().includes(command.entities.topic!.toLowerCase()) ||\n            m.subject?.toLowerCase().includes(command.entities.topic!.toLowerCase()) ||\n            m.content?.toLowerCase().includes(command.entities.topic!.toLowerCase())\n          )\n          \n          let content = \"\"\n          let topic = command.entities.topic\n          \n          if (relevantMaterials.length > 0) {\n            // Use the most relevant material's content\n            const bestMatch = relevantMaterials[0]\n            content = bestMatch.content || \"\"\n            topic = bestMatch.title || bestMatch.subject || command.entities.topic\n          }\n          \n          const quiz = await generateQuiz(content, topic, 5)\n          return {\n            success: true,\n            message: relevantMaterials.length > 0 \n              ? `Let's quiz you on \"${topic}\" using your study materials! I have ${quiz.length} questions ready.`\n              : `Let's quiz you on \"${command.entities.topic}\"! I have ${quiz.length} questions ready.`,\n            action: {\n              type: \"show_quiz\",\n              data: { quiz, topic: command.entities.topic }\n            }\n          }\n        } catch (error: any) {\n          return {\n            success: false,\n            message: `Sorry, I couldn't create a quiz: ${error.message}`\n          }\n        }\n      }\n      return {\n        success: false,\n        message: \"What topic would you like me to quiz you on?\"\n      }\n\n    case \"explain\":\n      if (command.entities.topic) {\n        try {\n          const explanation = await explainConcept(command.entities.topic)\n          return {\n            success: true,\n            message: explanation,\n            action: { type: \"speak\" }\n          }\n        } catch (error: any) {\n          return {\n            success: false,\n            message: `Sorry, I couldn't explain that: ${error.message}`\n          }\n        }\n      }\n      return {\n        success: false,\n        message: \"What would you like me to explain?\"\n      }\n\n    case \"summarize\":\n      if (command.entities.content) {\n        try {\n          const summary = await summarizeContent(command.entities.content)\n          return {\n            success: true,\n            message: summary,\n            action: { type: \"speak\" }\n          }\n        } catch (error: any) {\n          return {\n            success: false,\n            message: `Sorry, I couldn't summarize that: ${error.message}`\n          }\n        }\n      }\n      return {\n        success: false,\n        message: \"What would you like me to summarize?\"\n      }\n\n    case \"remember\":\n      if (command.entities.content) {\n        return {\n          success: true,\n          message: `Got it! I'll remember: \"${command.entities.content}\"`,\n          action: {\n            type: \"add_memory\",\n            data: { content: command.entities.content, category: \"note\" }\n          }\n        }\n      }\n      return {\n        success: false,\n        message: \"What would you like me to remember?\"\n      }\n\n    case \"search_materials\":\n      if (command.entities.query && context.userMaterials) {\n        const matches = context.userMaterials.filter(m =>\n          m.title.toLowerCase().includes(command.entities.query!.toLowerCase()) ||\n          m.subject?.toLowerCase().includes(command.entities.query!.toLowerCase())\n        )\n        if (matches.length > 0) {\n          return {\n            success: true,\n            message: `I found ${matches.length} material(s) related to \"${command.entities.query}\": ${matches.map(m => m.title).join(\", \")}`\n          }\n        }\n        return {\n          success: true,\n          message: `I didn't find any materials about \"${command.entities.query}\" in your library.`\n        }\n      }\n      return {\n        success: false,\n        message: \"What are you looking for in your materials?\"\n      }\n\n    case \"add_task\":\n      return {\n        success: true,\n        message: `I'll add \"${command.entities.content}\" to your planner. You can refine it there.`,\n        action: {\n          type: \"navigate\",\n          data: { path: \"/planner\", prefill: command.entities.content }\n        }\n      }\n\n    case \"general_question\":\n    default:\n      try {\n        const response = await chat([\n          { role: \"user\", content: command.originalText }\n        ], {\n          systemPrompt: `You are JARVIS (Just A Rather Very Intelligent System), an advanced AI assistant for students. \nSpeak in a polite, sophisticated manner like the AI assistant from Iron Man - helpful, slightly witty, and professional.\nBe concise and educational. Use phrases like \"Certainly, sir/madam\", \"Right away\", \"I've analyzed...\", \"May I suggest...\"\n${context.currentPage ? `User is currently viewing: ${context.currentPage}` : \"\"}\n${context.userMaterials?.length ? `User's study materials include: ${context.userMaterials.map(m => m.title).join(\", \")}` : \"\"}`\n        })\n        return {\n          success: true,\n          message: response,\n          action: { type: \"speak\" }\n        }\n      } catch (error: any) {\n        return {\n          success: false,\n          message: \"I apologize, but I'm experiencing a temporary disruption. Shall I try again?\"\n        }\n      }\n  }\n}\n\n// ==================== HELPERS ====================\nfunction getGreeting(): string {\n  const hour = new Date().getHours()\n  let timeGreeting = \"Good day\"\n  if (hour < 12) timeGreeting = \"Good morning\"\n  else if (hour < 17) timeGreeting = \"Good afternoon\"\n  else timeGreeting = \"Good evening\"\n  \n  const greetings = [\n    `${timeGreeting}. JARVIS at your service. How may I assist with your studies today?`,\n    `${timeGreeting}. All systems operational. What shall we work on?`,\n    `${timeGreeting}. I'm ready to help optimize your learning experience.`\n  ]\n  return greetings[Math.floor(Math.random() * greetings.length)]\n}\n\nfunction getHelpMessage(): string {\n  return `Certainly. Here are my capabilities:\n\n📚 **Flashcard Generation**: \"Create 10 flashcards about photosynthesis\"\n🧠 **Knowledge Testing**: \"Quiz me on World War 2\"\n💡 **Concept Explanation**: \"Explain quantum entanglement\"\n📝 **Content Summarization**: \"Summarize [paste content]\"\n📍 **App Navigation**: \"Go to planner\" or \"Open materials\"\n✅ **Task Management**: \"Add task: Study for math exam\"\n🔖 **Memory Storage**: \"Remember that the test is on Friday\"\n🔍 **Material Search**: \"What do I have on biology?\"\n\nSimply state your request naturally, and I shall endeavor to assist.`\n}\n\n// Quick action suggestions based on context\nexport function getSuggestedActions(context: AssistantContext): string[] {\n  const suggestions: string[] = []\n  \n  switch (context.currentPage) {\n    case \"flashcards\":\n      suggestions.push(\"Create flashcards about...\")\n      suggestions.push(\"Quiz me on my decks\")\n      break\n    case \"materials\":\n      suggestions.push(\"Summarize my notes\")\n      suggestions.push(\"Create flashcards from materials\")\n      break\n    case \"planner\":\n      suggestions.push(\"What's due this week?\")\n      suggestions.push(\"Add a study task\")\n      break\n    default:\n      suggestions.push(\"Create flashcards\")\n      suggestions.push(\"Quiz me\")\n      suggestions.push(\"Explain a concept\")\n  }\n  \n  return suggestions\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2934, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/jarvis/commandParser.ts"],"sourcesContent":["\"use client\"\n\nexport interface ParsedCommand {\n  intent: string\n  entities: Record<string, any>\n  confidence: number\n  originalCommand: string\n  requiresConfirmation?: boolean\n  multiStep?: boolean\n  steps?: CommandStep[]\n}\n\nexport interface CommandStep {\n  id: string\n  action: string\n  params: Record<string, any>\n  description: string\n  dependsOn?: string[]\n  requiresUserInput?: boolean\n}\n\nexport interface CommandContext {\n  userId: string\n  currentPage?: string\n  recentActions?: string[]\n  userPreferences?: Record<string, any>\n  availableData?: {\n    tasks?: any[]\n    courses?: any[]\n    habits?: any[]\n    materials?: any[]\n  }\n}\n\nexport class JarvisCommandParser {\n  private readonly COMMAND_PATTERNS = {\n    // Task Management\n    create_task: [\n      /(?:create|add|make|schedule)\\s+(?:a\\s+)?(?:new\\s+)?task(?:\\s+(?:called|named|titled)\\s+)?[\"']?([^\"']+)[\"']?/i,\n      /(?:i\\s+need\\s+to|i\\s+have\\s+to|i\\s+should)\\s+(.+?)(?:\\s+(?:by|before|due)\\s+(.+?))?(?:\\s+(?:for|in)\\s+(.+?))?$/i,\n      /(?:remind\\s+me\\s+to|don't\\s+forget\\s+to)\\s+(.+?)(?:\\s+(?:by|before|due)\\s+(.+?))?$/i\n    ],\n\n    complete_task: [\n      /(?:complete|finish|mark\\s+(?:as\\s+)?done|check\\s+off)\\s+(?:task\\s+)?[\"']?([^\"']+)[\"']?/i,\n      /(?:i\\s+(?:finished|completed|done\\s+with))\\s+(.+)$/i\n    ],\n\n    show_tasks: [\n      /(?:show|list|display|get)\\s+(?:me\\s+)?(?:my\\s+)?tasks?(?:\\s+(?:for|in)\\s+(.+?))?(?:\\s+(?:due|before)\\s+(.+?))?/i,\n      /(?:what\\s+(?:do\\s+i\\s+have\\s+to\\s+do|tasks\\s+do\\s+i\\s+have|is\\s+on\\s+my\\s+plate))\\??$/i,\n      /(?:what's\\s+(?:due|coming\\s+up|on\\s+my\\s+schedule))\\??$/i\n    ],\n\n    // Study Sessions\n    start_study: [\n      /(?:start|begin|launch)\\s+(?:a\\s+)?(?:study|focus|work)\\s+session(?:\\s+(?:for|on)\\s+(.+?))?(?:\\s+(?:of|lasting)\\s+(\\d+)\\s*(?:min|minutes?))?/i,\n      /(?:let's\\s+(?:study|focus|work))\\s*(?:\\s+(?:on|for)\\s+(.+?))?(?:\\s+(?:for|lasting)\\s+(\\d+)\\s*(?:min|minutes?))?/i,\n      /(?:time\\s+to\\s+(?:study|focus|work))\\s*(?:\\s+(?:on|for)\\s+(.+?))?(?:\\s+(?:for|lasting)\\s+(\\d+)\\s*(?:min|minutes?))?/i\n    ],\n\n    // Habit Tracking\n    complete_habit: [\n      /(?:i\\s+(?:did|completed?|finished))\\s+(.+?)(?:\\s+today)?$/i,\n      /(?:mark|check)\\s+(.+?)\\s+(?:as\\s+)?(?:done|completed?)(?:\\s+today)?$/i,\n      /(?:completed?|finished|did)\\s+(.+?)(?:\\s+habit)?(?:\\s+today)?$/i\n    ],\n\n    show_habits: [\n      /(?:show|list|display)\\s+(?:me\\s+)?(?:my\\s+)?habits?$/i,\n      /(?:what\\s+habits?\\s+(?:do\\s+i\\s+have|should\\s+i\\s+do))\\??$/i,\n      /(?:habit\\s+(?:tracker|status|progress))\\??$/i\n    ],\n\n    // Course Management\n    show_course: [\n      /(?:show|tell\\s+me\\s+about|what's\\s+up\\s+with)\\s+(?:my\\s+)?(.+?)\\s+course$/i,\n      /(?:course\\s+info|course\\s+details)\\s+(?:for\\s+)?(.+)$/i,\n      /(?:how's\\s+my\\s+)?(.+?)\\s+(?:course|class)\\s+(?:going|progress)\\??$/i\n    ],\n\n    // Materials\n    find_material: [\n      /(?:find|search|get|show)\\s+(?:me\\s+)?(?:materials?|notes?|resources?)(?:\\s+(?:for|about|on)\\s+(.+?))?(?:\\s+(?:in|from)\\s+(.+?))?/i,\n      /(?:where\\s+(?:are|is)\\s+my\\s+)?(.+?)\\s+(?:notes?|materials?|resources?)\\??$/i,\n      /(?:i\\s+need\\s+(?:materials?|notes?|resources?)\\s+(?:for|about|on)\\s+)?(.+)$/i\n    ],\n\n    // Scheduling\n    schedule_event: [\n      /(?:schedule|plan|set\\s+up)\\s+(?:a\\s+)?(?:meeting|event|appointment)(?:\\s+(?:called|named|titled)\\s+[\"']?([^\"']+)[\"']?)?(?:\\s+(?:for|on|at)\\s+(.+?))?(?:\\s+(?:with|and)\\s+(.+?))?/i,\n      /(?:add\\s+to\\s+(?:my\\s+)?calendar|put\\s+on\\s+(?:my\\s+)?schedule)\\s+(.+?)(?:\\s+(?:at|on)\\s+(.+?))?(?:\\s+(?:with|and)\\s+(.+?))?/i\n    ],\n\n    // Analytics\n    show_progress: [\n      /(?:show|tell\\s+me|get)\\s+(?:my\\s+)?(?:progress|stats|analytics|performance)(?:\\s+(?:for|on|in)\\s+(.+?))?(?:\\s+(?:this\\s+)?(?:week|month|year))?/i,\n      /(?:how\\s+(?:am\\s+i\\s+doing|is\\s+my\\s+progress|are\\s+my\\s+stats))\\??(?:\\s+(?:in|for|on)\\s+(.+?))?/i,\n      /(?:progress\\s+report|study\\s+stats|performance\\s+summary)(?:\\s+(?:for|on)\\s+(.+?))?\\??$/i\n    ],\n\n    // Multi-step Commands\n    study_plan: [\n      /(?:create|make|plan|generate)\\s+(?:a\\s+)?(?:study|revision|exam)\\s+plan(?:\\s+(?:for|exam)\\s+(.+?))?(?:\\s+(?:in|over)\\s+(\\d+)\\s*(?:days?|weeks?))?/i,\n      /(?:help\\s+me\\s+)?(?:plan|prepare)\\s+(?:for\\s+)?(?:my\\s+)?(.+?)\\s+(?:exam|test|quiz)(?:\\s+(?:in|over)\\s+(\\d+)\\s*(?:days?|weeks?))?/i\n    ],\n\n    productivity_session: [\n      /(?:start|begin|launch)\\s+(?:a\\s+)?(?:productivity|deep\\s+work|focus)\\s+session(?:\\s+(?:for|lasting)\\s+(\\d+)\\s*(?:min|minutes?|hours?))?/i,\n      /(?:let's\\s+(?:get|be)\\s+productive|time\\s+for\\s+deep\\s+work|focus\\s+mode|do\\s+not\\s+disturb)$/i\n    ]\n  }\n\n  private readonly INTENT_MAPPING = {\n    create_task: 'task.create',\n    complete_task: 'task.complete',\n    show_tasks: 'task.list',\n    start_study: 'study.start',\n    complete_habit: 'habit.complete',\n    show_habits: 'habit.list',\n    show_course: 'course.info',\n    find_material: 'material.search',\n    schedule_event: 'calendar.create',\n    show_progress: 'analytics.show',\n    study_plan: 'plan.create',\n    productivity_session: 'productivity.start'\n  }\n\n  parseCommand(command: string, context?: CommandContext): ParsedCommand {\n    const normalizedCommand = command.toLowerCase().trim()\n\n    // Try to match against patterns\n    for (const [intentKey, patterns] of Object.entries(this.COMMAND_PATTERNS)) {\n      for (const pattern of patterns) {\n        const match = normalizedCommand.match(pattern)\n        if (match) {\n          const parsed = this.buildParsedCommand(intentKey, match, command)\n          if (parsed.confidence > 0.3) {\n            // Add multi-step logic if needed\n            if (parsed.multiStep) {\n              parsed.steps = this.generateSteps(parsed, context)\n            }\n            return parsed\n          }\n        }\n      }\n    }\n\n    // Fallback to generic command\n    return {\n      intent: 'unknown',\n      entities: {},\n      confidence: 0.1,\n      originalCommand: command,\n      requiresConfirmation: true\n    }\n  }\n\n  private buildParsedCommand(intentKey: string, match: RegExpMatchArray, originalCommand: string): ParsedCommand {\n    const intent = this.INTENT_MAPPING[intentKey as keyof typeof this.INTENT_MAPPING] || intentKey\n    const entities: Record<string, any> = {}\n    let confidence = 0.8\n\n    switch (intentKey) {\n      case 'create_task':\n        entities.title = match[1] || match[2] || match[3]\n        entities.dueDate = this.parseDate(match[4] || match[5])\n        entities.course = match[6]\n        break\n\n      case 'complete_task':\n        entities.taskName = match[1] || match[2]\n        break\n\n      case 'show_tasks':\n        entities.filter = match[1] || match[2] ? { course: match[1], dueDate: match[2] } : null\n        break\n\n      case 'start_study':\n        entities.task = match[1] || match[2]\n        entities.duration = match[3] || match[4] ? parseInt(match[3] || match[4]) : 25\n        break\n\n      case 'complete_habit':\n        entities.habitName = match[1] || match[2] || match[3]\n        break\n\n      case 'show_course':\n        entities.courseName = match[1] || match[2] || match[3]\n        break\n\n      case 'find_material':\n        entities.topic = match[1] || match[2] || match[3]\n        entities.course = match[4]\n        break\n\n      case 'schedule_event':\n        entities.title = match[1] || match[4]\n        entities.dateTime = this.parseDate(match[2] || match[5])\n        entities.participants = match[3] || match[6]\n        break\n\n      case 'study_plan':\n        entities.examName = match[1] || match[2]\n        entities.days = match[3] || match[4] ? parseInt(match[3] || match[4]) : 7\n        confidence = 0.9\n        break\n\n      case 'productivity_session':\n        entities.duration = match[1] ? this.parseDuration(match[1]) : 90\n        confidence = 0.9\n        break\n\n      default:\n        confidence = 0.5\n    }\n\n    return {\n      intent,\n      entities,\n      confidence,\n      originalCommand,\n      multiStep: ['study_plan', 'productivity_session'].includes(intentKey),\n      requiresConfirmation: confidence < 0.7\n    }\n  }\n\n  private generateSteps(parsed: ParsedCommand, context?: CommandContext): CommandStep[] {\n    const steps: CommandStep[] = []\n\n    switch (parsed.intent) {\n      case 'plan.create':\n        steps.push(\n          {\n            id: 'gather_requirements',\n            action: 'analyze_course_materials',\n            params: { examName: parsed.entities.examName },\n            description: 'Analyzing course materials and syllabus'\n          },\n          {\n            id: 'assess_current_progress',\n            action: 'check_completion_status',\n            params: { course: parsed.entities.examName },\n            description: 'Checking current progress and completed topics'\n          },\n          {\n            id: 'calculate_study_load',\n            action: 'estimate_time_needed',\n            params: { days: parsed.entities.days, course: parsed.entities.examName },\n            description: 'Calculating optimal study time distribution'\n          },\n          {\n            id: 'generate_schedule',\n            action: 'create_study_plan',\n            params: { days: parsed.entities.days, course: parsed.entities.examName },\n            description: 'Creating detailed study schedule',\n            dependsOn: ['gather_requirements', 'assess_current_progress', 'calculate_study_load']\n          },\n          {\n            id: 'create_tasks',\n            action: 'schedule_tasks',\n            params: { planId: '{{generate_schedule.result}}' },\n            description: 'Adding study tasks to your planner',\n            dependsOn: ['generate_schedule']\n          }\n        )\n        break\n\n      case 'productivity.start':\n        steps.push(\n          {\n            id: 'prepare_environment',\n            action: 'setup_focus_mode',\n            params: { duration: parsed.entities.duration },\n            description: 'Setting up distraction-free environment'\n          },\n          {\n            id: 'select_task',\n            action: 'choose_next_task',\n            params: {},\n            description: 'Selecting the most important task to focus on',\n            requiresUserInput: true\n          },\n          {\n            id: 'start_timer',\n            action: 'begin_pomodoro',\n            params: { taskId: '{{select_task.result}}', duration: parsed.entities.duration },\n            description: 'Starting focused work session',\n            dependsOn: ['prepare_environment', 'select_task']\n          },\n          {\n            id: 'monitor_progress',\n            action: 'track_session',\n            params: { sessionId: '{{start_timer.result}}' },\n            description: 'Monitoring your progress and providing encouragement'\n          }\n        )\n        break\n    }\n\n    return steps\n  }\n\n  private parseDate(dateStr?: string): Date | null {\n    if (!dateStr) return null\n\n    // Simple date parsing - could be enhanced with a proper date library\n    const today = new Date()\n    const lowerStr = dateStr.toLowerCase()\n\n    if (lowerStr.includes('tomorrow')) {\n      const tomorrow = new Date(today)\n      tomorrow.setDate(today.getDate() + 1)\n      return tomorrow\n    }\n\n    if (lowerStr.includes('next week')) {\n      const nextWeek = new Date(today)\n      nextWeek.setDate(today.getDate() + 7)\n      return nextWeek\n    }\n\n    if (lowerStr.includes('end of week') || lowerStr.includes('friday')) {\n      const friday = new Date(today)\n      const daysUntilFriday = (5 - today.getDay() + 7) % 7\n      friday.setDate(today.getDate() + (daysUntilFriday === 0 ? 7 : daysUntilFriday))\n      return friday\n    }\n\n    // Try to parse as a specific date\n    const parsed = new Date(dateStr)\n    if (!isNaN(parsed.getTime())) {\n      return parsed\n    }\n\n    return null\n  }\n\n  private parseDuration(durationStr: string): number {\n    const match = durationStr.match(/(\\d+)\\s*(min|minutes?|hours?)/i)\n    if (match) {\n      const value = parseInt(match[1])\n      const unit = match[2].toLowerCase()\n      return unit.startsWith('hour') ? value * 60 : value\n    }\n    return 25 // Default 25 minutes\n  }\n\n  // Utility method to get suggested commands based on context\n  getSuggestedCommands(context?: CommandContext): string[] {\n    const suggestions: string[] = []\n\n    if (context?.currentPage === 'dashboard') {\n      suggestions.push(\n        \"Start a study session\",\n        \"Show my tasks\",\n        \"Complete a habit\",\n        \"Create a study plan\"\n      )\n    }\n\n    if (context?.currentPage === 'planner') {\n      suggestions.push(\n        \"Create a new task\",\n        \"Show tasks due today\",\n        \"Schedule an event\"\n      )\n    }\n\n    if (context?.availableData?.tasks && context.availableData.tasks.length > 0) {\n      suggestions.push(\"Show my tasks\")\n    }\n\n    if (context?.availableData?.habits && context.availableData.habits.length > 0) {\n      suggestions.push(\"Show my habits\")\n    }\n\n    return suggestions.slice(0, 4) // Return top 4 suggestions\n  }\n}\n\n// Singleton instance\nlet commandParser: JarvisCommandParser | null = null\n\nexport function getCommandParser(): JarvisCommandParser {\n  if (!commandParser) {\n    commandParser = new JarvisCommandParser()\n  }\n  return commandParser\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3269, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/jarvis/materials-integration.ts"],"sourcesContent":["\"use client\"\n\nimport { getMaterials, type Material } from '@/lib/firestore'\nimport { useAuthContext } from '@/components/auth-provider'\n\nexport interface MaterialSearchResult {\n  id: string\n  name: string\n  type: string\n  content: string\n  tags: string[]\n  relevanceScore: number\n  excerpt: string\n}\n\nexport class MaterialSearchIntegration {\n  private materials: Material[] = []\n  private userId: string\n\n  constructor(userId: string) {\n    this.userId = userId\n  }\n\n  async initialize(): Promise<void> {\n    try {\n      this.materials = await getMaterials(this.userId)\n    } catch (error) {\n      console.error('Failed to load materials for search:', error)\n      this.materials = []\n    }\n  }\n\n  async search(query: string, options: {\n    limit?: number\n    types?: string[]\n    tags?: string[]\n  } = {}): Promise<MaterialSearchResult[]> {\n    const { limit = 10, types, tags } = options\n\n    if (!query.trim()) {\n      return []\n    }\n\n    // Ensure materials are loaded\n    if (this.materials.length === 0) {\n      await this.initialize()\n    }\n\n    const queryLower = query.toLowerCase()\n    const results: MaterialSearchResult[] = []\n\n    for (const material of this.materials) {\n      // Filter by type if specified\n      if (types && types.length > 0 && !types.includes(material.type)) {\n        continue\n      }\n\n      // Filter by subject/tags if specified\n      if (tags && tags.length > 0) {\n        const materialSubject = material.subject || ''\n        if (!tags.some(tag => materialSubject.toLowerCase().includes(tag.toLowerCase()))) {\n          continue\n        }\n      }\n\n      let relevanceScore = 0\n      let excerpt = ''\n\n      // Search in title (highest weight)\n      if (material.title.toLowerCase().includes(queryLower)) {\n        relevanceScore += 10\n        excerpt = this.extractExcerpt(material.title, queryLower)\n      }\n\n      // Search in content\n      if (material.content && material.content.toLowerCase().includes(queryLower)) {\n        relevanceScore += 5\n        if (!excerpt) {\n          excerpt = this.extractExcerpt(material.content, queryLower)\n        }\n      }\n\n      // Search in subject\n      if (material.subject && material.subject.toLowerCase().includes(queryLower)) {\n        relevanceScore += 3\n        if (!excerpt) {\n          excerpt = `Subject: ${material.subject}`\n        }\n      }\n      // Boost score for exact matches\n      if (material.title.toLowerCase() === queryLower) {\n        relevanceScore += 20\n      }\n\n      if (relevanceScore > 0) {\n        results.push({\n          id: material.id,\n          name: material.title,\n          type: material.type,\n          content: material.content || '',\n          tags: [material.subject],\n          relevanceScore,\n          excerpt: excerpt || material.title\n        })\n      }\n    }\n\n    // Sort by relevance score (descending)\n    results.sort((a, b) => b.relevanceScore - a.relevanceScore)\n\n    return results.slice(0, limit)\n  }\n\n  private extractExcerpt(text: string, query: string, contextLength: number = 50): string {\n    const index = text.toLowerCase().indexOf(query)\n    if (index === -1) return text.substring(0, contextLength) + '...'\n\n    const start = Math.max(0, index - contextLength / 2)\n    const end = Math.min(text.length, index + query.length + contextLength / 2)\n\n    let excerpt = text.substring(start, end)\n    if (start > 0) excerpt = '...' + excerpt\n    if (end < text.length) excerpt = excerpt + '...'\n\n    return excerpt\n  }\n\n  getAvailableTypes(): string[] {\n    const types = new Set(this.materials.map(m => m.type))\n    return Array.from(types)\n  }\n\n  getAvailableTags(): string[] {\n    const tags = new Set<string>()\n    this.materials.forEach(material => {\n      if (material.subject) {\n        tags.add(material.subject)\n      }\n    })\n    return Array.from(tags)\n  }\n\n  getMaterialCount(): number {\n    return this.materials.length\n  }\n}\n\n// Singleton instance for the current user\nlet materialSearchInstance: MaterialSearchIntegration | null = null\n\nexport function getMaterialSearchIntegration(userId: string): MaterialSearchIntegration {\n  if (!materialSearchInstance || materialSearchInstance['userId'] !== userId) {\n    materialSearchInstance = new MaterialSearchIntegration(userId)\n  }\n  return materialSearchInstance\n}\n\nexport function useMaterialSearch() {\n  const { user } = useAuthContext()\n\n  const searchMaterials = async (query: string, options?: {\n    limit?: number\n    types?: string[]\n    tags?: string[]\n  }): Promise<MaterialSearchResult[]> => {\n    if (!user) return []\n\n    const searchIntegration = getMaterialSearchIntegration(user.uid)\n    return await searchIntegration.search(query, options)\n  }\n\n  const initializeSearch = async (): Promise<void> => {\n    if (!user) return\n\n    const searchIntegration = getMaterialSearchIntegration(user.uid)\n    await searchIntegration.initialize()\n  }\n\n  return {\n    searchMaterials,\n    initializeSearch\n  }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3418, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/jarvis/commandExecutor.ts"],"sourcesContent":["\"use client\"\n\nimport { ParsedCommand, CommandStep, CommandContext } from './commandParser'\nimport { getTasks, createTask, updateTask, getHabits, toggleHabitCompletion, getCourses, getCalendarEvents, createCalendarEvent, getMaterials, logStudySession, getDailyStats } from '@/lib/firestore'\nimport { analyzeLearningPatterns } from '@/lib/ai-client'\nimport { getMaterialSearchIntegration } from './materials-integration'\n\nexport interface ExecutionResult {\n  success: boolean\n  message: string\n  data?: any\n  nextStep?: string\n  requiresUserInput?: boolean\n  userInputPrompt?: string\n}\n\nexport interface ExecutionState {\n  commandId: string\n  currentStep: number\n  totalSteps: number\n  results: Record<string, any>\n  status: 'running' | 'waiting' | 'completed' | 'failed'\n  error?: string\n}\n\nexport class JarvisCommandExecutor {\n  private executionStates: Map<string, ExecutionState> = new Map()\n  private readonly API_BRIDGES = {\n    // Task Management\n    'task.create': this.createTask.bind(this),\n    'task.complete': this.completeTask.bind(this),\n    'task.list': this.listTasks.bind(this),\n\n    // Study Sessions\n    'study.start': this.startStudySession.bind(this),\n\n    // Habit Management\n    'habit.complete': this.completeHabit.bind(this),\n    'habit.list': this.listHabits.bind(this),\n\n    // Course Information\n    'course.info': this.getCourseInfo.bind(this),\n\n    // Material Search\n    'material.search': this.searchMaterials.bind(this),\n\n    // Calendar\n    'calendar.create': this.createCalendarEvent.bind(this),\n\n    // Analytics\n    'analytics.show': this.showAnalytics.bind(this),\n\n    // Multi-step Operations\n    'plan.create': this.createStudyPlan.bind(this),\n    'productivity.start': this.startProductivitySession.bind(this),\n\n    // Sub-actions for multi-step commands\n    'analyze_course_materials': this.analyzeCourseMaterials.bind(this),\n    'check_completion_status': this.checkCompletionStatus.bind(this),\n    'estimate_time_needed': this.estimateTimeNeeded.bind(this),\n    'create_study_plan': this.createStudyPlanAction.bind(this),\n    'schedule_tasks': this.scheduleTasks.bind(this),\n    'setup_focus_mode': this.setupFocusMode.bind(this),\n    'choose_next_task': this.chooseNextTask.bind(this),\n    'begin_pomodoro': this.beginPomodoro.bind(this),\n    'track_session': this.trackSession.bind(this)\n  }\n\n  async executeCommand(command: ParsedCommand, context: CommandContext): Promise<ExecutionResult> {\n    const commandId = `cmd_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n\n    if (command.multiStep && command.steps) {\n      return this.executeMultiStepCommand(commandId, command, context)\n    } else {\n      return this.executeSingleCommand(command, context)\n    }\n  }\n\n  private async executeSingleCommand(command: ParsedCommand, context: CommandContext): Promise<ExecutionResult> {\n    const bridge = this.API_BRIDGES[command.intent as keyof typeof this.API_BRIDGES]\n\n    if (!bridge) {\n      return {\n        success: false,\n        message: `I don't know how to handle \"${command.intent}\" commands yet.`\n      }\n    }\n\n    try {\n      return await bridge(command.entities, context)\n    } catch (error) {\n      console.error('Command execution error:', error)\n      return {\n        success: false,\n        message: `Sorry, I encountered an error while executing that command. Please try again.`\n      }\n    }\n  }\n\n  private async executeMultiStepCommand(commandId: string, command: ParsedCommand, context: CommandContext): Promise<ExecutionResult> {\n    if (!command.steps) {\n      return { success: false, message: 'No steps defined for multi-step command' }\n    }\n\n    const state: ExecutionState = {\n      commandId,\n      currentStep: 0,\n      totalSteps: command.steps.length,\n      results: {},\n      status: 'running'\n    }\n\n    this.executionStates.set(commandId, state)\n\n    try {\n      for (let i = 0; i < command.steps.length; i++) {\n        const step = command.steps[i]\n        state.currentStep = i\n\n        // Check dependencies\n        if (step.dependsOn) {\n          const missingDeps = step.dependsOn.filter(dep => !state.results[dep])\n          if (missingDeps.length > 0) {\n            state.status = 'failed'\n            state.error = `Missing dependencies: ${missingDeps.join(', ')}`\n            break\n          }\n        }\n\n        // Execute step\n        const stepResult = await this.executeStep(step, state.results, context)\n\n        if (!stepResult.success) {\n          state.status = 'failed'\n          state.error = stepResult.message\n          break\n        }\n\n        state.results[step.id] = stepResult.data\n\n        // Handle user input requirements\n        if (stepResult.requiresUserInput) {\n          state.status = 'waiting'\n          return {\n            success: true,\n            message: stepResult.userInputPrompt || 'Please provide additional information',\n            requiresUserInput: true,\n            nextStep: step.id\n          }\n        }\n      }\n\n      state.status = 'completed'\n      return {\n        success: true,\n        message: this.generateCompletionMessage(command, state.results),\n        data: state.results\n      }\n\n    } catch (error) {\n      state.status = 'failed'\n      state.error = error instanceof Error ? error.message : 'Unknown error'\n      return {\n        success: false,\n        message: 'Command execution failed. Please try again.'\n      }\n    }\n  }\n\n  private async executeStep(step: CommandStep, previousResults: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    // Replace template variables\n    const params = this.resolveTemplateVariables(step.params, previousResults)\n\n    const bridge = this.API_BRIDGES[step.action as keyof typeof this.API_BRIDGES]\n\n    if (!bridge) {\n      return {\n        success: false,\n        message: `Unknown action: ${step.action}`\n      }\n    }\n\n    return await bridge(params, context)\n  }\n\n  private resolveTemplateVariables(params: Record<string, any>, results: Record<string, any>): Record<string, any> {\n    const resolved = { ...params }\n\n    for (const [key, value] of Object.entries(resolved)) {\n      if (typeof value === 'string' && value.startsWith('{{') && value.endsWith('}}')) {\n        const templateKey = value.slice(2, -2)\n        const [resultKey, property] = templateKey.split('.')\n\n        if (results[resultKey]) {\n          resolved[key] = property ? results[resultKey][property] : results[resultKey]\n        }\n      }\n    }\n\n    return resolved\n  }\n\n  // API Bridge Implementations\n\n  private async createTask(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const taskData = {\n        userId: context.userId,\n        title: entities.title,\n        description: entities.description || '',\n        priority: entities.priority || 'medium',\n        status: 'todo' as const,\n        dueDate: entities.dueDate,\n        course: entities.course,\n        estimatedMinutes: entities.duration || 30,\n        tags: entities.tags || [],\n        subtasks: [],\n        links: []\n      }\n\n      const taskId = await createTask(taskData)\n\n      return {\n        success: true,\n        message: `Created task \"${entities.title}\"${entities.dueDate ? ` due ${entities.dueDate.toLocaleDateString()}` : ''}`,\n        data: { taskId }\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: 'Failed to create task. Please try again.'\n      }\n    }\n  }\n\n  private async completeTask(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const tasks = await getTasks(context.userId)\n      const task = tasks.find(t => t.title.toLowerCase().includes(entities.taskName.toLowerCase()))\n\n      if (!task) {\n        return {\n          success: false,\n          message: `I couldn't find a task named \"${entities.taskName}\". Could you be more specific?`\n        }\n      }\n\n      await updateTask(task.id, { status: 'done', completedAt: new Date() })\n\n      return {\n        success: true,\n        message: `Marked \"${task.title}\" as completed! Great job! 🎉`,\n        data: { taskId: task.id }\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: 'Failed to complete task. Please try again.'\n      }\n    }\n  }\n\n  private async listTasks(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const tasks = await getTasks(context.userId)\n      let filteredTasks = tasks\n\n      if (entities.filter) {\n        if (entities.filter.course) {\n          filteredTasks = filteredTasks.filter(t => t.course?.toLowerCase().includes(entities.filter.course.toLowerCase()))\n        }\n        if (entities.filter.dueDate) {\n          const filterDate = new Date(entities.filter.dueDate)\n          filteredTasks = filteredTasks.filter(t => t.dueDate && new Date(t.dueDate) <= filterDate)\n        }\n      }\n\n      const pendingTasks = filteredTasks.filter(t => t.status !== 'done')\n\n      if (pendingTasks.length === 0) {\n        return {\n          success: true,\n          message: 'You have no pending tasks! 🎉',\n          data: { tasks: [] }\n        }\n      }\n\n      const taskList = pendingTasks.slice(0, 5).map(t => `- ${t.title}${t.dueDate ? ` (due ${new Date(t.dueDate).toLocaleDateString()})` : ''}`).join('\\n')\n\n      return {\n        success: true,\n        message: `Here are your ${entities.filter ? 'filtered ' : ''}tasks:\\n${taskList}${pendingTasks.length > 5 ? `\\n...and ${pendingTasks.length - 5} more` : ''}`,\n        data: { tasks: pendingTasks }\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: 'Failed to retrieve tasks. Please try again.'\n      }\n    }\n  }\n\n  private async startStudySession(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    // This would integrate with the Pomodoro timer\n    return {\n      success: true,\n      message: `Starting a ${entities.duration || 25} minute study session${entities.task ? ` for \"${entities.task}\"` : ''}. Focus mode activated! 🚀`,\n      data: { duration: entities.duration || 25, task: entities.task }\n    }\n  }\n\n  private async completeHabit(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const habits = await getHabits(context.userId)\n      const habit = habits.find(h => h.name.toLowerCase().includes(entities.habitName.toLowerCase()))\n\n      if (!habit) {\n        return {\n          success: false,\n          message: `I couldn't find a habit named \"${entities.habitName}\". Could you be more specific?`\n        }\n      }\n\n      await toggleHabitCompletion(habit.id, new Date().toISOString().split('T')[0])\n\n      return {\n        success: true,\n        message: `Completed \"${habit.name}\" for today! Keep up the great work! 💪`,\n        data: { habitId: habit.id }\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: 'Failed to complete habit. Please try again.'\n      }\n    }\n  }\n\n  private async listHabits(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const habits = await getHabits(context.userId)\n      const today = new Date().toISOString().split('T')[0]\n\n      const habitStatus = habits.map(h => {\n        const completedToday = h.completions.some(c => c.date === today && c.completed)\n        return `- ${h.name}: ${completedToday ? '✅ Done' : '⏳ Pending'} (${h.currentStreak} day streak)`\n      }).join('\\n')\n\n      return {\n        success: true,\n        message: `Here's your habit status:\\n${habitStatus}`,\n        data: { habits }\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: 'Failed to retrieve habits. Please try again.'\n      }\n    }\n  }\n\n  private async getCourseInfo(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const courses = await getCourses(context.userId)\n      const course = courses.find(c => c.name.toLowerCase().includes(entities.courseName.toLowerCase()))\n\n      if (!course) {\n        return {\n          success: false,\n          message: `I couldn't find a course named \"${entities.courseName}\".`\n        }\n      }\n\n      const info = `Course: ${course.name}${course.code ? ` (${course.code})` : ''}${course.professor ? `\\nProfessor: ${course.professor}` : ''}${course.examDate ? `\\nNext Exam: ${new Date(course.examDate).toLocaleDateString()}` : ''}`\n\n      return {\n        success: true,\n        message: info,\n        data: { course }\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: 'Failed to retrieve course information.'\n      }\n    }\n  }\n\n  private async searchMaterials(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const searchIntegration = getMaterialSearchIntegration(context.userId)\n      await searchIntegration.initialize()\n\n      const query = entities.topic || entities.query || ''\n      const results = await searchIntegration.search(query, {\n        limit: 5,\n        types: entities.type ? [entities.type] : undefined,\n        tags: entities.tags ? entities.tags.split(',').map((t: string) => t.trim()) : undefined\n      })\n\n      if (results.length === 0) {\n        return {\n          success: false,\n          message: `I couldn't find any materials related to \"${query}\". ${searchIntegration.getMaterialCount() > 0 ? 'Try a different search term or check your materials.' : 'You haven\\'t uploaded any materials yet.'}`\n        }\n      }\n\n      const materialList = results.map(r =>\n        `- ${r.name} (${r.type}) - ${r.excerpt}`\n      ).join('\\n')\n\n      return {\n        success: true,\n        message: `Found ${results.length} material${results.length > 1 ? 's' : ''} related to \"${query}\":\\n${materialList}`,\n        data: { materials: results }\n      }\n    } catch (error) {\n      console.error('Material search error:', error)\n      return {\n        success: false,\n        message: 'Failed to search materials. Please try again.'\n      }\n    }\n  }\n\n  private async createCalendarEvent(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const eventData = {\n        userId: context.userId,\n        title: entities.title,\n        type: 'meeting' as const,\n        startTime: entities.dateTime || new Date(),\n        endTime: new Date((entities.dateTime || new Date()).getTime() + 60 * 60 * 1000), // 1 hour default\n        isAllDay: false,\n        isRecurring: false,\n        description: entities.description || '',\n        color: '#3b82f6'\n      }\n\n      const eventId = await createCalendarEvent(eventData)\n\n      return {\n        success: true,\n        message: `Scheduled \"${entities.title}\" for ${entities.dateTime?.toLocaleString() || 'now'}`,\n        data: { eventId }\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: 'Failed to schedule event.'\n      }\n    }\n  }\n\n  private async showAnalytics(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const today = new Date().toISOString().split('T')[0]\n      const dailyStats = await getDailyStats(context.userId, today)\n\n      if (!dailyStats) {\n        return {\n          success: true,\n          message: \"You haven't logged any study time today yet. Let's get started! 📚\",\n          data: { stats: null }\n        }\n      }\n\n      const message = `Today's Progress:\\n` +\n        `📖 Study Time: ${Math.round(dailyStats.totalStudyMinutes / 60 * 10) / 10}h\\n` +\n        `✅ Tasks Completed: ${dailyStats.taskCompleted}\\n` +\n        `🎯 Pomodoro Sessions: ${dailyStats.pomodoroCompleted}\\n` +\n        `🔥 Current Streak: ${dailyStats.streakDay} days`\n\n      return {\n        success: true,\n        message,\n        data: { stats: dailyStats }\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: 'Failed to retrieve analytics.'\n      }\n    }\n  }\n\n  // Multi-step command implementations\n  private async createStudyPlan(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    // This is a multi-step command that will be handled by the multi-step executor\n    return {\n      success: true,\n      message: 'Starting study plan creation...',\n      data: { examName: entities.examName, days: entities.days }\n    }\n  }\n\n  private async startProductivitySession(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    // This is a multi-step command that will be handled by the multi-step executor\n    return {\n      success: true,\n      message: 'Initiating productivity session...',\n      data: { duration: entities.duration }\n    }\n  }\n\n  // Sub-action implementations for multi-step commands\n  private async analyzeCourseMaterials(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const courses = await getCourses(context.userId)\n      const course = courses.find(c => c.name.toLowerCase().includes(entities.examName.toLowerCase()))\n\n      return {\n        success: true,\n        message: 'Analyzed course materials',\n        data: { course, materials: course?.syllabus || [] }\n      }\n    } catch (error) {\n      return { success: false, message: 'Failed to analyze course materials' }\n    }\n  }\n\n  private async checkCompletionStatus(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const tasks = await getTasks(context.userId)\n      const courseTasks = tasks.filter(t => t.course?.toLowerCase().includes(entities.course.toLowerCase()))\n      const completedTasks = courseTasks.filter(t => t.status === 'done')\n\n      return {\n        success: true,\n        message: 'Checked completion status',\n        data: { completed: completedTasks.length, total: courseTasks.length, progress: completedTasks.length / courseTasks.length }\n      }\n    } catch (error) {\n      return { success: false, message: 'Failed to check completion status' }\n    }\n  }\n\n  private async estimateTimeNeeded(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    const estimatedHours = Math.max(entities.days * 2, 10) // At least 10 hours, or 2 hours per day\n\n    return {\n      success: true,\n      message: 'Estimated study time needed',\n      data: { estimatedHours, dailyHours: estimatedHours / entities.days }\n    }\n  }\n\n  private async createStudyPlanAction(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      // Generate a simple study plan structure\n      const plan = {\n        id: `plan_${Date.now()}`,\n        examName: entities.course,\n        days: entities.days,\n        dailyTasks: Math.ceil(10 / entities.days), // 10 tasks total\n        focusAreas: ['Review notes', 'Practice problems', 'Take breaks', 'Light review']\n      }\n\n      return {\n        success: true,\n        message: 'Generated study plan',\n        data: { plan, planId: `plan_${Date.now()}` }\n      }\n    } catch (error) {\n      return { success: false, message: 'Failed to generate study plan' }\n    }\n  }\n\n  private async scheduleTasks(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    // This would create actual tasks in the system\n    return {\n      success: true,\n      message: 'Scheduled study tasks',\n      data: { taskCount: 5 } // Placeholder\n    }\n  }\n\n  private async setupFocusMode(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    return {\n      success: true,\n      message: 'Focus mode activated - notifications silenced, distractions minimized',\n      data: { focusMode: true }\n    }\n  }\n\n  private async chooseNextTask(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    try {\n      const tasks = await getTasks(context.userId)\n      const pendingTasks = tasks.filter(t => t.status !== 'done').sort((a, b) => {\n        const priorityOrder = { urgent: 0, high: 1, medium: 2, low: 3 }\n        return priorityOrder[a.priority] - priorityOrder[b.priority]\n      })\n\n      if (pendingTasks.length === 0) {\n        return {\n          success: true,\n          message: 'No pending tasks found',\n          data: { task: null }\n        }\n      }\n\n      return {\n        success: true,\n        message: `Selected: \"${pendingTasks[0].title}\"`,\n        data: { task: pendingTasks[0] },\n        requiresUserInput: true,\n        userInputPrompt: `Would you like to work on \"${pendingTasks[0].title}\" or choose a different task?`\n      }\n    } catch (error) {\n      return { success: false, message: 'Failed to select task' }\n    }\n  }\n\n  private async beginPomodoro(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    return {\n      success: true,\n      message: `Starting ${entities.duration} minute focus session on \"${entities.taskId?.title || 'selected task'}\"`,\n      data: { sessionId: `session_${Date.now()}`, duration: entities.duration }\n    }\n  }\n\n  private async trackSession(entities: Record<string, any>, context: CommandContext): Promise<ExecutionResult> {\n    return {\n      success: true,\n      message: 'Session tracking active - I\\'ll keep you motivated!',\n      data: { tracking: true }\n    }\n  }\n\n  private generateCompletionMessage(command: ParsedCommand, results: Record<string, any>): string {\n    switch (command.intent) {\n      case 'plan.create':\n        return `✅ Study plan created! I've scheduled ${results.schedule_tasks?.taskCount || 5} study sessions over ${command.entities.days} days. Check your planner for details.`\n\n      case 'productivity.start':\n        return `🚀 Productivity session started! ${command.entities.duration} minutes of focused work ahead. You've got this!`\n\n      default:\n        return '✅ Command completed successfully!'\n    }\n  }\n\n  // Utility methods\n  getExecutionState(commandId: string): ExecutionState | null {\n    return this.executionStates.get(commandId) || null\n  }\n\n  cancelExecution(commandId: string): void {\n    const state = this.executionStates.get(commandId)\n    if (state) {\n      state.status = 'failed'\n      state.error = 'Cancelled by user'\n    }\n  }\n}\n\n// Singleton instance\nlet commandExecutor: JarvisCommandExecutor | null = null\n\nexport function getCommandExecutor(): JarvisCommandExecutor {\n  if (!commandExecutor) {\n    commandExecutor = new JarvisCommandExecutor()\n  }\n  return commandExecutor\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4062, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/components/jarvis-assistant.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useEffect, useCallback } from \"react\"\nimport { useRouter, usePathname } from \"next/navigation\"\nimport { useAuthContext } from \"./auth-provider\"\nimport { useVoiceInput, speak, stopSpeaking, isSpeechRecognitionSupported } from \"@/lib/voice\"\nimport { parseCommand, executeCommand, getSuggestedActions, AssistantContext, CommandResult } from \"@/lib/assistant\"\nimport { getCommandParser, ParsedCommand, CommandContext } from \"@/lib/jarvis/commandParser\"\nimport { getCommandExecutor } from \"@/lib/jarvis/commandExecutor\"\nimport { Message } from \"@/lib/ai-client\"\nimport { \n  addMemory, \n  getMaterials,\n  getFlashcardDecks,\n  createFlashcardDeck,\n  addFlashcard,\n  type FlashcardDeck,\n  type Task,\n  type Course,\n  type Habit,\n  type DailyStats\n} from \"@/lib/firestore\"\nimport { BookOpen, Target, Lightbulb, Navigation } from \"lucide-react\"\n\ninterface ChatMessage {\n  id: string\n  role: \"user\" | \"assistant\"\n  content: string\n  timestamp: Date\n  action?: CommandResult[\"action\"]\n}\n\ninterface JarvisAssistantProps {\n  context?: {\n    currentPage?: string\n    todayTasks?: Task[]\n    courses?: Course[]\n    habits?: Habit[]\n    dailyStats?: DailyStats\n  }\n}\n\nexport function JarvisAssistant({ context }: JarvisAssistantProps = {}) {\n  const { user } = useAuthContext()\n  const router = useRouter()\n  const pathname = usePathname()\n  \n  const [isOpen, setIsOpen] = useState(false)\n  const [isFullscreen, setIsFullscreen] = useState(false)\n  const [messages, setMessages] = useState<ChatMessage[]>([])\n  const [inputValue, setInputValue] = useState(\"\")\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [userContext, setUserContext] = useState<AssistantContext>({\n    currentPage: context?.currentPage || pathname,\n    conversationHistory: [],\n    userMaterials: [],\n    userDecks: []\n  })\n  const [isInitialized, setIsInitialized] = useState(false)\n  const [showWaveform, setShowWaveform] = useState(false)\n  const [userDecks, setUserDecks] = useState<FlashcardDeck[]>([])\n  const [isVoiceNotesMode, setIsVoiceNotesMode] = useState(false)\n  const [voiceNotes, setVoiceNotes] = useState<string>(\"\")\n  const [speakOnlyIntro, setSpeakOnlyIntro] = useState(false)\n  const [globalVoiceActive, setGlobalVoiceActive] = useState(false)\n  \n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  // Voice input hook\n  const { state: voiceState, startListening, stopListening, resetTranscript } = useVoiceInput({\n    continuous: true, // Changed to continuous for notes\n    onResult: (transcript, isFinal) => {\n      if (isVoiceNotesMode) {\n        setVoiceNotes(prev => prev + (isFinal ? transcript : \"\"))\n        if (isFinal) {\n          addAssistantMessage(`Voice note added: \"${transcript}\"`)\n        }\n      } else {\n        if (isFinal && transcript.trim()) {\n          setInputValue(transcript.trim())\n          handleSubmit(transcript.trim())\n        }\n      }\n    },\n    onError: (error) => {\n      addAssistantMessage(`Voice recognition error: ${error}`)\n    }\n  })\n\n  // Load user context\n  useEffect(() => {\n    async function loadContext() {\n      if (!user) return\n      \n      try {\n        const [materials, decks] = await Promise.all([\n          getMaterials(user.uid),\n          getFlashcardDecks(user.uid)\n        ])\n        \n        setUserDecks(decks)\n        setUserContext({\n          userId: user.uid,\n          currentPage: pathname,\n          userMaterials: materials.map(m => ({ id: m.id, title: m.title, subject: m.subject })),\n          userDecks: decks.map(d => ({ id: d.id, name: d.name }))\n        })\n      } catch (error) {\n        console.error(\"Error loading context:\", error)\n      }\n    }\n    \n    loadContext()\n  }, [user, pathname])\n\n  useEffect(() => {\n    setUserContext(prev => ({ ...prev, currentPage: pathname }))\n  }, [pathname])\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }, [messages])\n\n  // Global voice activation for \"gemini\"\n  useEffect(() => {\n    if (!isSpeechRecognitionSupported()) return\n\n    let globalRecognition: any = null\n\n    const startGlobalListening = () => {\n      if (globalRecognition) return\n\n      globalRecognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)()\n      globalRecognition.continuous = true\n      globalRecognition.interimResults = false\n      globalRecognition.lang = \"en-US\"\n\n      globalRecognition.onresult = (event: any) => {\n        const transcript = event.results[event.results.length - 1][0].transcript.toLowerCase().trim()\n        \n        if (transcript.includes(\"gemini\") || transcript.includes(\"jarvis\") || transcript.includes(\"hey jarvis\")) {\n          setIsOpen(true)\n          setGlobalVoiceActive(true)\n          globalRecognition.stop()\n          \n          // Start the main voice input\n          setTimeout(() => {\n            startListening()\n            setShowWaveform(true)\n          }, 500)\n        }\n      }\n\n      globalRecognition.onend = () => {\n        setGlobalVoiceActive(false)\n        // Restart global listening if not activated\n        setTimeout(startGlobalListening, 1000)\n      }\n\n      globalRecognition.start()\n    }\n\n    if (!isOpen) {\n      startGlobalListening()\n    }\n\n    return () => {\n      if (globalRecognition) {\n        globalRecognition.stop()\n      }\n    }\n  }, [isOpen, startListening])\n\n  // Stop speaking when component unmounts or closes\n  useEffect(() => {\n    return () => {\n      stopSpeaking()\n    }\n  }, [])\n\n  useEffect(() => {\n    if (!isOpen) {\n      stopSpeaking()\n    }\n  }, [isOpen])\n\n  // Generate proactive contextual greeting\n  const getContextualGreeting = () => {\n    const hour = new Date().getHours()\n    const timeOfDay = hour < 12 ? \"morning\" : hour < 17 ? \"afternoon\" : \"evening\"\n    \n    let greeting = `Good ${timeOfDay}! I'm JARVIS, your intelligent study assistant.`\n    let suggestion = \"\"\n    \n    // Proactive suggestions based on context\n    if (context?.todayTasks && context.todayTasks.length > 0) {\n      const urgentTasks = context.todayTasks.filter(t => t.priority === 'urgent')\n      const highTasks = context.todayTasks.filter(t => t.priority === 'high')\n      \n      if (urgentTasks.length > 0) {\n        suggestion = `⚡ You have ${urgentTasks.length} urgent task${urgentTasks.length > 1 ? 's' : ''} - shall I help you prioritize?`\n      } else if (highTasks.length > 0) {\n        suggestion = `📋 ${context.todayTasks.length} tasks today. Ready to start a focus session?`\n      } else {\n        suggestion = `You have ${context.todayTasks.length} task${context.todayTasks.length > 1 ? 's' : ''} scheduled. How can I help?`\n      }\n    } else if (context?.habits && context.habits.length > 0) {\n      const incompleteHabits = context.habits.filter(h => {\n        const todayStr = new Date().toISOString().split('T')[0]\n        return !h.completions.some(c => c.date === todayStr && c.completed)\n      })\n      if (incompleteHabits.length > 0) {\n        suggestion = `🔥 ${incompleteHabits.length} habit${incompleteHabits.length > 1 ? 's' : ''} pending today. Want help staying on track?`\n      }\n    }\n    \n    // Time-based suggestions\n    if (!suggestion) {\n      if (hour >= 9 && hour <= 11) {\n        suggestion = \"🧠 Morning peak focus time! Shall I help you plan a deep work session?\"\n      } else if (hour >= 14 && hour <= 16) {\n        suggestion = \"💪 Afternoon productivity window. Ready to tackle something challenging?\"\n      } else if (hour >= 20 && hour <= 22) {\n        suggestion = \"🌙 Good time for review. Want me to suggest flashcards to review?\"\n      } else {\n        suggestion = \"How may I assist you today?\"\n      }\n    }\n    \n    return `${greeting}\\n\\n${suggestion}`\n  }\n\n  useEffect(() => {\n    if (isOpen && !isInitialized) {\n      setIsInitialized(true)\n      // Jarvis greeting with contextual awareness\n      setTimeout(() => {\n        addAssistantMessage(getContextualGreeting())\n      }, 500)\n    }\n  }, [isOpen, isInitialized, context])\n\n  useEffect(() => {\n    if (isOpen) {\n      inputRef.current?.focus()\n    }\n  }, [isOpen])\n\n  // Update waveform state based on voice\n  useEffect(() => {\n    setShowWaveform(voiceState.isListening)\n  }, [voiceState.isListening])\n\n  const getTimeOfDay = () => {\n    const hour = new Date().getHours()\n    if (hour < 12) return \"morning\"\n    if (hour < 17) return \"afternoon\"\n    return \"evening\"\n  }\n\n  const addAssistantMessage = useCallback((content: string, action?: CommandResult[\"action\"]) => {\n    const message: ChatMessage = {\n      id: Date.now().toString(),\n      role: \"assistant\",\n      content,\n      timestamp: new Date(),\n      action\n    }\n    setMessages(prev => [...prev, message])\n    \n    // Determine what to speak\n    let speakText = content\n    if (speakOnlyIntro) {\n      // Extract introduction/summary (first sentence or first 100 characters)\n      const firstSentence = content.split(/[.!?]/)[0]\n      if (firstSentence && firstSentence.length > 10) {\n        speakText = firstSentence + (firstSentence.length < content.length ? \"...\" : \"\")\n      } else {\n        // Fallback to first 100 characters\n        speakText = content.length > 100 ? content.substring(0, 100) + \"...\" : content\n      }\n    }\n    \n    // Speak the response (softer, more natural voice)\n    try {\n      speak(speakText, { rate: 1.0, pitch: 1.0, volume: 0.7 }).catch(() => {})\n    } catch {}\n    \n    return message\n  }, [speakOnlyIntro])\n\n  const handleSubmit = async (text?: string) => {\n    const messageText = (text || inputValue).trim()\n    if (!messageText || isProcessing) return\n\n    setInputValue(\"\")\n    setIsProcessing(true)\n    stopSpeaking()\n\n    // Add user message\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      role: \"user\",\n      content: messageText,\n      timestamp: new Date()\n    }\n    setMessages(prev => [...prev, userMessage])\n\n    try {\n      // Use new command parser and executor\n      const commandParser = getCommandParser()\n      const commandExecutor = getCommandExecutor()\n\n      const commandContext: CommandContext = {\n        userId: user?.uid || '',\n        currentPage: pathname,\n        recentActions: [], // Could be populated from message history\n        userPreferences: {}, // Could be loaded from user settings\n        availableData: {\n          tasks: context?.todayTasks,\n          courses: context?.courses,\n          habits: context?.habits\n        }\n      }\n\n      const parsedCommand = commandParser.parseCommand(messageText, commandContext)\n      const result = await commandExecutor.executeCommand(parsedCommand, commandContext)\n\n      addAssistantMessage(result.message)\n\n      // Handle actions from new executor\n      if (result.data) {\n        // Handle navigation actions\n        if (result.data.path) {\n          setTimeout(() => {\n            router.push(result.data.path)\n          }, 1000)\n        }\n\n        // Handle task creation\n        if (result.data.taskId && parsedCommand.intent === 'task.create') {\n          // Could refresh tasks here\n        }\n\n        // Handle habit completion\n        if (result.data.habitId && parsedCommand.intent === 'habit.complete') {\n          // Could refresh habits here\n        }\n      }\n\n      // Handle multi-step command continuation\n      if (result.requiresUserInput) {\n        // For now, just acknowledge - could be enhanced to handle follow-up questions\n        addAssistantMessage(\"What would you like to do next?\", {\n          type: \"none\",\n          data: { commandId: result.nextStep }\n        })\n      }\n    } catch (error: any) {\n      addAssistantMessage(`I apologize, but I encountered an error: ${error.message}`)\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  const handleVoiceToggle = () => {\n    if (voiceState.isListening) {\n      stopListening()\n    } else {\n      resetTranscript()\n      startListening()\n    }\n  }\n\n  const clearChat = () => {\n    setMessages([])\n    addAssistantMessage(\"Memory cleared. How may I assist you?\")\n  }\n\n  const suggestions = getSuggestedActions(userContext)\n\n  if (!user) return null\n\n  return (\n    <>\n      {/* Floating trigger orb */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className={`fixed bottom-6 right-6 z-50 group transition-all duration-500 ${\n          isOpen ? \"scale-0 opacity-0\" : \"scale-100 opacity-100\"\n        }`}\n        aria-label=\"Open JARVIS\"\n      >\n        <div className=\"relative\">\n          {/* Outer glow rings */}\n          <div className=\"absolute inset-0 w-16 h-16 rounded-full bg-blue-400/20 animate-ping\" />\n          <div className=\"absolute inset-0 w-16 h-16 rounded-full bg-blue-400/10 animate-pulse\" />\n          \n          {/* Main orb */}\n          <div className=\"relative w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 via-indigo-500 to-purple-500 shadow-lg shadow-blue-500/30 flex items-center justify-center overflow-hidden\">\n            {/* Inner glow */}\n            <div className=\"absolute inset-2 rounded-full bg-gradient-to-br from-blue-300/50 to-transparent\" />\n            \n            {/* Core */}\n            <div className=\"relative w-8 h-8 rounded-full bg-gradient-to-br from-white via-blue-100 to-blue-200 shadow-inner flex items-center justify-center\">\n              <div className=\"w-4 h-4 rounded-full bg-white/90 animate-pulse\" />\n            </div>\n          </div>\n          \n          {/* Hover text */}\n          <span className=\"absolute -top-8 left-1/2 -translate-x-1/2 whitespace-nowrap text-xs text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity font-mono\">\n            JARVIS\n          </span>\n        </div>\n      </button>\n\n      {/* Main JARVIS Panel */}\n      <div\n        className={`fixed z-50 transition-all duration-500 ease-out ${\n          isFullscreen \n            ? \"inset-4\" \n            : \"bottom-6 right-6 w-[420px] max-w-[calc(100vw-3rem)]\"\n        } ${\n          isOpen \n            ? \"opacity-100 scale-100 translate-y-0\" \n            : \"opacity-0 scale-95 translate-y-4 pointer-events-none\"\n        }`}\n      >\n        <div className={`relative h-full ${isFullscreen ? \"\" : \"max-h-[600px]\"} bg-white/95 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-2xl overflow-hidden flex flex-col`}>\n          \n          {/* Animated border glow */}\n          <div className=\"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-cyan-500/0 via-cyan-500/20 to-cyan-500/0 animate-shimmer\" />\n          </div>\n\n          {/* Enhanced Header */}\n          <div className=\"relative px-5 py-4 border-b border-gray-200/50 bg-gradient-to-r from-blue-50/80 via-indigo-50/60 to-blue-50/80\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-3\">\n                {/* JARVIS Logo */}\n                <div className=\"relative\">\n                  <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center\">\n                    <div className={`w-6 h-6 rounded-full bg-blue-300/80 ${isProcessing ? \"animate-pulse\" : \"\"}`}>\n                      <div className=\"w-full h-full rounded-full bg-gradient-to-br from-white/60 to-transparent\" />\n                    </div>\n                  </div>\n                  {isProcessing && (\n                    <div className=\"absolute inset-0 rounded-full border-2 border-blue-400 animate-ping\" />\n                  )}\n                </div>\n\n                <div>\n                  <h3 className=\"font-bold text-blue-600 tracking-wider font-mono text-sm\">Study AI Assistant</h3>\n                  <p className=\"text-[10px] text-blue-500 font-mono tracking-widest\">J.A.R.V.I.S - Intelligent Study Companion</p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                {/* Status indicator */}\n                <div className=\"flex items-center gap-1.5 px-2 py-1 rounded-full bg-green-50 border border-green-200/50\">\n                  <div className=\"w-2 h-2 rounded-full bg-green-400 animate-pulse\" />\n                  <span className=\"text-[10px] text-green-600 font-mono\">\n                    ACTIVE\n                  </span>\n                </div>\n\n                {/* Fullscreen toggle */}\n                <button\n                  onClick={() => setIsFullscreen(!isFullscreen)}\n                  className=\"p-2 hover:bg-blue-100 rounded-lg transition-colors text-blue-600\"\n                  title={isFullscreen ? \"Exit fullscreen\" : \"Enter fullscreen\"}\n                >\n                  {isFullscreen ? (\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  ) : (\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4\" />\n                    </svg>\n                  )}\n                </button>\n\n                {/* Close button */}\n                <button\n                  onClick={() => setIsOpen(false)}\n                  className=\"p-2 hover:bg-red-100 rounded-lg transition-colors text-red-600\"\n                  title=\"Close JARVIS\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n\n            {/* Voice instruction */}\n            <div className=\"mt-3 text-xs text-blue-600 font-mono px-3 py-2 bg-blue-50/50 rounded-lg border border-blue-200/30\">\n              💬 Ask me anything about your studies • 🎯 Get personalized help • 📚 Create study materials\n            </div>\n          </div>\n\n          {/* Dynamic Context Chips */}\n          <div className=\"px-5 py-3 border-b border-gray-200/50 bg-blue-50/30\">\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <span className=\"text-xs text-blue-600 font-mono font-semibold\">CONTEXT:</span>\n              {userContext.currentPage && (\n                <span className=\"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium border border-blue-200/50\">\n                  📍 {userContext.currentPage}\n                </span>\n              )}\n              {context?.todayTasks && context.todayTasks.length > 0 && (\n                <span className=\"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium border border-green-200/50\">\n                  ✅ {context.todayTasks.length} tasks today\n                </span>\n              )}\n              {context?.courses && context.courses.length > 0 && (\n                <span className=\"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium border border-purple-200/50\">\n                  📚 {context.courses.length} courses\n                </span>\n              )}\n              {context?.habits && context.habits.length > 0 && (\n                <span className=\"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-xs font-medium border border-orange-200/50\">\n                  🎯 {context.habits.length} habits\n                </span>\n              )}\n              {(!userContext.currentPage && (!context?.todayTasks || context.todayTasks.length === 0) && (!context?.courses || context.courses.length === 0)) && (\n                <span className=\"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-medium border border-gray-200/50\">\n                  🌟 Ready to help with your studies\n                </span>\n              )}\n            </div>\n          </div>\n\n          {/* Messages area */}\n          <div className={`flex-1 overflow-y-auto p-4 space-y-4 ${isFullscreen ? \"max-h-none\" : \"max-h-80\"}`}>\n            {/* Decorative elements */}\n            <div className=\"absolute top-20 left-4 w-px h-8 bg-gradient-to-b from-blue-400/30 to-transparent\" />\n            <div className=\"absolute top-20 right-4 w-px h-8 bg-gradient-to-b from-blue-400/30 to-transparent\" />\n\n            {messages.length === 0 && (\n              <div className=\"space-y-6\">\n                {/* Quick Action Pills - Organized by Category */}\n                <div className=\"space-y-4\">\n                  <div>\n                    <h4 className=\"text-xs font-mono text-blue-600 mb-3 tracking-wider font-semibold\">📝 CREATE STUDY MATERIALS</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      <button\n                        onClick={() => handleSubmit(context?.courses?.length ? \"Create flashcards for my courses\" : \"Create flashcards for today's topic\")}\n                        className=\"px-3 py-2 bg-blue-100 text-blue-700 rounded-full text-xs font-medium hover:bg-blue-200 transition-all hover:scale-105 border border-blue-200/50\"\n                      >\n                        🃏 Flashcards\n                      </button>\n                      <button\n                        onClick={() => handleSubmit(context?.todayTasks?.length ? \"Generate a quiz for my today's tasks\" : \"Generate a quiz for what I learned today\")}\n                        className=\"px-3 py-2 bg-green-100 text-green-700 rounded-full text-xs font-medium hover:bg-green-200 transition-all hover:scale-105 border border-green-200/50\"\n                      >\n                        ❓ Quiz Me\n                      </button>\n                      <button\n                        onClick={() => handleSubmit(\"Create a study plan for this week\")}\n                        className=\"px-3 py-2 bg-purple-100 text-purple-700 rounded-full text-xs font-medium hover:bg-purple-200 transition-all hover:scale-105 border border-purple-200/50\"\n                      >\n                        📅 Study Plan\n                      </button>\n                    </div>\n                  </div>\n\n                  <div>\n                    <h4 className=\"text-xs font-mono text-blue-600 mb-3 tracking-wider font-semibold\">🎯 GET HELP & EXPLANATIONS</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      <button\n                        onClick={() => handleSubmit(\"Explain this concept simply\")}\n                        className=\"px-3 py-2 bg-orange-100 text-orange-700 rounded-full text-xs font-medium hover:bg-orange-200 transition-all hover:scale-105 border border-orange-200/50\"\n                      >\n                        💡 Explain Concept\n                      </button>\n                      <button\n                        onClick={() => handleSubmit(\"Help me understand this problem\")}\n                        className=\"px-3 py-2 bg-red-100 text-red-700 rounded-full text-xs font-medium hover:bg-red-200 transition-all hover:scale-105 border border-red-200/50\"\n                      >\n                        🤔 Problem Help\n                      </button>\n                      <button\n                        onClick={() => handleSubmit(\"Give me study tips\")}\n                        className=\"px-3 py-2 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium hover:bg-indigo-200 transition-all hover:scale-105 border border-indigo-200/50\"\n                      >\n                        💪 Study Tips\n                      </button>\n                    </div>\n                  </div>\n\n                  <div>\n                    <h4 className=\"text-xs font-mono text-blue-600 mb-3 tracking-wider font-semibold\">⚡ QUICK ACTIONS</h4>\n                    <div className=\"flex flex-wrap gap-2\">\n                      <button\n                        onClick={() => handleSubmit(context?.todayTasks?.length ? \"Start a 25-minute focus session on my first task\" : \"Start a 25-minute focus session\")}\n                        className=\"px-3 py-2 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium hover:bg-emerald-200 transition-all hover:scale-105 border border-emerald-200/50\"\n                      >\n                        ⏱️ Focus Timer\n                      </button>\n                      <button\n                        onClick={() => handleSubmit(\"Review my progress this week\")}\n                        className=\"px-3 py-2 bg-cyan-100 text-cyan-700 rounded-full text-xs font-medium hover:bg-cyan-200 transition-all hover:scale-105 border border-cyan-200/50\"\n                      >\n                        📊 Progress Review\n                      </button>\n                      <button\n                        onClick={() => handleSubmit(\"What's my study streak?\")}\n                        className=\"px-3 py-2 bg-pink-100 text-pink-700 rounded-full text-xs font-medium hover:bg-pink-200 transition-all hover:scale-105 border border-pink-200/50\"\n                      >\n                        🔥 Study Streak\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Enhanced Capabilities Section */}\n                <div className=\"p-4 rounded-lg bg-gradient-to-br from-blue-50/80 to-indigo-50/60 border border-blue-200/30\">\n                  <h4 className=\"text-xs font-mono text-blue-600 mb-3 tracking-wider font-semibold\">🚀 JARVIS CAPABILITIES</h4>\n                  <div className=\"grid grid-cols-1 gap-3 text-xs text-gray-600\">\n                    <div className=\"flex items-start gap-2\">\n                      <BookOpen className=\"w-3 h-3 text-blue-500 mt-0.5 flex-shrink-0\" />\n                      <span>Generate flashcards, quizzes, and study plans from any topic</span>\n                    </div>\n                    <div className=\"flex items-start gap-2\">\n                      <Target className=\"w-3 h-3 text-green-500 mt-0.5 flex-shrink-0\" />\n                      <span>Provide personalized explanations and problem-solving help</span>\n                    </div>\n                    <div className=\"flex items-start gap-2\">\n                      <Lightbulb className=\"w-3 h-3 text-purple-500 mt-0.5 flex-shrink-0\" />\n                      <span>Track your progress and suggest optimal study strategies</span>\n                    </div>\n                    <div className=\"flex items-start gap-2\">\n                      <Navigation className=\"w-3 h-3 text-orange-500 mt-0.5 flex-shrink-0\" />\n                      <span>Navigate the app and control study sessions with voice commands</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {messages.map((msg) => (\n              <div\n                key={msg.id}\n                className={`flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n              >\n                <div\n                  className={`max-w-[85%] ${\n                    msg.role === \"user\"\n                      ? \"bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-2xl rounded-br-md shadow-sm\"\n                      : \"bg-white/90 border border-gray-200/50 text-gray-800 rounded-2xl rounded-bl-md shadow-sm\"\n                  } px-4 py-3 relative overflow-hidden`}\n                >\n                  {msg.role === \"assistant\" && (\n                    <div className=\"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-blue-400/30 to-transparent\" />\n                  )}\n                  \n                  {msg.role === \"assistant\" && (\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <span className=\"text-[10px] font-mono text-blue-600\">JARVIS</span>\n                      <span className=\"text-[10px] text-gray-500\">\n                        {msg.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                      </span>\n                    </div>\n                  )}\n                  \n                  <p className=\"text-sm whitespace-pre-wrap leading-relaxed\">{msg.content}</p>\n                  \n                  {msg.action?.type === \"show_flashcards\" && msg.action.data?.flashcards && (\n                    <div className=\"mt-3 pt-3 border-t border-gray-200/50\">\n                      <p className=\"text-xs text-gray-600 font-mono\">\n                        {msg.action.data.flashcards.length} FLASHCARDS GENERATED\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n\n            {isProcessing && (\n              <div className=\"flex justify-start\">\n                <div className=\"bg-white/90 border border-gray-200/50 rounded-2xl rounded-bl-md px-4 py-3 shadow-sm\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-[10px] font-mono text-blue-600\">PROCESSING</span>\n                  </div>\n                  <div className=\"flex items-center gap-1 mt-2\">\n                    <div className=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\" style={{ animationDelay: \"0ms\" }} />\n                    <div className=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\" style={{ animationDelay: \"150ms\" }} />\n                    <div className=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\" style={{ animationDelay: \"300ms\" }} />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div ref={messagesEndRef} />\n          </div>\n\n          {/* Voice Notes Section */}\n          {isVoiceNotesMode && (\n            <div className=\"p-4 border-t border-gray-200/50 bg-gray-50/50\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h3 className=\"text-sm font-mono text-blue-600\">VOICE NOTES</h3>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={() => setVoiceNotes(\"\")}\n                    className=\"text-xs px-2 py-1 bg-red-100 text-red-600 rounded hover:bg-red-200\"\n                  >\n                    CLEAR\n                  </button>\n                  <button\n                    onClick={() => setIsVoiceNotesMode(false)}\n                    className=\"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300\"\n                  >\n                    EXIT\n                  </button>\n                </div>\n              </div>\n              <div className=\"bg-white/80 border border-gray-200/50 rounded-lg p-3 min-h-[100px] text-sm text-gray-800 whitespace-pre-wrap\">\n                {voiceNotes || \"Start speaking to add voice notes...\"}\n              </div>\n            </div>\n          )}\n\n          {/* Input area */}\n          <div className=\"relative p-4 border-t border-gray-200/50 bg-gray-50/80\">\n            {/* Suggested Commands */}\n            <div className=\"mb-4\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Lightbulb className=\"w-4 h-4 text-yellow-500\" />\n                <span className=\"text-xs font-medium text-gray-600 uppercase tracking-wide\">Suggested Commands</span>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {(() => {\n                  const commandParser = getCommandParser()\n                  const commandContext: CommandContext = {\n                    userId: user?.uid || '',\n                    currentPage: pathname,\n                    availableData: {\n                      tasks: context?.todayTasks,\n                      courses: context?.courses,\n                      habits: context?.habits\n                    }\n                  }\n                  const suggestions = commandParser.getSuggestedCommands(commandContext)\n\n                  return suggestions.map((suggestion, index) => (\n                    <button\n                      key={index}\n                      onClick={() => handleSubmit(suggestion)}\n                      disabled={isProcessing}\n                      className=\"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      {suggestion}\n                    </button>\n                  ))\n                })()}\n              </div>\n            </div>\n\n            {/* Voice listening indicator */}\n            {voiceState.isListening && (\n              <div className=\"absolute -top-12 left-1/2 -translate-x-1/2 px-4 py-2 bg-white border border-gray-300 rounded-full flex items-center gap-2 shadow-sm\">\n                <div className=\"w-3 h-3 bg-red-500 rounded-full animate-pulse\" />\n                <span className=\"text-xs text-gray-700 font-mono\">\n                  {voiceState.interimTranscript || \"LISTENING...\"}\n                </span>\n              </div>\n            )}\n\n            <form\n              onSubmit={(e) => {\n                e.preventDefault()\n                handleSubmit()\n              }}\n              className=\"flex items-center gap-3\"\n            >\n              {/* Voice toggle button */}\n              {isSpeechRecognitionSupported() && (\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    if (isVoiceNotesMode) {\n                      setIsVoiceNotesMode(false)\n                    } else if (voiceState.isListening) {\n                      stopListening()\n                    } else {\n                      setIsVoiceNotesMode(true)\n                      startListening()\n                      setShowWaveform(true)\n                    }\n                  }}\n                  className={`relative p-3 rounded-xl transition-all ${\n                    isVoiceNotesMode || voiceState.isListening\n                      ? \"bg-red-100 text-red-600 border border-red-300\"\n                      : \"bg-blue-50 text-blue-600 border border-blue-200 hover:bg-blue-100 hover:border-blue-300\"\n                  }`}\n                  title={isVoiceNotesMode ? \"Exit Voice Notes Mode\" : voiceState.isListening ? \"Stop Listening\" : \"Start Voice Input\"}\n                >\n                  {isVoiceNotesMode || voiceState.isListening ? (\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M9 10a1 1 0 000 2h6a1 1 0 000-2H9z\" />\n                    </svg>\n                  ) : (\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\n                    </svg>\n                  )}\n                </button>\n              )}\n\n              {/* Text input */}\n              <div className=\"flex-1 relative\">\n                <input\n                  ref={inputRef}\n                  type=\"text\"\n                  value={inputValue}\n                  onChange={(e) => setInputValue(e.target.value)}\n                  placeholder=\"Speak or type a command...\"\n                  className=\"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-sm text-gray-800 placeholder-gray-500 focus:outline-none focus:border-blue-400 focus:ring-1 focus:ring-blue-400/30 font-mono shadow-sm\"\n                  disabled={isProcessing}\n                />\n                <div className=\"absolute inset-0 rounded-xl pointer-events-none overflow-hidden\">\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/0 via-blue-500/5 to-blue-500/0 animate-shimmer\" />\n                </div>\n              </div>\n\n              {/* Send button */}\n              <button\n                type=\"submit\"\n                disabled={!inputValue.trim() || isProcessing}\n                className=\"p-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:from-blue-600 hover:to-indigo-700 transition-all shadow-sm\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\n                </svg>\n              </button>\n            </form>\n\n            {/* Footer info */}\n            <div className=\"flex items-center justify-between mt-3 text-[10px] text-gray-500 font-mono\">\n              <span>POWERED BY AI • {new Date().toLocaleDateString()}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Global styles for animations */}\n      <style jsx global>{`\n        @keyframes shimmer {\n          0% { transform: translateX(-100%); }\n          100% { transform: translateX(100%); }\n        }\n        .animate-shimmer {\n          animation: shimmer 3s infinite;\n        }\n      `}</style>\n    </>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5622, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/components/providers.tsx"],"sourcesContent":["\"use client\"\n\nimport { type ReactNode } from \"react\"\nimport { ErrorBoundary } from \"./error-boundary\"\nimport { AuthProvider } from \"./auth-provider\"\nimport { ThemeProvider } from \"./theme-provider\"\nimport { LoadingProvider } from \"@/components/ui/loading\"\nimport { JarvisAssistant } from \"./jarvis-assistant\"\n\nexport function Providers({ children }: { children: ReactNode }) {\n  return (\n    <ErrorBoundary>\n      <ThemeProvider attribute=\"class\" defaultTheme=\"dark\" enableSystem>\n        <AuthProvider>\n          <LoadingProvider>\n            {children}\n            <JarvisAssistant />\n          </LoadingProvider>\n        </AuthProvider>\n      </ThemeProvider>\n    </ErrorBoundary>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;AAPA;;;;;;;AASO,SAAS,UAAU,EAAE,QAAQ,EAA2B;IAC7D,qBACE,8OAAC,iJAAa;kBACZ,cAAA,8OAAC,iJAAa;YAAC,WAAU;YAAQ,cAAa;YAAO,YAAY;sBAC/D,cAAA,8OAAC,+IAAY;0BACX,cAAA,8OAAC,+IAAe;;wBACb;sCACD,8OAAC,qJAAe;;;;;;;;;;;;;;;;;;;;;;;;;;AAM5B"}},
    {"offset": {"line": 5680, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/components/ui/toast.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive border-destructive bg-destructive text-destructive-foreground\",\n        success: \"border-green-500 bg-green-50 text-green-900 dark:bg-green-900 dark:text-green-50\",\n        warning: \"border-yellow-500 bg-yellow-50 text-yellow-900 dark:bg-yellow-900 dark:text-yellow-50\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,gBAAgB,6KAAwB;AAE9C,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAwB;QACvB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qIACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,6KAAwB,CAAC,WAAW;AAEhE,MAAM,gBAAgB,IAAA,uKAAG,EACvB,6lBACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SAAS;YACT,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,mNAAgB,CAI5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE;IACnC,qBACE,8OAAC,yKAAoB;QACnB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;AACA,MAAM,WAAW,GAAG,yKAAoB,CAAC,WAAW;AAEpD,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,2KAAsB;QACrB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,sgBACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,2KAAsB,CAAC,WAAW;AAE5D,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,yVACA;QAEF,eAAY;QACX,GAAG,KAAK;kBAET,cAAA,8OAAC,iMAAC;YAAC,WAAU;;;;;;;;;;;AAGjB,WAAW,WAAW,GAAG,0KAAqB,CAAC,WAAW;AAE1D,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,0KAAqB,CAAC,WAAW;AAE1D,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,gLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,sBAAsB;QACnC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,gLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 5800, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/lib/hooks/useToast.ts"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5956, "column": 0}, "map": {"version":3,"sources":["file:///Users/hridey/Desktop/Studyassistant/components/ui/toaster.tsx"],"sourcesContent":["\"use client\"\n\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\nimport { useToast } from \"@/lib/hooks/useToast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AAQA;AAVA;;;;AAYO,SAAS;IACd,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,oIAAQ;IAE3B,qBACE,8OAAC,2IAAa;;YACX,OAAO,GAAG,CAAC,SAAU,EAAE,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,OAAO;gBAChE,qBACE,8OAAC,mIAAK;oBAAW,GAAG,KAAK;;sCACvB,8OAAC;4BAAI,WAAU;;gCACZ,uBAAS,8OAAC,wIAAU;8CAAE;;;;;;gCACtB,6BACC,8OAAC,8IAAgB;8CAAE;;;;;;;;;;;;wBAGtB;sCACD,8OAAC,wIAAU;;;;;;mBARD;;;;;YAWhB;0BACA,8OAAC,2IAAa;;;;;;;;;;;AAGpB"}}]
}