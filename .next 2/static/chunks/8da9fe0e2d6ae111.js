(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},13474,e=>{"use strict";var t=e.i(43476),s=e.i(22016),a=e.i(67881);let l=(0,e.i(75254).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var r=e.i(92270),i=e.i(39616),n=e.i(71645);e.i(51718);var o=e.i(18357),d=e.i(76009),c=e.i(18566),h=e.i(63270),u=e.i(63415),m=e.i(93539);function x(){let[e,x]=(0,n.useState)(!1),[p,f]=(0,n.useState)(null),[g,j]=(0,n.useState)(!0),b=(0,c.useRouter)();(0,n.useEffect)(()=>{let e=(0,o.onAuthStateChanged)(d.auth,e=>{f(e),j(!1)});return()=>e()},[]);let v=async()=>{try{await (0,o.signOut)(d.auth),b.push("/")}catch(e){console.error("Logout error:",e)}};return(0,t.jsx)("nav",{className:"sticky top-0 z-50 bg-slate-900/80 backdrop-blur-md border-b border-slate-700",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4 flex items-center justify-between",children:[(0,t.jsxs)(s.default,{href:"/dashboard",className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-bold text-sm",children:"SP"})}),(0,t.jsx)("span",{className:"font-serif text-xl font-bold text-slate-100",children:"StudyPal"})]}),(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-8",children:[(0,t.jsx)(s.default,{href:"/dashboard",className:"text-slate-400 hover:text-slate-100 transition",children:"Dashboard"}),(0,t.jsx)(s.default,{href:"/materials",className:"text-slate-400 hover:text-slate-100 transition",children:"Materials"}),(0,t.jsx)(s.default,{href:"/flashcards",className:"text-slate-400 hover:text-slate-100 transition",children:"Flashcards"}),(0,t.jsx)(s.default,{href:"/advanced-learning",className:"text-slate-400 hover:text-slate-100 transition",children:"AI Learning"}),(0,t.jsx)(s.default,{href:"/groups",className:"text-slate-400 hover:text-slate-100 transition",children:"Groups"}),(0,t.jsx)(s.default,{href:"/planner",className:"text-slate-400 hover:text-slate-100 transition",children:"Planner"}),(0,t.jsx)(s.default,{href:"/calendar",className:"text-slate-400 hover:text-slate-100 transition",children:"Calendar"}),(0,t.jsx)(s.default,{href:"/habits",className:"text-slate-400 hover:text-slate-100 transition",children:"Habits"}),(0,t.jsx)(s.default,{href:"/analytics",className:"text-slate-400 hover:text-slate-100 transition",children:"Analytics"}),(0,t.jsx)(s.default,{href:"/support",className:"text-slate-400 hover:text-slate-100 transition",children:"Support"})]}),(0,t.jsx)("div",{className:"hidden md:flex items-center gap-4",children:g?(0,t.jsx)("div",{className:"w-20 h-8 bg-slate-700 animate-pulse rounded"}):p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.ThemeToggle,{}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)(u.DropdownMenu,{children:[(0,t.jsx)(u.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)("button",{className:"flex items-center gap-2 text-slate-400 hover:text-slate-100 transition p-2 rounded-lg hover:bg-slate-700",children:(0,t.jsxs)(h.Avatar,{className:"w-8 h-8",children:[(0,t.jsx)(h.AvatarImage,{src:p.photoURL||""}),(0,t.jsx)(h.AvatarFallback,{children:p.displayName?p.displayName.charAt(0).toUpperCase():p.email?.charAt(0).toUpperCase()})]})})}),(0,t.jsxs)(u.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,t.jsx)(u.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(s.default,{href:"/profile",className:"flex items-center gap-2",children:[(0,t.jsxs)(h.Avatar,{className:"w-4 h-4",children:[(0,t.jsx)(h.AvatarImage,{src:p.photoURL||""}),(0,t.jsx)(h.AvatarFallback,{className:"text-xs",children:p.displayName?p.displayName.charAt(0).toUpperCase():p.email?.charAt(0).toUpperCase()})]}),"Profile"]})}),(0,t.jsx)(u.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(s.default,{href:"/settings",className:"flex items-center gap-2",children:[(0,t.jsx)(i.Settings,{className:"w-4 h-4"}),"Settings"]})}),(0,t.jsx)(u.DropdownMenuSeparator,{}),(0,t.jsxs)(u.DropdownMenuItem,{onClick:v,className:"flex items-center gap-2 text-red-600 focus:text-red-600",children:[(0,t.jsx)(r.LogOut,{className:"w-4 h-4"}),"Sign out"]})]})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.default,{href:"/login",children:(0,t.jsx)(a.Button,{variant:"ghost",className:"text-slate-300 hover:text-slate-100 hover:bg-slate-700",children:"Sign In"})}),(0,t.jsx)(s.default,{href:"/signup",children:(0,t.jsx)(a.Button,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Get Started"})})]})}),(0,t.jsx)("button",{className:"md:hidden",onClick:()=>x(!e),children:(0,t.jsx)(l,{className:"w-6 h-6"})}),e&&(0,t.jsx)("div",{className:"absolute top-full left-0 right-0 bg-slate-900 border-b border-slate-700 md:hidden",children:(0,t.jsxs)("div",{className:"flex flex-col p-4 gap-4",children:[(0,t.jsx)(s.default,{href:"/dashboard",className:"text-slate-400 hover:text-slate-100",children:"Dashboard"}),(0,t.jsx)(s.default,{href:"/materials",className:"text-slate-400 hover:text-slate-100",children:"Materials"}),(0,t.jsx)(s.default,{href:"/flashcards",className:"text-slate-400 hover:text-slate-100",children:"Flashcards"}),(0,t.jsx)(s.default,{href:"/groups",className:"text-slate-400 hover:text-slate-100",children:"Groups"}),(0,t.jsx)(s.default,{href:"/planner",className:"text-slate-400 hover:text-slate-100",children:"Planner"}),(0,t.jsx)(s.default,{href:"/calendar",className:"text-slate-400 hover:text-slate-100",children:"Calendar"}),(0,t.jsx)(s.default,{href:"/habits",className:"text-slate-400 hover:text-slate-100",children:"Habits"}),(0,t.jsx)(s.default,{href:"/analytics",className:"text-slate-400 hover:text-slate-100",children:"Analytics"}),(0,t.jsx)(s.default,{href:"/support",className:"text-slate-400 hover:text-slate-100",children:"Support"}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,t.jsx)("span",{className:"text-slate-400",children:"Theme"}),(0,t.jsx)(m.ThemeToggle,{})]}),p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-400 py-2",children:[(0,t.jsxs)(h.Avatar,{className:"w-4 h-4",children:[(0,t.jsx)(h.AvatarImage,{src:p.photoURL||""}),(0,t.jsx)(h.AvatarFallback,{className:"text-xs",children:p.displayName?p.displayName.charAt(0).toUpperCase():p.email?.charAt(0).toUpperCase()})]}),(0,t.jsx)("span",{children:p.displayName||p.email?.split("@")[0]})]}),(0,t.jsxs)(a.Button,{variant:"ghost",onClick:v,className:"w-full justify-start text-slate-300 hover:text-slate-100 hover:bg-slate-700",children:[(0,t.jsx)(r.LogOut,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.default,{href:"/login",children:(0,t.jsx)(a.Button,{variant:"ghost",className:"w-full justify-start text-slate-300 hover:text-slate-100 hover:bg-slate-700",children:"Sign In"})}),(0,t.jsx)(s.default,{href:"/signup",children:(0,t.jsx)(a.Button,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Get Started"})})]})]})})]})})}e.s(["default",()=>x],13474)},89954,e=>{"use strict";var t=e.i(43476),s=e.i(13474),a=e.i(67881),l=e.i(22016),r=e.i(63488),i=e.i(70756),n=e.i(53145),o=e.i(94814),d=e.i(65638),c=e.i(71645);e.i(51718);var h=e.i(18357),u=e.i(76009),m=e.i(18566);e.i(36180);var x=e.i(98925);let p=d.object({email:d.string().email("Please enter a valid email address"),password:d.string().min(6,"Password must be at least 6 characters")});function f(){let e=(0,m.useRouter)(),[d,f]=(0,c.useState)(!1),[g,j]=(0,c.useState)(null),[b,v]=(0,c.useState)(!1),{register:N,handleSubmit:y,formState:{errors:w}}=(0,n.useForm)({resolver:(0,o.zodResolver)(p)}),S=async t=>{f(!0),j(null);try{console.log("Attempting login for:",t.email);let s=await (0,h.signInWithEmailAndPassword)(u.auth,t.email,t.password);console.log("Login successful!",s.user.email,s.user.uid),await new Promise(e=>setTimeout(e,100)),e.push("/materials")}catch(t){console.error("Login error:",t.code,t.message);let e="Failed to sign in. Please check your credentials.";"auth/user-not-found"===t.code||"auth/invalid-credential"===t.code?e="Invalid email or password. Please check your credentials.":"auth/wrong-password"===t.code?e="Incorrect password. Please try again.":"auth/invalid-email"===t.code?e="Invalid email address. Please check and try again.":"auth/user-disabled"===t.code?e="This account has been disabled. Please contact support.":"auth/too-many-requests"===t.code?e="Too many failed attempts. Please try again later.":"auth/network-request-failed"===t.code?e="Network error. Please check your connection and try again.":"auth/configuration-not-found"===t.code||"auth/operation-not-allowed"===t.code?e="Email/Password authentication is not enabled. Please enable it in Firebase Console > Authentication > Sign-in method.":t.message&&(e=t.message),j(e)}finally{f(!1)}},k=async()=>{v(!0),j(null);try{let t=(await (0,h.signInWithPopup)(u.auth,u.googleProvider)).user;if(t)try{let e=(0,x.doc)(u.db,"users",t.uid);(await (0,x.getDoc)(e)).exists()||await (0,x.setDoc)(e,{uid:t.uid,email:t.email,name:t.displayName||t.email?.split("@")[0],photoURL:t.photoURL??null,provider:"google",createdAt:new Date().toISOString(),subjects:[],preferences:{pace:"normal",dailyHours:3}})}catch(e){console.warn("Could not save user profile to Firestore:",e.message)}e.push("/materials")}catch(t){let e="Google sign-in failed. Please try again.";"auth/popup-closed-by-user"===t.code?e="Sign-in pop-up was closed before completing the process.":"auth/cancelled-popup-request"===t.code?e="Another sign-in attempt is already in progress.":"auth/popup-blocked"===t.code?e="The pop-up was blocked. Please allow pop-ups and try again.":"auth/account-exists-with-different-credential"===t.code?e="An account already exists with the same email but different sign-in credentials.":t.message&&(e=t.message),j(e)}finally{v(!1)}};return(0,t.jsxs)("main",{className:"min-h-screen bg-background",children:[(0,t.jsx)(s.default,{}),(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-60px)]",children:(0,t.jsx)("div",{className:"w-full max-w-md px-4 py-8",children:(0,t.jsxs)("div",{className:"rounded-xl bg-card border border-border p-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-serif font-bold text-foreground mb-2",children:"Welcome Back"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-8",children:"Sign in to your StudyPal account"}),g&&(0,t.jsx)("div",{className:"mb-4 p-3 rounded-lg bg-destructive/10 border border-destructive/20 text-destructive text-sm",children:g}),(0,t.jsxs)("form",{onSubmit:y(S),className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Email"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.Mail,{className:"w-5 h-5 absolute left-3 top-3 text-muted-foreground"}),(0,t.jsx)("input",{...N("email"),type:"email",placeholder:"you@example.com",className:"w-full pl-10 pr-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none transition-colors",disabled:d})]}),w.email&&(0,t.jsx)("p",{className:"mt-1 text-sm text-destructive",children:w.email.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.Lock,{className:"w-5 h-5 absolute left-3 top-3 text-muted-foreground"}),(0,t.jsx)("input",{...N("password"),type:"password",placeholder:"••••••••",className:"w-full pl-10 pr-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none transition-colors",disabled:d})]}),w.password&&(0,t.jsx)("p",{className:"mt-1 text-sm text-destructive",children:w.password.message})]}),(0,t.jsx)(a.Button,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:d,children:d?"Signing In...":"Sign In"})]}),(0,t.jsx)("div",{className:"text-right mt-4",children:(0,t.jsx)(l.default,{href:"#",className:"text-sm text-primary hover:underline",children:"Forgot password?"})}),(0,t.jsxs)("div",{className:"relative my-6",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-border"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"px-2 bg-card text-muted-foreground",children:"Or continue with"})})]}),(0,t.jsx)(a.Button,{variant:"outline",className:"w-full bg-transparent",type:"button",onClick:k,disabled:b,children:b?"Connecting to Google...":"Continue with Google"}),(0,t.jsxs)("p",{className:"text-center text-muted-foreground text-sm mt-6",children:["Don't have an account?"," ",(0,t.jsx)(l.default,{href:"/signup",className:"text-primary hover:underline",children:"Sign up"})]})]})})})]})}e.s(["default",()=>f])}]);