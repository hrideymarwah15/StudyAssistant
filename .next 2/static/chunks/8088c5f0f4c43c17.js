(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,s,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return t}});let t=e=>{}},10980,61911,39312,e=>{"use strict";var s=e.i(75254);let r=(0,s.default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>r],10980);let t=(0,s.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],61911);let a=(0,s.default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>a],39312)},71689,e=>{"use strict";let s=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},74201,e=>{"use strict";var s=e.i(43476),r=e.i(59015),t=e.i(67881);let a=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var l=e.i(61911),d=e.i(39616),n=e.i(7233),i=e.i(31278),o=e.i(71689),c=e.i(71645),u=e.i(18566);e.i(51718);var m=e.i(18357),x=e.i(76009),h=e.i(71898);function p({params:e}){let{id:p}=(0,c.use)(e),f=(0,u.useRouter)(),[b,g]=(0,c.useState)(null),[j,y]=(0,c.useState)(!0),[v,N]=(0,c.useState)(null),[w,k]=(0,c.useState)([]),[S,C]=(0,c.useState)(""),[M,A]=(0,c.useState)(!1),B=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e=(0,m.onAuthStateChanged)(x.auth,async e=>{if(g(e),e)try{let e=await (0,h.getStudyGroup)(p);e?N(e):f.push("/groups")}catch(e){console.error("Error loading group:",e),f.push("/groups")}else f.push("/login");y(!1)});return()=>e()},[p,f]),(0,c.useEffect)(()=>{if(!p)return;let e=(0,h.subscribeToGroupMessages)(p,e=>{k(e)});return()=>e()},[p]),(0,c.useEffect)(()=>{B.current?.scrollIntoView({behavior:"smooth"})},[w]);let I=async()=>{if(S.trim()&&b&&v){A(!0);try{await (0,h.sendGroupMessage)({groupId:p,userId:b.uid,userName:b.displayName||b.email?.split("@")[0]||"Anonymous",content:S.trim()}),C("")}catch(e){console.error("Error sending message:",e)}A(!1)}};return j?(0,s.jsx)("main",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):b&&v?(0,s.jsx)(r.default,{title:v?.name||"Group Chat",subtitle:v?`${v.memberCount} members â€¢ ${v.subject}`:"Connect with fellow students",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-6 h-[calc(100vh-60px)] flex gap-6",children:[(0,s.jsxs)("div",{className:"flex-1 flex flex-col rounded-xl border border-border overflow-hidden bg-card",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>f.push("/groups"),className:"text-muted-foreground hover:text-foreground",children:(0,s.jsx)(o.ArrowLeft,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:v.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[v.memberCount," members â€¢ ",v.subject]})]})]}),(0,s.jsx)(t.Button,{size:"sm",variant:"outline",children:(0,s.jsx)(d.Settings,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===w.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[(0,s.jsx)(l.Users,{className:"w-12 h-12 mb-4"}),(0,s.jsx)("p",{children:"No messages yet. Start the conversation!"})]}):w.map(e=>{var r;let t,a;return(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("span",{className:"text-2xl flex-shrink-0",children:(r=e.userName,t=["ðŸ‘¤","ðŸ‘©","ðŸ‘¨","ðŸ§‘","ðŸ‘§","ðŸ§”","ðŸ‘±","ðŸ‘´"],a=r.charCodeAt(0)%t.length,t[a])}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsx)("span",{className:`font-semibold ${e.userId===b.uid?"text-primary":"text-foreground"}`,children:e.userId===b.uid?"You":e.userName}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:e.createdAt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsx)("p",{className:"text-foreground mt-1",children:e.content})]})]},e.id)}),(0,s.jsx)("div",{ref:B})]}),(0,s.jsxs)("div",{className:"p-4 border-t border-border flex gap-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Type a message...",value:S,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),I())},disabled:M,className:"flex-1 px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none transition-colors"}),(0,s.jsx)(t.Button,{onClick:I,disabled:M||!S.trim(),className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:M?(0,s.jsx)(i.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(a,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"hidden lg:flex w-64 flex-col rounded-xl border border-border bg-card overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-border",children:(0,s.jsxs)("h3",{className:"font-semibold text-foreground flex items-center gap-2 mb-3",children:[(0,s.jsx)(l.Users,{className:"w-4 h-4"}),"Group Info"]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Subject"}),(0,s.jsx)("p",{className:"font-medium text-foreground",children:v.subject})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Members"}),(0,s.jsx)("p",{className:"font-medium text-foreground",children:v.memberCount})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Created"}),(0,s.jsx)("p",{className:"font-medium text-foreground",children:v.createdAt.toLocaleDateString()})]}),v.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Description"}),(0,s.jsx)("p",{className:"text-foreground",children:v.description})]})]}),(0,s.jsx)("div",{className:"p-4 border-t border-border",children:(0,s.jsxs)(t.Button,{size:"sm",variant:"outline",className:"w-full bg-transparent",children:[(0,s.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"Invite Member"]})})]})]})}):null}e.s(["default",()=>p],74201)}]);