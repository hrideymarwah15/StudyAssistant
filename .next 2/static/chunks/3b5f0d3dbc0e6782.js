(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},10980,61911,39312,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);e.s(["BookOpen",()=>r],10980);let a=(0,t.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>a],61911);let s=(0,t.default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>s],39312)},83086,e=>{"use strict";let t=(0,e.i(75254).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>t],83086)},67240,e=>{"use strict";let t=(0,e.i(75254).default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],67240)},69074,78583,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>r],69074);let a=(0,t.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>a],78583)},58428,e=>{"use strict";var t=e.i(43476),r=e.i(59015),a=e.i(67881),s=e.i(7233),l=e.i(67240),n=e.i(31278),o=e.i(37727),i=e.i(83086);let c=(0,e.i(75254).default)("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var d=e.i(69074),u=e.i(78583),m=e.i(71645),x=e.i(18566);e.i(51718);var h=e.i(18357),p=e.i(76009),f=e.i(71898),b=e.i(96556);async function y(e){return new Promise((t,r)=>{let a=new FileReader,s=e.name.toLowerCase();a.onload=async r=>{try{let a=r.target?.result;if(s.endsWith(".pdf")){if("string"==typeof a){let r=function(e){try{let t=e.match(/\(([^)]+)\)/g);if(t)return t.map(e=>e.slice(1,-1)).filter(e=>e.length>2&&/[a-zA-Z]/.test(e)).join(" ");return""}catch{return""}}(a);t(r||`[PDF Document: ${e.name}]

Please copy and paste the text content from this PDF for best results, or the AI will generate flashcards based on the filename.`)}else if(a instanceof ArrayBuffer){let r=await g(a);t(r||`[PDF Document: ${e.name}]

Please copy and paste the text content from this PDF for best results.`)}return}if(s.endsWith(".docx")&&a instanceof ArrayBuffer){let e=await j(a);t(e);return}"string"==typeof a?t(a):t(`[Document: ${e.name}] - Could not extract text content.`)}catch(r){console.error("Error processing file:",r),t(`[Document: ${e.name}] - Error reading file content.`)}},a.onerror=()=>{r(Error("Failed to read file"))},s.endsWith(".pdf")||s.endsWith(".docx")||s.endsWith(".doc")?a.readAsArrayBuffer(e):a.readAsText(e)})}async function g(e){try{let t=new Uint8Array(e),r="",a=new TextDecoder("utf-8",{fatal:!1}).decode(t),s=a.match(/stream[\r\n]+([\s\S]*?)[\r\n]+endstream/g);if(s)for(let e of s){let t=e.replace(/stream[\r\n]+/,"").replace(/[\r\n]+endstream/,"").replace(/[^\x20-\x7E\n\r]/g," ").replace(/\s+/g," ").trim();t.length>20&&(r+=t+"\n")}let l=a.match(/\(([^)]+)\)\s*Tj/g);if(l)for(let e of l){let t=e.match(/\(([^)]+)\)/);t&&t[1]&&(r+=t[1]+" ")}return r.trim()||""}catch(e){return console.error("PDF extraction error:",e),""}}async function j(e){try{let t=new Uint8Array(e),r=new TextDecoder("utf-8",{fatal:!1}).decode(t),a=r.match(/<w:t[^>]*>([^<]*)<\/w:t>/g);if(a){let e=a.map(e=>{let t=e.match(/<w:t[^>]*>([^<]*)<\/w:t>/);return t?t[1]:""}).filter(e=>e.length>0).join(" ");if(e.length>50)return e}let s=r.replace(/<[^>]+>/g," ").replace(/[^\x20-\x7E\n\r]/g," ").replace(/\s+/g," ").trim().split(" ").filter(e=>e.length>2&&/^[a-zA-Z]+$/.test(e));if(s.length>20)return s.join(" ");return"[Word Document] - For best results with .docx files, please copy and paste the text content directly."}catch(e){return console.error("DOCX extraction error:",e),"[Word Document] - Could not extract text. Please copy and paste the content."}}e.i(47167);var k=e.i(47163),v=e.i(46696),w=e.i(54858);function N(){let e=(0,x.useRouter)(),[g,j]=(0,m.useState)(null),[N,C]=(0,m.useState)(!0),[S,T]=(0,m.useState)([]),[M,F]=(0,m.useState)(null),[A,D]=(0,m.useState)([]),[P,I]=(0,m.useState)(0),[B,E]=(0,m.useState)(!1),[L,$]=(0,m.useState)(!1),[R,z]=(0,m.useState)(!1),[U,H]=(0,m.useState)(!1),[W,G]=(0,m.useState)(!1),[q,O]=(0,m.useState)(!1),[X,Z]=(0,m.useState)("normal"),[_,K]=(0,m.useState)([]),[Q,V]=(0,m.useState)({front:"",back:"",difficulty:"medium"}),[Y,J]=(0,m.useState)({name:"",subject:""}),[ee,et]=(0,m.useState)({topic:"",count:5,difficulty:"medium",sourceType:"topic",sourceContent:"",selectedMaterialId:""}),[er,ea]=(0,m.useState)([]),[es,el]=(0,m.useState)([]),[en,eo]=(0,m.useState)(""),ei=(0,m.useRef)(null);(0,m.useEffect)(()=>{let t=(0,h.onAuthStateChanged)(p.auth,async t=>{if(j(t),t)try{let e=await (0,f.getFlashcardDecks)(t.uid);T(e);let r=await (0,f.getMaterials)(t.uid);ea(r)}catch(e){console.error("Error loading decks:",e)}else e.push("/login");C(!1)});return()=>t()},[e]);let ec=async e=>{F(e),D(await (0,f.getFlashcards)(e.id)),I(0),E(!1)},ed=async()=>{if(g&&Y.name&&Y.subject){G(!0);try{await (0,f.createFlashcardDeck)({name:Y.name,subject:Y.subject,userId:g.uid});let e=await (0,f.getFlashcardDecks)(g.uid);T(e),$(!1),J({name:"",subject:""})}catch(e){console.error("Error creating deck:",e),alert("Error creating deck: "+(e?.message||"Unknown error"))}finally{G(!1)}}},eu=async()=>{if(g&&M&&Q.front&&Q.back)try{await (0,f.addFlashcard)({front:Q.front,back:Q.back,difficulty:Q.difficulty,deckId:M.id,userId:g.uid});let e=await (0,f.getFlashcards)(M.id);D(e),z(!1),V({front:"",back:"",difficulty:"medium"})}catch(e){console.error("Error adding card:",e)}},em=async e=>{let t=e.target.files;if(!t||0===t.length)return;let r=Array.from(t);el(r),eo("Reading files...");try{let e="";for(let t=0;t<r.length;t++){let a=r[t];eo(`Reading file ${t+1}/${r.length}: ${a.name}`);let s=await y(a);e+=`

--- Content from: ${a.name} ---

${s}`}et(t=>({...t,sourceContent:e.trim(),sourceType:"file"})),eo(`${r.length} file(s) loaded successfully`)}catch(e){console.error("Error reading files:",e),eo("Error reading files"),alert("Failed to read file content")}},ex=async()=>{if(g&&M){if("topic"===ee.sourceType&&!ee.topic)return void alert("Please enter a topic");if("text"===ee.sourceType&&!ee.sourceContent)return void alert("Please enter some text content");if("file"===ee.sourceType&&0===es.length)return void alert("Please upload at least one file");if("file"===ee.sourceType&&!ee.sourceContent)return void alert("Files are still being processed. Please wait.");O(!0);try{let e,t="",r=ee.topic;if("material"===ee.sourceType&&ee.selectedMaterialId){let e=er.find(e=>e.id===ee.selectedMaterialId);if(!e||!e.content)return void alert("Selected material not found or has no content.");t=e.content,r=r||e.title||e.subject||"Study Material"}else("text"===ee.sourceType||"file"===ee.sourceType)&&(t=ee.sourceContent);r||(r=es.length>0?es.map(e=>e.name.replace(/\.[^/.]+$/,"")).join(", "):"Study Material"),console.log("Generating flashcards with content length:",t.length),console.log("Topic:",r);try{let a=await (0,w.generateFlashcards)({text:t||void 0,topic:t?void 0:r,num_cards:ee.count,use_memory:!t});e=a.flashcards.map(e=>({front:e.question,back:e.answer})),v.toast.info(`Generated ${e.length} flashcards using AI backend`,{description:a.source,duration:3e3})}catch(a){console.warn("AI backend failed, using fallback:",a),e=await (0,b.generateFlashcards)(t,r,ee.count,ee.difficulty),v.toast.info("Generated flashcards using fallback AI",{duration:2e3})}for(let t of e)await (0,f.addFlashcard)({front:t.front,back:t.back,difficulty:ee.difficulty,deckId:M.id,userId:g.uid});let a=await (0,f.getFlashcards)(M.id);D(a);let s=await (0,f.getFlashcardDecks)(g.uid);T(s),H(!1),eh(),v.toast.success(`Successfully generated ${e.length} flashcards!`,{description:"Your new flashcards are ready to study.",duration:4e3,action:{label:"Start Studying",onClick:()=>{F(M)}}})}catch(e){console.error("Error generating flashcards:",e),v.toast.error("Failed to generate flashcards",{description:e?.message||"Please try again or check your input.",duration:5e3,action:{label:"Try Again",onClick:()=>ex()}})}finally{O(!1)}}},eh=()=>{et({topic:"",count:5,difficulty:"medium",sourceType:"topic",sourceContent:"",selectedMaterialId:""}),el([]),eo(""),ei.current&&(ei.current.value="")},ep=()=>{I((P+1)%A.length),E(!1)},ef=()=>{I(0===P?A.length-1:P-1),E(!1)};return((0,m.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key){case" ":e.preventDefault(),E(!B);break;case"ArrowRight":e.preventDefault(),ep();break;case"ArrowLeft":e.preventDefault(),ef();break;case"r":case"R":e.preventDefault(),I(0),E(!1)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[P,B,A.length]),N)?(0,t.jsx)("main",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:(0,t.jsx)(n.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):g?(0,t.jsxs)(r.default,{title:"Flashcards",subtitle:"Create and review flashcards to master key concepts",children:[(0,t.jsx)("div",{className:"mb-12",children:(0,t.jsx)("p",{className:"text-slate-400",children:"Study with flashcards"})}),M?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Button,{variant:"outline",onClick:()=>F(null),className:"mb-6",children:"← Back to Decks"}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-slate-100",children:M.name}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(a.Button,{variant:"outline",onClick:()=>H(!0),className:"border-primary/50 text-primary hover:bg-primary/10",children:[(0,t.jsx)(i.Sparkles,{className:"w-4 h-4 mr-2"})," AI Generate"]}),(0,t.jsxs)(a.Button,{onClick:()=>z(!0),children:[(0,t.jsx)(s.Plus,{className:"w-4 h-4 mr-2"})," Add Card"]})]})]}),0===A.length?(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("p",{className:"text-slate-400 mb-4",children:"No cards in this deck yet"}),(0,t.jsx)(a.Button,{onClick:()=>z(!0),children:"Add First Card"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mb-12",children:(0,t.jsx)("div",{onClick:()=>E(!B),className:"min-h-80 max-h-[500px] rounded-2xl bg-gradient-to-br from-primary/20 to-accent/20 border-2 border-primary/30 cursor-pointer flex items-center justify-center p-8 hover:shadow-lg transition-all overflow-hidden",children:(0,t.jsxs)("div",{className:"text-center w-full max-w-3xl",children:[(0,t.jsxs)("p",{className:"text-sm text-slate-400 mb-4",children:[B?"Answer":"Question"," (",P+1,"/",A.length,")"]}),(0,t.jsx)("div",{className:"max-h-60 overflow-y-auto px-4",children:(0,t.jsx)("p",{className:"text-xl md:text-2xl lg:text-3xl font-serif font-bold text-slate-100 leading-relaxed",children:B?A[P].back:A[P].front})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-6",children:"Click to flip • Space to flip • ← → to navigate • R to reset"})]})})}),(0,t.jsxs)("div",{className:"flex justify-center gap-4 mb-4",children:[(0,t.jsx)(a.Button,{variant:"normal"===X?"default":"outline",onClick:()=>Z("normal"),children:"Normal"}),(0,t.jsx)(a.Button,{variant:"spaced"===X?"default":"outline",onClick:()=>{0===A.length||(K((0,k.generateSpacedRepetitionSchedule)(A.map(e=>({id:e.id,lastReviewed:e.lastReviewed||new Date(0),difficulty:"easy"===e.difficulty?1:"hard"===e.difficulty?3:2,correctStreak:0,totalAttempts:0})))),Z("spaced"),I(0),E(!1))},children:"Spaced Repetition"})]}),(0,t.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,t.jsx)(a.Button,{variant:"outline",onClick:ef,children:"Previous"}),(0,t.jsx)(a.Button,{onClick:ep,children:"Next"}),(0,t.jsxs)(a.Button,{variant:"outline",onClick:()=>{I(0),E(!1)},children:[(0,t.jsx)(l.RotateCcw,{className:"w-4 h-4 mr-2"})," Reset"]})]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:S.map(e=>(0,t.jsxs)("div",{onClick:()=>ec(e),className:"p-6 rounded-lg bg-slate-800/50 border border-slate-700 hover:border-primary/50 cursor-pointer transition-all",children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-100 mb-2",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-slate-400 mb-2",children:e.subject}),(0,t.jsxs)("p",{className:"text-xs text-primary",children:[e.cardCount," cards"]})]},e.id))}),(0,t.jsxs)("div",{className:"p-8 rounded-lg bg-slate-800/50 border border-slate-700 text-center",children:[(0,t.jsx)(s.Plus,{className:"w-8 h-8 text-primary mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-100 mb-2",children:"Create New Deck"}),(0,t.jsx)("p",{className:"text-slate-400 mb-6",children:"Create a new flashcard deck"}),(0,t.jsx)(a.Button,{onClick:()=>$(!0),children:"Create Deck"})]})]}),L&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-card rounded-xl p-6 w-full max-w-md border border-border",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Create Deck"}),(0,t.jsx)("button",{onClick:()=>$(!1),children:(0,t.jsx)(o.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{type:"text",placeholder:"Deck Name",value:Y.name,onChange:e=>J({...Y,name:e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border"}),(0,t.jsx)("input",{type:"text",placeholder:"Subject",value:Y.subject,onChange:e=>J({...Y,subject:e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border"}),(0,t.jsx)(a.Button,{className:"w-full",onClick:ed,disabled:W||!Y.name||!Y.subject,children:W?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Loader2,{className:"w-4 h-4 mr-2 animate-spin"})," Creating..."]}):"Create"})]})]})}),R&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-card rounded-xl p-6 w-full max-w-md border border-border",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:"Add Card"}),(0,t.jsx)("button",{onClick:()=>z(!1),children:(0,t.jsx)(o.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("textarea",{placeholder:"Question (Front)",value:Q.front,onChange:e=>V({...Q,front:e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border resize-none",rows:3}),(0,t.jsx)("textarea",{placeholder:"Answer (Back)",value:Q.back,onChange:e=>V({...Q,back:e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border resize-none",rows:3}),(0,t.jsxs)("select",{value:Q.difficulty,onChange:e=>V({...Q,difficulty:e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border",children:[(0,t.jsx)("option",{value:"easy",children:"Easy"}),(0,t.jsx)("option",{value:"medium",children:"Medium"}),(0,t.jsx)("option",{value:"hard",children:"Hard"})]}),(0,t.jsx)(a.Button,{className:"w-full",onClick:eu,children:"Add Card"})]})]})}),U&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,t.jsxs)("div",{className:"bg-card rounded-xl p-6 w-full max-w-lg border border-border my-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,t.jsx)(c,{className:"w-5 h-5 text-primary"}),"AI Generate Flashcards"]}),(0,t.jsx)("button",{onClick:()=>{H(!1),eh()},children:(0,t.jsx)(o.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-2 block",children:"Generate from:"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("button",{onClick:()=>et({...ee,sourceType:"topic",sourceContent:""}),className:`p-3 rounded-lg border text-sm text-left transition-all ${"topic"===ee.sourceType?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50"}`,children:[(0,t.jsx)(i.Sparkles,{className:"w-4 h-4 mb-1"}),"Topic Only"]}),(0,t.jsxs)("button",{onClick:()=>et({...ee,sourceType:"file"}),className:`p-3 rounded-lg border text-sm text-left transition-all ${"file"===ee.sourceType?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50"}`,children:[(0,t.jsx)(d.Upload,{className:"w-4 h-4 mb-1"}),"Upload File"]}),(0,t.jsxs)("button",{onClick:()=>et({...ee,sourceType:"text"}),className:`p-3 rounded-lg border text-sm text-left transition-all ${"text"===ee.sourceType?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50"}`,children:[(0,t.jsx)(u.FileText,{className:"w-4 h-4 mb-1"}),"Paste Text"]}),(0,t.jsxs)("button",{onClick:()=>et({...ee,sourceType:"material"}),className:`p-3 rounded-lg border text-sm text-left transition-all ${"material"===ee.sourceType?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50"}`,children:[(0,t.jsx)(u.FileText,{className:"w-4 h-4 mb-1"}),"My Materials"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"topic"===ee.sourceType?"Topic / Subject *":"Topic / Subject (optional)"}),(0,t.jsx)("input",{type:"text",placeholder:"e.g., Biology, Calculus, World War II...",value:ee.topic,onChange:e=>et({...ee,topic:e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none"})]}),"file"===ee.sourceType&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Upload Source Files"}),(0,t.jsx)("input",{ref:ei,type:"file",multiple:!0,accept:".txt,.md,.csv,.pdf,.doc,.docx,.rtf",onChange:em,className:"hidden"}),(0,t.jsx)("div",{onClick:()=>ei.current?.click(),className:"w-full p-4 rounded-lg border-2 border-dashed border-border hover:border-primary/50 cursor-pointer text-center transition-all",children:es.length>0?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-primary",children:[(0,t.jsx)(u.FileText,{className:"w-5 h-5"}),(0,t.jsxs)("span",{className:"font-medium",children:[es.length," file(s) selected"]})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground max-h-16 overflow-y-auto",children:es.map((e,r)=>(0,t.jsx)("div",{children:e.name},r))})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Upload,{className:"w-6 h-6 mx-auto mb-2 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click to upload multiple files"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"PDF, Word, TXT, MD supported"})]})}),en&&(0,t.jsx)("p",{className:`text-xs mt-1 ${en.includes("Error")?"text-red-500":"text-green-500"}`,children:en}),ee.sourceContent&&(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Content loaded: ",ee.sourceContent.length.toLocaleString()," characters"]}),ee.sourceContent.length>5e5&&(0,t.jsx)("p",{className:"text-xs text-yellow-500",children:"⚠️ Large content will be truncated to fit AI limits (~500k chars max)"})]})]}),"text"===ee.sourceType&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Paste Study Content"}),(0,t.jsx)("textarea",{placeholder:"Paste your notes, textbook content, or any study material here...",value:ee.sourceContent,onChange:e=>et({...ee,sourceContent:e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none resize-none",rows:5}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[ee.sourceContent.length.toLocaleString()," characters",ee.sourceContent.length>5e5&&(0,t.jsx)("span",{className:"text-yellow-500 ml-2",children:"⚠️ Will be truncated"})]})]}),"material"===ee.sourceType&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Select from Materials"}),0===er.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground p-4 text-center border border-dashed border-border rounded-lg",children:"No materials found. Upload materials first in the Materials section."}):(0,t.jsxs)("select",{value:ee.selectedMaterialId,onChange:e=>et({...ee,selectedMaterialId:e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none",children:[(0,t.jsx)("option",{value:"",children:"Select a material..."}),er.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.title," (",e.subject,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Number of Cards"}),(0,t.jsx)("input",{type:"number",min:"1",max:"20",value:ee.count,onChange:e=>et({...ee,count:parseInt(e.target.value)||5}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Difficulty Level"}),(0,t.jsxs)("select",{value:ee.difficulty,onChange:e=>et({...ee,difficulty:e.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none",children:[(0,t.jsx)("option",{value:"easy",children:"Easy - Simple, concise answers"}),(0,t.jsx)("option",{value:"medium",children:"Medium - Balanced questions"}),(0,t.jsx)("option",{value:"hard",children:"Hard - In-depth analysis"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Powered by Google Gemini AI"}),(0,t.jsx)(a.Button,{className:"w-full bg-gradient-to-r from-primary to-purple-600",onClick:ex,disabled:q||"topic"===ee.sourceType&&!ee.topic,children:q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Loader2,{className:"w-4 h-4 mr-2 animate-spin"})," Generating with AI..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Sparkles,{className:"w-4 h-4 mr-2"})," Generate Flashcards"]})})]})]})})]}):null}e.s(["default",()=>N],58428)}]);