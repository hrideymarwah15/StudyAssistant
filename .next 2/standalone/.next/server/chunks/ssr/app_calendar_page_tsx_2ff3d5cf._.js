module.exports=[37913,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(45404),f=a.i(27508),g=a.i(13749),h=a.i(50522),i=a.i(15618),j=a.i(41710),k=a.i(24987),l=a.i(41675),m=a.i(70106);let n=(0,m.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),o=(0,m.default)("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);var p=a.i(53722);let q=(0,m.default)("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);var r=a.i(60246);let s=(0,m.default)("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);var t=a.i(33508),u=a.i(61545),v=a.i(44194),w=a.i(40695),x=a.i(19337);let y=Array.from({length:18},(a,b)=>b+6),z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A={class:"bg-blue-500/20 border-blue-500 text-blue-400",lab:"bg-purple-500/20 border-purple-500 text-purple-400",assignment:"bg-orange-500/20 border-orange-500 text-orange-400",exam:"bg-red-500/20 border-red-500 text-red-400","study-session":"bg-green-500/20 border-green-500 text-green-400",contest:"bg-yellow-500/20 border-yellow-500 text-yellow-400",meeting:"bg-cyan-500/20 border-cyan-500 text-cyan-400",focus:"bg-pink-500/20 border-pink-500 text-pink-400",break:"bg-indigo-500/20 border-indigo-500 text-indigo-400",other:"bg-gray-500/20 border-gray-500 text-gray-400"},B={class:(0,b.jsx)(p.BookOpen,{className:"w-3 h-3"}),lab:(0,b.jsx)(q,{className:"w-3 h-3"}),assignment:(0,b.jsx)(j.Clock,{className:"w-3 h-3"}),exam:(0,b.jsx)(p.BookOpen,{className:"w-3 h-3"}),"study-session":(0,b.jsx)(j.Clock,{className:"w-3 h-3"}),contest:(0,b.jsx)(o,{className:"w-3 h-3"}),meeting:(0,b.jsx)(r.Users,{className:"w-3 h-3"}),focus:(0,b.jsx)(u.Brain,{className:"w-3 h-3"}),break:(0,b.jsx)(v.Coffee,{className:"w-3 h-3"}),other:(0,b.jsx)(l.Calendar,{className:"w-3 h-3"})};function C({event:a,date:d,onClose:e,onSave:f,onDelete:g}){let[h,i]=(0,c.useState)(a?.title||""),[j,k]=(0,c.useState)(a?.type||"class"),[l,m]=(0,c.useState)(a?.course||""),[n,o]=(0,c.useState)(a?.startTime?new Date(a.startTime).toTimeString().slice(0,5):"09:00"),[p,q]=(0,c.useState)(a?.endTime?new Date(a.endTime).toTimeString().slice(0,5):"10:00"),[r,u]=(0,c.useState)(a?.location||""),[v,x]=(0,c.useState)(a?.isOnline||!1),[y,A]=(0,c.useState)(a?.meetingLink||""),[B,C]=(0,c.useState)(a?.isRecurring||!1),[D,E]=(0,c.useState)(a?.recurrence?.frequency||"weekly"),[F,G]=(0,c.useState)(a?.recurrence?.daysOfWeek||[d?.getDay()||1]),[H,I]=(0,c.useState)(a?.startTime?new Date(a.startTime).toISOString().split("T")[0]:d?.toISOString().split("T")[0]||new Date().toISOString().split("T")[0]);return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"w-full max-w-lg mx-4 bg-card border border-border rounded-2xl shadow-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:a?"Edit Event":"New Event"}),(0,b.jsx)("button",{onClick:e,className:"p-2 hover:bg-muted rounded-lg",children:(0,b.jsx)(t.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),f({title:h,type:j,course:l||void 0,description:void 0,startTime:new Date(`${H}T${n}`),endTime:new Date(`${H}T${p}`),isAllDay:!1,isRecurring:B,recurrence:B?{frequency:D,daysOfWeek:F,endDate:void 0}:void 0,location:r||void 0,isOnline:v,meetingLink:y||void 0,color:void 0,reminders:void 0})},className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"Title"}),(0,b.jsx)("input",{type:"text",value:h,onChange:a=>i(a.target.value),className:"w-full mt-1 px-4 py-2 rounded-xl bg-muted border border-border focus:ring-2 focus:ring-primary",placeholder:"Data Structures Lecture",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"Type"}),(0,b.jsxs)("select",{value:j,onChange:a=>k(a.target.value),className:"w-full mt-1 px-4 py-2 rounded-xl bg-muted border border-border",children:[(0,b.jsx)("option",{value:"class",children:"Class"}),(0,b.jsx)("option",{value:"lab",children:"Lab"}),(0,b.jsx)("option",{value:"assignment",children:"Assignment Due"}),(0,b.jsx)("option",{value:"exam",children:"Exam"}),(0,b.jsx)("option",{value:"study-session",children:"Study Session"}),(0,b.jsx)("option",{value:"contest",children:"Contest (CP)"}),(0,b.jsx)("option",{value:"meeting",children:"Meeting"}),(0,b.jsx)("option",{value:"other",children:"Other"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"Course (optional)"}),(0,b.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),className:"w-full mt-1 px-4 py-2 rounded-xl bg-muted border border-border",placeholder:"CS301"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"Date"}),(0,b.jsx)("input",{type:"date",value:H,onChange:a=>I(a.target.value),className:"w-full mt-1 px-4 py-2 rounded-xl bg-muted border border-border",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"Start"}),(0,b.jsx)("input",{type:"time",value:n,onChange:a=>o(a.target.value),className:"w-full mt-1 px-4 py-2 rounded-xl bg-muted border border-border",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground",children:"End"}),(0,b.jsx)("input",{type:"time",value:p,onChange:a=>q(a.target.value),className:"w-full mt-1 px-4 py-2 rounded-xl bg-muted border border-border",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:v,onChange:a=>x(a.target.checked),className:"w-4 h-4 rounded"}),(0,b.jsx)("span",{className:"text-sm",children:"Online event"})]}),v?(0,b.jsx)("input",{type:"url",value:y,onChange:a=>A(a.target.value),className:"w-full px-4 py-2 rounded-xl bg-muted border border-border",placeholder:"https://meet.google.com/..."}):(0,b.jsx)("input",{type:"text",value:r,onChange:a=>u(a.target.value),className:"w-full px-4 py-2 rounded-xl bg-muted border border-border",placeholder:"Room 301, CS Building"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:B,onChange:a=>C(a.target.checked),className:"w-4 h-4 rounded"}),(0,b.jsx)("span",{className:"text-sm",children:"Recurring event"}),(0,b.jsx)(s,{className:"w-4 h-4 text-muted-foreground"})]}),B&&(0,b.jsxs)("div",{className:"space-y-3 pl-6",children:[(0,b.jsxs)("select",{value:D,onChange:a=>E(a.target.value),className:"w-full px-4 py-2 rounded-xl bg-muted border border-border",children:[(0,b.jsx)("option",{value:"daily",children:"Daily"}),(0,b.jsx)("option",{value:"weekly",children:"Weekly"}),(0,b.jsx)("option",{value:"biweekly",children:"Every 2 weeks"})]}),"daily"!==D&&(0,b.jsx)("div",{className:"flex gap-2",children:z.map((a,c)=>(0,b.jsx)("button",{type:"button",onClick:()=>{G(a=>a.includes(c)?a.filter(a=>a!==c):[...a,c].sort())},className:`w-9 h-9 rounded-full text-xs font-medium transition-colors ${F.includes(c)?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:bg-muted/80"}`,children:a.charAt(0)},a))})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-2",children:[a&&g&&(0,b.jsx)(w.Button,{type:"button",variant:"destructive",onClick:g,className:"flex-1",children:"Delete"}),(0,b.jsx)(w.Button,{type:"button",variant:"outline",onClick:e,className:"flex-1",children:"Cancel"}),(0,b.jsx)(w.Button,{type:"submit",className:"flex-1",children:a?"Save Changes":"Create Event"})]})]})]})})}function D(){let{user:a,loading:l}=(0,e.useAuthContext)(),m=(0,d.useRouter)(),[r,s]=(0,c.useState)("week"),[t,u]=(0,c.useState)(new Date),[v,D]=(0,c.useState)([]),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(null);(0,c.useEffect)(()=>{l||a||m.push("/login")},[a,l,m]),(0,c.useEffect)(()=>{a&&(async()=>{try{let b="week"===r?O(t):P(t),c="week"===r?new Date(b.getTime()+6048e5):Q(t),[d,e]=await Promise.all([(0,x.getCalendarEvents)(a.uid,{start:b,end:c}),(0,x.getTimeBlocks)(a.uid,t)]),f=d;if(0===d.length){let b=new Date;f=[{id:"sample-1",userId:a.uid,title:"Math Class",type:"class",startTime:new Date(b.getFullYear(),b.getMonth(),b.getDate()+1,9,0),endTime:new Date(b.getFullYear(),b.getMonth(),b.getDate()+1,10,30),description:"Calculus lecture",location:"Room 101",isAllDay:!1,isRecurring:!1,createdAt:new Date},{id:"sample-2",userId:a.uid,title:"Study Session",type:"study-session",startTime:new Date(b.getFullYear(),b.getMonth(),b.getDate()+2,19,0),endTime:new Date(b.getFullYear(),b.getMonth(),b.getDate()+2,21,0),description:"Review for upcoming exam",isAllDay:!1,isRecurring:!1,createdAt:new Date}]}D(f),F(e)}catch(a){console.error("Error loading calendar:",a)}finally{H(!1)}})()},[a,t,r]);let O=a=>{let b=new Date(a),c=b.getDay();return b.setDate(b.getDate()-c),b.setHours(0,0,0,0),b},P=a=>new Date(a.getFullYear(),a.getMonth(),1),Q=a=>new Date(a.getFullYear(),a.getMonth()+1,0),R=a=>{u(b=>{let c=new Date(b);return"week"===r?c.setDate(c.getDate()+("next"===a?7:-7)):c.setMonth(c.getMonth()+("next"===a?1:-1)),c})},S=(0,c.useMemo)(()=>{let a=O(t);return Array.from({length:7},(b,c)=>{let d=new Date(a);return d.setDate(d.getDate()+c),d})},[t]),T=(0,c.useMemo)(()=>{let a=P(t),b=Q(t),c=a.getDay(),d=[];for(let a=0;a<c;a++)d.push(null);for(let c=new Date(a);c<=b;c.setDate(c.getDate()+1))d.push(new Date(c));return d},[t]),U=a=>v.filter(b=>new Date(b.startTime).toDateString()===a.toDateString()),V=async b=>{if(a)try{if(K)await (0,x.updateCalendarEvent)(K.id,b),D(a=>a.map(a=>a.id===K.id?{...a,...b}:a));else{let c={id:await (0,x.createCalendarEvent)({...b,userId:a.uid}),userId:a.uid,...b,createdAt:new Date};D(a=>[...a,c])}J(!1),L(null),N(null)}catch(a){console.error("Error saving event:",a)}},W=async()=>{if(K)try{await (0,x.deleteCalendarEvent)(K.id),D(a=>a.filter(a=>a.id!==K.id)),J(!1),L(null)}catch(a){console.error("Error deleting event:",a)}},X=a=>{L(null),N(a||new Date),J(!0)},Y=a=>{L(a),N(null),J(!0)},Z=a=>{let b=new Date;return a.toDateString()===b.toDateString()},$=a=>{let b,c;a instanceof Date?(b=a.getHours(),c=a.getMinutes()):[b,c]=a.split(":").map(Number);let d=b>=12?"PM":"AM",e=b%12||12;return`${e}:${c.toString().padStart(2,"0")} ${d}`};return l||G?(0,b.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):(0,b.jsxs)(f.default,{title:"Calendar",subtitle:`${t.toLocaleDateString("en-US",{month:"long",year:"numeric"})}`,children:[(0,b.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex rounded-xl bg-muted p-1",children:[(0,b.jsx)("button",{onClick:()=>s("week"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"week"===r?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Week"}),(0,b.jsx)("button",{onClick:()=>s("month"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"month"===r?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Month"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>R("prev"),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:(0,b.jsx)(g.ChevronLeft,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>{u(new Date)},className:"px-4 py-2 text-sm font-medium hover:bg-muted rounded-lg transition-colors",children:"Today"}),(0,b.jsx)("button",{onClick:()=>R("next"),className:"p-2 hover:bg-muted rounded-lg transition-colors",children:(0,b.jsx)(h.ChevronRight,{className:"w-5 h-5"})})]}),(0,b.jsxs)(w.Button,{onClick:()=>X(),className:"gap-2",children:[(0,b.jsx)(i.Plus,{className:"w-4 h-4"}),"Add Event"]})]})}),"week"===r&&(0,b.jsxs)("div",{className:"bg-card rounded-2xl border border-border overflow-hidden",children:[(0,b.jsxs)("div",{className:"grid grid-cols-8 border-b border-border",children:[(0,b.jsx)("div",{className:"p-2 sm:p-4 text-xs text-muted-foreground hidden sm:block"}),S.map((a,c)=>(0,b.jsxs)("div",{className:`p-2 sm:p-4 text-center border-l border-border ${Z(a)?"bg-primary/10":""}`,children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:z[a.getDay()]}),(0,b.jsx)("p",{className:`text-sm sm:text-lg font-semibold ${Z(a)?"text-primary":"text-foreground"}`,children:a.getDate()})]},c))]}),(0,b.jsx)("div",{className:"max-h-[400px] sm:max-h-[600px] overflow-y-auto",children:y.map(a=>(0,b.jsxs)("div",{className:"grid grid-cols-8 border-b border-border/50 min-h-[50px] sm:min-h-[60px]",children:[(0,b.jsxs)("div",{className:"p-1 sm:p-2 text-xs text-muted-foreground text-right pr-2 sm:pr-4 hidden sm:block",children:[a%12||12," ",a>=12?"PM":"AM"]}),S.map((c,d)=>{let e=U(c).filter(b=>b.startTime.getHours()===a);return(0,b.jsx)("div",{className:`border-l border-border/50 p-1 cursor-pointer hover:bg-muted/30 transition-colors ${Z(c)?"bg-primary/5":""}`,onClick:()=>X(c),children:e.map(a=>(0,b.jsxs)("div",{onClick:b=>{b.stopPropagation(),Y(a)},className:`p-1 sm:p-2 rounded-md sm:rounded-lg text-xs border-l-2 mb-1 cursor-pointer hover:opacity-80 transition-opacity ${A[a.type]}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 font-medium truncate",children:[B[a.type],(0,b.jsx)("span",{className:"hidden sm:inline",children:a.title}),(0,b.jsxs)("span",{className:"sm:hidden",children:[a.title.slice(0,8),"..."]})]}),(0,b.jsxs)("div",{className:"text-[10px] opacity-75 mt-0.5 hidden sm:block",children:[$(a.startTime)," - ",$(a.endTime)]})]},a.id))},d)})]},a))})]}),"month"===r&&(0,b.jsxs)("div",{className:"bg-card rounded-2xl border border-border overflow-hidden",children:[(0,b.jsx)("div",{className:"grid grid-cols-7 border-b border-border",children:z.map(a=>(0,b.jsx)("div",{className:"p-2 sm:p-4 text-center",children:(0,b.jsxs)("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:a}),(0,b.jsx)("span",{className:"sm:hidden",children:a.slice(0,3)})]})},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7",children:T.map((a,c)=>(0,b.jsx)("div",{className:`min-h-[80px] sm:min-h-[120px] p-1 sm:p-2 border-b border-r border-border/50 ${a?"cursor-pointer hover:bg-muted/30":"bg-muted/10"} ${a&&Z(a)?"bg-primary/5":""}`,onClick:()=>a&&X(a),children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("p",{className:`text-xs sm:text-sm font-medium mb-1 sm:mb-2 ${Z(a)?"w-5 h-5 sm:w-7 sm:h-7 flex items-center justify-center rounded-full bg-primary text-primary-foreground mx-auto sm:mx-0":"text-foreground"}`,children:a.getDate()}),(0,b.jsxs)("div",{className:"space-y-0.5 sm:space-y-1",children:[U(a).slice(0,2).map(a=>(0,b.jsxs)("div",{onClick:b=>{b.stopPropagation(),Y(a)},className:`px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs truncate cursor-pointer hover:opacity-80 ${A[a.type]}`,children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:a.title}),(0,b.jsxs)("span",{className:"sm:hidden",children:[a.title.slice(0,6),"..."]})]},a.id)),U(a).length>2&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground px-1 sm:px-2",children:["+",U(a).length-2," more"]})]})]})},c))})]}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Quick Add"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-3",children:[{type:"class",label:"Class",icon:p.BookOpen},{type:"lab",label:"Lab",icon:q},{type:"assignment",label:"Assignment",icon:j.Clock},{type:"contest",label:"CP Contest",icon:o},{type:"study-session",label:"Study Session",icon:j.Clock},{type:"exam",label:"Exam",icon:p.BookOpen}].map(({type:a,label:c,icon:d})=>(0,b.jsxs)(w.Button,{variant:"outline",onClick:()=>{L(null),N(new Date),J(!0)},className:"gap-2",children:[(0,b.jsx)(d,{className:"w-4 h-4"}),c]},a))})]}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Upcoming Events"}),(0,b.jsxs)("div",{className:"grid gap-3",children:[v.filter(a=>new Date(a.startTime)>=new Date).sort((a,b)=>new Date(a.startTime).getTime()-new Date(b.startTime).getTime()).slice(0,5).map(a=>(0,b.jsxs)("div",{onClick:()=>Y(a),className:"flex items-center gap-4 p-4 bg-card rounded-xl border border-border hover:shadow-md transition-shadow cursor-pointer",children:[(0,b.jsx)("div",{className:`p-3 rounded-xl ${A[a.type]}`,children:B[a.type]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"font-medium text-foreground truncate",children:a.title}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[new Date(a.startTime).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," â€¢ ",$(a.startTime)," - ",$(a.endTime)]})]}),a.location&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,b.jsx)(k.MapPin,{className:"w-4 h-4"}),a.location]}),a.isOnline&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-cyan-400",children:[(0,b.jsx)(n,{className:"w-4 h-4"}),"Online"]})]},a.id)),0===v.filter(a=>new Date(a.startTime)>=new Date).length&&(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No upcoming events. Add one to get started!"})]})]}),I&&(0,b.jsx)(C,{event:K,date:M||void 0,onClose:()=>{J(!1),L(null),N(null)},onSave:V,onDelete:K?W:void 0})]})}a.s(["default",()=>D],37913)}];

//# sourceMappingURL=app_calendar_page_tsx_2ff3d5cf._.js.map