module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},79790,a=>{"use strict";var b=a.i(72131);a.i(30485);var c=a.i(31052),d=a.i(18740);function e(){let[a,e]=(0,b.useState)(null),[f,g]=(0,b.useState)(!0),[h,i]=(0,b.useState)(null);return(0,b.useEffect)(()=>{let a=(0,c.onAuthStateChanged)(d.auth,a=>{e(a),g(!1),i(null)},a=>{console.error("Auth state change error:",a),i(a),g(!1)});return()=>a()},[]),{user:a,loading:f,error:h,logout:async()=>{try{await (0,c.signOut)(d.auth),e(null)}catch(a){i(a)}}}}a.s(["useAuth",()=>e])},33508,82724,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>b],33508);var c=a.i(72131);let d=0,e=new Map,f=a=>{if(e.has(a))return;let b=setTimeout(()=>{e.delete(a),i({type:"REMOVE_TOAST",toastId:a})},1e6);e.set(a,b)},g=[],h={toasts:[]};function i(a){h=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?f(c):a.toasts.forEach(a=>{f(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(h,a),g.forEach(a=>{a(h)})}function j({...a}){let b=(d=(d+1)%Number.MAX_SAFE_INTEGER).toString(),c=()=>i({type:"DISMISS_TOAST",toastId:b});return i({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||c()}}}),{id:b,dismiss:c,update:a=>i({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function k(){let[a,b]=c.useState(h);return c.useEffect(()=>(g.push(b),()=>{let a=g.indexOf(b);a>-1&&g.splice(a,1)}),[a]),{...a,toast:j,dismiss:a=>i({type:"DISMISS_TOAST",toastId:a})}}a.s(["useToast",()=>k],82724)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},53250,a=>{"use strict";let b="ttps://surveillance-filled-consequence-tunnel.trycloudflare.com";class c extends Error{status;data;constructor(a,b,c){super(a),this.status=b,this.data=c,this.name="APIError"}}async function d(a,e={}){let f=new AbortController,g=setTimeout(()=>f.abort(),2e5);try{let d=await fetch(`${b}${a}`,{...e,signal:f.signal,headers:{"Content-Type":"application/json",...e.headers}});if(clearTimeout(g),!d.ok){let a=await d.json().catch(()=>({}));throw new c(a.detail||a.message||`Request failed with status ${d.status}`,d.status,a)}return await d.json()}catch(a){if(clearTimeout(g),"AbortError"===a.name)throw new c("Request timeout - the AI is taking too long to respond");if(a instanceof c)throw a;throw new c(a.message||"Network error - please check your connection")}}async function e(){return d("/health")}async function f(a){return d("/materials/add",{method:"POST",body:JSON.stringify(a)})}async function g(a,d){let e=new FormData;e.append("file",a),d?.course&&e.append("course",d.course),d?.topic&&e.append("topic",d.topic),d?.store_in_memory!==void 0&&e.append("store_in_memory",String(d.store_in_memory));let f=new AbortController,g=setTimeout(()=>f.abort(),2e5);try{let a=await fetch(`${b}/audio/upload`,{method:"POST",body:e,signal:f.signal});if(clearTimeout(g),!a.ok){let b=await a.json().catch(()=>({}));throw new c(b.detail||`Upload failed with status ${a.status}`,a.status,b)}return await a.json()}catch(a){if(clearTimeout(g),"AbortError"===a.name)throw new c("Audio processing timeout");if(a instanceof c)throw a;throw new c(a.message||"Audio upload failed")}}async function h(a){return d("/ai/ask",{method:"POST",body:JSON.stringify(a)})}async function i(a){return d("/ai/flashcards/generate",{method:"POST",body:JSON.stringify(a)})}async function j(a){return d("/ai/plan/create",{method:"POST",body:JSON.stringify(a)})}async function k(a){return d("/ai/intelligent-ask",{method:"POST",body:JSON.stringify(a)})}async function l(){try{let a=await e();return"online"===a.backend||"healthy"===a.status}catch{return!1}}a.s(["APIError",()=>c,"addMaterial",()=>f,"askAI",()=>h,"checkHealth",()=>e,"createStudyPlan",()=>j,"generateFlashcards",()=>i,"intelligentAsk",()=>k,"isBackendAvailable",()=>l,"uploadAudio",()=>g])},79641,a=>{"use strict";let b=a=>new Promise(b=>setTimeout(b,a));async function c(a,b={}){let d=b.systemPrompt?[{role:"system",content:b.systemPrompt},...a]:a,e=await fetch("https://api.groq.com/openai/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer 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","Content-Type":"application/json"},body:JSON.stringify({model:"llama-3.1-70b-versatile",messages:d,temperature:b.temperature??.7,max_tokens:b.maxTokens??4096})});if(!e.ok){let a=await e.json();throw Error(`Groq API error: ${a.error?.message||e.statusText}`)}let f=await e.json();return f.choices?.[0]?.message?.content||""}async function d(a,b={}){let c=a.map(a=>({role:"assistant"===a.role?"model":"user",parts:[{text:a.content}]}));b.systemPrompt&&c.unshift({role:"user",parts:[{text:`System Instructions: ${b.systemPrompt}`}]});let e=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyDA8ReX3lUqucg23jKsWbbyviigD3jF6lU",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:c,generationConfig:{temperature:b.temperature??.7,maxOutputTokens:b.maxTokens??4096}})});if(!e.ok){let a=await e.json();throw Error(`Gemini API error: ${a.error?.message||e.statusText}`)}let f=await e.json();return f.candidates?.[0]?.content?.parts?.[0]?.text||""}async function e(a,f={}){for(let d=0;d<3;d++)try{return d>0&&await b(1e3*Math.pow(2,d)),await c(a,f)}catch(a){if(console.warn(`Groq attempt ${d+1} failed:`,a.message),a.message?.includes("rate")||a.message?.includes("429"))continue;break}for(let c=0;c<3;c++)try{return c>0&&await b(1e3*Math.pow(2,c)),await d(a,f)}catch(a){if(console.warn(`Gemini attempt ${c+1} failed:`,a.message),a.message?.includes("rate")||a.message?.includes("429")||a.message?.includes("exhausted"))continue;throw a}throw Error("No AI provider available. Please configure NEXT_PUBLIC_GROQ_API_KEY or NEXT_PUBLIC_GEMINI_API_KEY")}async function f(a,b,c=5,d="medium"){let g,h=a?function(a,b){if(a.length<=8e4)return a;let c=a.slice(0,8e4),d=Math.max(c.lastIndexOf(". "),c.lastIndexOf("\n"));return d>64e3&&(c=c.slice(0,d+1)),c+"\n\n[Content truncated...]"}(a.trim(),0):"",i={easy:"Create simple, straightforward questions with concise answers suitable for beginners.",medium:"Create balanced questions that test understanding with moderately detailed answers.",hard:"Create challenging questions that require deep understanding with comprehensive answers."},j=h&&h.length>50?`Create ${c} flashcards based ONLY on this study material:

"""
${h}
"""

${b?`Topic: ${b}`:""}
Difficulty: ${d} - ${i[d]}

Return ONLY a JSON array: [{"front": "Question?", "back": "Answer"}]
CRITICAL: Only use information from the provided material.`:`Create ${c} flashcards about "${b}".
Difficulty: ${d} - ${i[d]}
Return ONLY a JSON array: [{"front": "Question?", "back": "Answer"}]`,k=await e([{role:"user",content:j}],{systemPrompt:"You are an expert educator creating flashcards. Return ONLY valid JSON arrays, no other text.",temperature:.7,maxTokens:8192}),l=k,m=k.replace(/```(?:json)?\s*/g,"").replace(/```\s*$/g,"").replace(/`/g,"").trim(),n=m.match(/```(?:json)?\s*([\s\S]*?)```/);if(n)l=n[1].trim();else{let a=m.match(/\[[\s\S]*\]/);a&&(l=a[0])}try{g=JSON.parse(l)}catch{g=JSON.parse(l=function(a){let b=a.trim();if(!b.startsWith("[")){let a=b.indexOf("[");if(-1!==a)b=b.slice(a);else throw Error("No JSON array found")}let c=0,d=!1,e=!1,f=-1;for(let a=0;a<b.length;a++){let g=b[a];if(e){e=!1;continue}if("\\"===g){e=!0;continue}if('"'===g){d=!d;continue}d||("{"===g&&c++,"}"===g&&0==--c&&(f=a))}return f>0&&((b=b.slice(0,f+1)).endsWith("]")||(b+="]")),(b=(b=b.replace(/,\s*\]$/,"]")).replace(/,\s*$/,"")+"]").endsWith("]")||(b+="]"),b}(l))}if(!Array.isArray(g))throw Error("Invalid response format");return g.filter(a=>a.front&&a.back).slice(0,c)}async function g(a,b,c){return e([{role:"user",content:`Create ${c} content for "${b}" tailored to:
- Learning style: ${a.learningStyle} (${{visual:"Include diagrams, charts, and visual analogies",auditory:"Use storytelling and audio-friendly explanations",kinesthetic:"Include hands-on examples and practical applications",reading:"Provide detailed written explanations with references"}[a.learningStyle]})
- Goals: ${a.goals.join(", ")}
- Current level: ${a.currentLevel}
- Preferred subjects: ${a.preferredSubjects.join(", ")}

${{summary:"Create a concise summary",examples:"Provide practical examples and case studies",practice:"Generate practice problems and exercises",explanation:"Explain the concept in depth"}[c]}

Make it engaging, personalized, and effective for this learner.`}],{temperature:.6,maxTokens:3072})}a.s(["generateFlashcards",()=>f,"generatePersonalizedContent",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2834d3b9._.js.map