{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../lib/hooks/useAuth.ts","../../../../lib/hooks/useToast.ts","../../../../node_modules/lucide-react/src/icons/x.ts","../../../../node_modules/lucide-react/src/icons/loader-circle.ts","../../../../lib/api.ts","../../../../lib/ai-client.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { type User, onAuthStateChanged, signOut } from \"firebase/auth\"\nimport { auth } from \"@/lib/firebase\"\n\nexport function useAuth() {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<Error | null>(null)\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(\n      auth,\n      (currentUser) => {\n        setUser(currentUser)\n        setLoading(false)\n        setError(null)\n      },\n      (err) => {\n        console.error(\"Auth state change error:\", err)\n        setError(err as Error)\n        setLoading(false)\n      },\n    )\n\n    return () => unsubscribe()\n  }, [])\n\n  const logout = async () => {\n    try {\n      await signOut(auth)\n      setUser(null)\n    } catch (err) {\n      setError(err as Error)\n    }\n  }\n\n  return { user, loading, error, logout }\n}\n","\"use client\"\n\nimport * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name X\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTggNiA2IDE4IiAvPgogIDxwYXRoIGQ9Im02IDYgMTIgMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst X = createLucideIcon('X', [\n  ['path', { d: 'M18 6 6 18', key: '1bl5f8' }],\n  ['path', { d: 'm6 6 12 12', key: 'd8bk6v' }],\n]);\n\nexport default X;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('LoaderCircle', [\n  ['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }],\n]);\n\nexport default LoaderCircle;\n","/**\n * API Client for StudyPal AI Backend\n * Connects to the FastAPI backend at localhost:8000\n */\n\n// Get API URL from environment or use localhost\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000\"\n\n// Request timeout in milliseconds\nconst REQUEST_TIMEOUT = 200000 // 200 seconds for AI operations\n\n/**\n * Custom error for API failures\n */\nexport class APIError extends Error {\n  constructor(\n    message: string,\n    public status?: number,\n    public data?: any\n  ) {\n    super(message)\n    this.name = \"APIError\"\n  }\n}\n\n/**\n * Make an API request with timeout and error handling\n */\nasync function apiRequest<T>(\n  endpoint: string,\n  options: RequestInit = {}\n): Promise<T> {\n  const controller = new AbortController()\n  const timeoutId = setTimeout(() => controller.abort(), REQUEST_TIMEOUT)\n\n  try {\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      ...options,\n      signal: controller.signal,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...options.headers,\n      },\n    })\n\n    clearTimeout(timeoutId)\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({}))\n      throw new APIError(\n        error.detail || error.message || `Request failed with status ${response.status}`,\n        response.status,\n        error\n      )\n    }\n\n    return await response.json()\n  } catch (error: any) {\n    clearTimeout(timeoutId)\n    \n    if (error.name === \"AbortError\") {\n      throw new APIError(\"Request timeout - the AI is taking too long to respond\")\n    }\n    \n    if (error instanceof APIError) {\n      throw error\n    }\n    \n    throw new APIError(\n      error.message || \"Network error - please check your connection\"\n    )\n  }\n}\n\n// ============================================================================\n// HEALTH CHECK\n// ============================================================================\n\nexport interface HealthResponse {\n  backend: string\n  status: string\n  services: {\n    qdrant?: {\n      status: string\n      connected: boolean\n      collection?: string\n      vectors_count?: number\n      url?: string\n    }\n    ollama?: {\n      status: string\n      connected: boolean\n      models?: string[]\n      url?: string\n    }\n    whisper?: {\n      status: string\n      loaded: boolean\n      model?: string\n    }\n  }\n}\n\nexport async function checkHealth(): Promise<HealthResponse> {\n  return apiRequest<HealthResponse>(\"/health\")\n}\n\n// ============================================================================\n// MATERIALS\n// ============================================================================\n\nexport interface AddMaterialRequest {\n  text: string\n  course?: string\n  topic?: string\n  source?: string\n  metadata?: Record<string, any>\n}\n\nexport interface AddMaterialResponse {\n  success: boolean\n  message: string\n  point_id: string\n}\n\nexport async function addMaterial(data: AddMaterialRequest): Promise<AddMaterialResponse> {\n  return apiRequest<AddMaterialResponse>(\"/materials/add\", {\n    method: \"POST\",\n    body: JSON.stringify(data),\n  })\n}\n\nexport interface MaterialStats {\n  collection_name: string\n  vectors_count: number\n  points_count: number\n  status: string\n}\n\nexport async function getMaterialStats(): Promise<{ success: boolean; stats: MaterialStats }> {\n  return apiRequest(\"/materials/stats\")\n}\n\n// ============================================================================\n// AUDIO UPLOAD\n// ============================================================================\n\nexport interface AudioUploadResponse {\n  transcript: string\n  stored_chunks: number\n  language: string\n  chunks?: string[]\n}\n\nexport async function uploadAudio(\n  file: File,\n  options?: {\n    course?: string\n    topic?: string\n    store_in_memory?: boolean\n  }\n): Promise<AudioUploadResponse> {\n  const formData = new FormData()\n  formData.append(\"file\", file)\n  \n  if (options?.course) formData.append(\"course\", options.course)\n  if (options?.topic) formData.append(\"topic\", options.topic)\n  if (options?.store_in_memory !== undefined) {\n    formData.append(\"store_in_memory\", String(options.store_in_memory))\n  }\n\n  const controller = new AbortController()\n  const timeoutId = setTimeout(() => controller.abort(), REQUEST_TIMEOUT)\n\n  try {\n    const response = await fetch(`${API_BASE_URL}/audio/upload`, {\n      method: \"POST\",\n      body: formData,\n      signal: controller.signal,\n    })\n\n    clearTimeout(timeoutId)\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({}))\n      throw new APIError(\n        error.detail || `Upload failed with status ${response.status}`,\n        response.status,\n        error\n      )\n    }\n\n    return await response.json()\n  } catch (error: any) {\n    clearTimeout(timeoutId)\n    \n    if (error.name === \"AbortError\") {\n      throw new APIError(\"Audio processing timeout\")\n    }\n    \n    if (error instanceof APIError) {\n      throw error\n    }\n    \n    throw new APIError(error.message || \"Audio upload failed\")\n  }\n}\n\n// ============================================================================\n// ASK AI (RAG)\n// ============================================================================\n\nexport interface AskRequest {\n  question: string\n  use_memory?: boolean\n  top_k?: number\n}\n\nexport interface AskResponse {\n  answer: string\n  context_used: boolean\n  sources_count: number\n  sources?: Array<{\n    text_preview: string\n    metadata: Record<string, any>\n    relevance_score: number\n  }>\n}\n\nexport async function askAI(data: AskRequest): Promise<AskResponse> {\n  return apiRequest<AskResponse>(\"/ai/ask\", {\n    method: \"POST\",\n    body: JSON.stringify(data),\n  })\n}\n\n// ============================================================================\n// FLASHCARDS\n// ============================================================================\n\nexport interface GenerateFlashcardsRequest {\n  text?: string\n  topic?: string\n  num_cards?: number\n  use_memory?: boolean\n}\n\nexport interface Flashcard {\n  question: string\n  answer: string\n}\n\nexport interface GenerateFlashcardsResponse {\n  flashcards: Flashcard[]\n  count: number\n  source: string\n}\n\nexport async function generateFlashcards(\n  data: GenerateFlashcardsRequest\n): Promise<GenerateFlashcardsResponse> {\n  return apiRequest<GenerateFlashcardsResponse>(\"/ai/flashcards/generate\", {\n    method: \"POST\",\n    body: JSON.stringify(data),\n  })\n}\n\n// ============================================================================\n// EXAM-GRADE FLASHCARDS (World-Class Memory System)\n// ============================================================================\n\nexport type FlashcardType = \"definition\" | \"why\" | \"how\" | \"compare\" | \"trap\" | \"example\" | \"exam\"\nexport type FlashcardDifficulty = \"beginner\" | \"intermediate\" | \"advanced\" | \"expert\"\n\nexport interface ExamGradeFlashcardRequest {\n  text?: string\n  topic: string\n  num_cards?: number\n  difficulty?: FlashcardDifficulty\n  use_memory?: boolean\n  user_mistakes?: string[]\n  force_card_types?: FlashcardType[]\n}\n\nexport interface ExamGradeFlashcard {\n  id: string\n  type: FlashcardType\n  question: string\n  answer: string\n  difficulty: FlashcardDifficulty\n  topic: string\n  subtopic?: string\n  source: string\n  exam_relevance: number\n  key_terms: string[]\n  created_at: string\n  mistake_prone: boolean\n}\n\nexport interface ExamGradeFlashcardResponse {\n  flashcards: ExamGradeFlashcard[]\n  count: number\n  source: string\n  card_type_distribution: Record<string, number>\n  difficulty: FlashcardDifficulty\n}\n\nexport interface TrapCardRequest {\n  mistakes: Array<{\n    question: string\n    wrong_answer: string\n    correct_answer: string\n  }>\n  topic: string\n  num_cards?: number\n}\n\nexport interface TrapCardResponse {\n  flashcards: ExamGradeFlashcard[]\n  count: number\n  source: string\n  all_trap_type: boolean\n}\n\nexport interface ExamSimulationRequest {\n  topic: string\n  subtopics: string[]\n  exam_format?: \"multiple_choice\" | \"short_answer\" | \"essay\"\n  num_cards?: number\n}\n\nexport interface ExamSimulationResponse {\n  flashcards: ExamGradeFlashcard[]\n  count: number\n  source: string\n  exam_format: string\n  subtopics_covered: string[]\n}\n\n/**\n * Generate exam-grade flashcards with 7 card types and full metadata.\n * Uses Qwen2.5 for high-quality, one-concept-per-card generation.\n */\nexport async function generateExamGradeFlashcards(\n  data: ExamGradeFlashcardRequest\n): Promise<ExamGradeFlashcardResponse> {\n  return apiRequest<ExamGradeFlashcardResponse>(\"/ai/flashcards/exam-grade\", {\n    method: \"POST\",\n    body: JSON.stringify(data),\n  })\n}\n\n/**\n * Generate TRAP cards from user's past mistakes.\n * Creates misconception-busting flashcards targeting failure points.\n */\nexport async function generateTrapCards(\n  data: TrapCardRequest\n): Promise<TrapCardResponse> {\n  return apiRequest<TrapCardResponse>(\"/ai/flashcards/trap-cards\", {\n    method: \"POST\",\n    body: JSON.stringify(data),\n  })\n}\n\n/**\n * Generate exam simulation cards that mirror real test questions.\n */\nexport async function generateExamSimulation(\n  data: ExamSimulationRequest\n): Promise<ExamSimulationResponse> {\n  return apiRequest<ExamSimulationResponse>(\"/ai/flashcards/exam-simulation\", {\n    method: \"POST\",\n    body: JSON.stringify(data),\n  })\n}\n\n// ============================================================================\n// STUDY PLAN\n// ============================================================================\n\nexport interface CreateStudyPlanRequest {\n  subject: string\n  days: number\n  current_knowledge?: string\n  retrieve_materials?: boolean\n}\n\nexport interface CreateStudyPlanResponse {\n  plan: string\n  subject: string\n  days: number\n  materials_used: number\n}\n\nexport async function createStudyPlan(\n  data: CreateStudyPlanRequest\n): Promise<CreateStudyPlanResponse> {\n  return apiRequest<CreateStudyPlanResponse>(\"/ai/plan/create\", {\n    method: \"POST\",\n    body: JSON.stringify(data),\n  })\n}\n\n// ============================================================================\n// INTELLIGENT AI (Study Intelligence System)\n// ============================================================================\n\nexport type AIMode = \"plan\" | \"explain\" | \"quiz\" | \"flashcards\" | \"review\" | \"coach\"\n\nexport interface UserStudyContext {\n  focus_minutes_today?: number\n  target_focus_minutes?: number\n  habits_completed_today?: number\n  total_habits_today?: number\n  flashcards_due?: number\n  streak_days?: number\n  urgent_task_count?: number\n  overdue_tasks?: number\n  current_course?: string\n  current_topic?: string\n  days_until_exam?: number\n  recent_failures?: string[]\n}\n\nexport interface IntelligentAskRequest {\n  message: string\n  mode?: AIMode\n  context?: UserStudyContext\n  use_memory?: boolean\n  skip_intervention?: boolean\n}\n\nexport interface Intervention {\n  should_intervene: boolean\n  message: string\n  suggested_mode: AIMode\n  priority: \"high\" | \"medium\" | \"low\"\n}\n\nexport interface ProactiveSuggestion {\n  id: string\n  message: string\n  action: string\n  priority: \"urgent\" | \"high\" | \"normal\"\n  icon: string\n}\n\nexport interface IntelligentAskResponse {\n  mode: AIMode\n  answer: string\n  structured_output?: Record<string, any>\n  intervention?: Intervention\n  memory_used: boolean\n  memory_quality: \"strong\" | \"weak\" | \"none\"\n  chunks_used: number\n  suggestions: ProactiveSuggestion[]\n}\n\n/**\n * Intelligent AI endpoint - Study Intelligence System\n * Processes messages with mode-based routing, intervention logic, and structured outputs\n */\nexport async function intelligentAsk(\n  data: IntelligentAskRequest\n): Promise<IntelligentAskResponse> {\n  return apiRequest<IntelligentAskResponse>(\"/ai/intelligent-ask\", {\n    method: \"POST\",\n    body: JSON.stringify(data),\n  })\n}\n\n// ============================================================================\n// HELPER UTILITIES\n// ============================================================================\n\n/**\n * Check if the backend is available\n */\nexport async function isBackendAvailable(): Promise<boolean> {\n  try {\n    const health = await checkHealth()\n    return health.backend === \"online\" || health.status === \"healthy\"\n  } catch {\n    return false\n  }\n}\n\n/**\n * Get backend service status summary\n */\nexport async function getServiceStatus(): Promise<{\n  backend: boolean\n  qdrant: boolean\n  ollama: boolean\n  whisper: boolean\n}> {\n  try {\n    const health = await checkHealth()\n    return {\n      backend: health.backend === \"online\",\n      qdrant: health.services.qdrant?.connected ?? false,\n      ollama: health.services.ollama?.connected ?? false,\n      whisper: health.services.whisper?.loaded ?? false,\n    }\n  } catch {\n    return {\n      backend: false,\n      qdrant: false,\n      ollama: false,\n      whisper: false,\n    }\n  }\n}\n","\"use client\"\n\n// Unified AI Client - Uses Groq (free tier) with Gemini fallback\n// Groq: 14,400 requests/day free, fastest inference\n// Gemini: 15 RPM / 1M tokens/day free\n\nconst GROQ_API_KEY = process.env.NEXT_PUBLIC_GROQ_API_KEY || \"\"\nconst GEMINI_API_KEY = process.env.NEXT_PUBLIC_GEMINI_API_KEY || \"\"\n\n// Models\nconst GROQ_MODEL = \"llama-3.1-70b-versatile\" // Fast, high quality\nconst GEMINI_MODEL = \"gemini-2.0-flash\"\n\nexport interface Message {\n  role: \"user\" | \"assistant\" | \"system\"\n  content: string\n}\n\nexport interface ChatOptions {\n  temperature?: number\n  maxTokens?: number\n  systemPrompt?: string\n}\n\nexport interface GeneratedFlashcard {\n  front: string\n  back: string\n}\n\n// Sleep helper for retry delays\nconst sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms))\n\n// Truncate content intelligently\nfunction truncateContent(content: string, maxChars: number): string {\n  if (content.length <= maxChars) return content\n  let truncated = content.slice(0, maxChars)\n  const lastPeriod = truncated.lastIndexOf('. ')\n  const lastNewline = truncated.lastIndexOf('\\n')\n  const cutPoint = Math.max(lastPeriod, lastNewline)\n  if (cutPoint > maxChars * 0.8) {\n    truncated = truncated.slice(0, cutPoint + 1)\n  }\n  return truncated + \"\\n\\n[Content truncated...]\"\n}\n\n// Fix truncated JSON arrays\nfunction fixTruncatedJson(jsonStr: string): string {\n  let fixed = jsonStr.trim()\n  \n  if (!fixed.startsWith('[')) {\n    const arrayStart = fixed.indexOf('[')\n    if (arrayStart !== -1) {\n      fixed = fixed.slice(arrayStart)\n    } else {\n      throw new Error(\"No JSON array found\")\n    }\n  }\n  \n  let bracketCount = 0\n  let inString = false\n  let escapeNext = false\n  let lastCompleteObject = -1\n  \n  for (let i = 0; i < fixed.length; i++) {\n    const char = fixed[i]\n    if (escapeNext) { escapeNext = false; continue }\n    if (char === '\\\\') { escapeNext = true; continue }\n    if (char === '\"') { inString = !inString; continue }\n    if (inString) continue\n    if (char === '{') bracketCount++\n    if (char === '}') {\n      bracketCount--\n      if (bracketCount === 0) lastCompleteObject = i\n    }\n  }\n  \n  if (lastCompleteObject > 0) {\n    fixed = fixed.slice(0, lastCompleteObject + 1)\n    if (!fixed.endsWith(']')) fixed += ']'\n  }\n  \n  fixed = fixed.replace(/,\\s*\\]$/, ']')\n  fixed = fixed.replace(/,\\s*$/, '') + ']'\n  if (!fixed.endsWith(']')) fixed += ']'\n  \n  return fixed\n}\n\n// ==================== GROQ API ====================\nasync function chatWithGroq(messages: Message[], options: ChatOptions = {}): Promise<string> {\n  if (!GROQ_API_KEY) {\n    throw new Error(\"GROQ_API_KEY not configured\")\n  }\n\n  const allMessages = options.systemPrompt \n    ? [{ role: \"system\" as const, content: options.systemPrompt }, ...messages]\n    : messages\n\n  const response = await fetch(\"https://api.groq.com/openai/v1/chat/completions\", {\n    method: \"POST\",\n    headers: {\n      \"Authorization\": `Bearer ${GROQ_API_KEY}`,\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      model: GROQ_MODEL,\n      messages: allMessages,\n      temperature: options.temperature ?? 0.7,\n      max_tokens: options.maxTokens ?? 4096\n    })\n  })\n\n  if (!response.ok) {\n    const error = await response.json()\n    throw new Error(`Groq API error: ${error.error?.message || response.statusText}`)\n  }\n\n  const data = await response.json()\n  return data.choices?.[0]?.message?.content || \"\"\n}\n\n// ==================== GEMINI API ====================\nasync function chatWithGemini(messages: Message[], options: ChatOptions = {}): Promise<string> {\n  if (!GEMINI_API_KEY) {\n    throw new Error(\"GEMINI_API_KEY not configured\")\n  }\n\n  // Convert messages to Gemini format\n  const contents = messages.map(msg => ({\n    role: msg.role === \"assistant\" ? \"model\" : \"user\",\n    parts: [{ text: msg.content }]\n  }))\n\n  // Add system prompt as first user message if provided\n  if (options.systemPrompt) {\n    contents.unshift({\n      role: \"user\",\n      parts: [{ text: `System Instructions: ${options.systemPrompt}` }]\n    })\n  }\n\n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_MODEL}:generateContent?key=${GEMINI_API_KEY}`,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        contents,\n        generationConfig: {\n          temperature: options.temperature ?? 0.7,\n          maxOutputTokens: options.maxTokens ?? 4096\n        }\n      })\n    }\n  )\n\n  if (!response.ok) {\n    const error = await response.json()\n    throw new Error(`Gemini API error: ${error.error?.message || response.statusText}`)\n  }\n\n  const data = await response.json()\n  return data.candidates?.[0]?.content?.parts?.[0]?.text || \"\"\n}\n\n// ==================== UNIFIED CHAT ====================\nexport async function chat(\n  messages: Message[], \n  options: ChatOptions = {}\n): Promise<string> {\n  const maxRetries = 3\n  \n  // Try Groq first (faster, more generous free tier)\n  if (GROQ_API_KEY) {\n    for (let attempt = 0; attempt < maxRetries; attempt++) {\n      try {\n        if (attempt > 0) {\n          await sleep(Math.pow(2, attempt) * 1000)\n        }\n        return await chatWithGroq(messages, options)\n      } catch (error: any) {\n        console.warn(`Groq attempt ${attempt + 1} failed:`, error.message)\n        if (error.message?.includes(\"rate\") || error.message?.includes(\"429\")) {\n          continue\n        }\n        break // Non-rate-limit error, try fallback\n      }\n    }\n  }\n\n  // Fallback to Gemini\n  if (GEMINI_API_KEY) {\n    for (let attempt = 0; attempt < maxRetries; attempt++) {\n      try {\n        if (attempt > 0) {\n          await sleep(Math.pow(2, attempt) * 1000)\n        }\n        return await chatWithGemini(messages, options)\n      } catch (error: any) {\n        console.warn(`Gemini attempt ${attempt + 1} failed:`, error.message)\n        if (error.message?.includes(\"rate\") || error.message?.includes(\"429\") || error.message?.includes(\"exhausted\")) {\n          continue\n        }\n        throw error\n      }\n    }\n  }\n\n  throw new Error(\"No AI provider available. Please configure NEXT_PUBLIC_GROQ_API_KEY or NEXT_PUBLIC_GEMINI_API_KEY\")\n}\n\n// ==================== FLASHCARD GENERATION ====================\nexport async function generateFlashcards(\n  content: string,\n  topic: string,\n  count: number = 5,\n  difficulty: \"easy\" | \"medium\" | \"hard\" = \"medium\"\n): Promise<GeneratedFlashcard[]> {\n  const maxContentChars = 80000 // ~20k tokens\n  const processedContent = content ? truncateContent(content.trim(), maxContentChars) : \"\"\n\n  const difficultyPrompts = {\n    easy: \"Create simple, straightforward questions with concise answers suitable for beginners.\",\n    medium: \"Create balanced questions that test understanding with moderately detailed answers.\",\n    hard: \"Create challenging questions that require deep understanding with comprehensive answers.\"\n  }\n\n  const systemPrompt = \"You are an expert educator creating flashcards. Return ONLY valid JSON arrays, no other text.\"\n\n  const userPrompt = processedContent && processedContent.length > 50\n    ? `Create ${count} flashcards based ONLY on this study material:\n\n\"\"\"\n${processedContent}\n\"\"\"\n\n${topic ? `Topic: ${topic}` : \"\"}\nDifficulty: ${difficulty} - ${difficultyPrompts[difficulty]}\n\nReturn ONLY a JSON array: [{\"front\": \"Question?\", \"back\": \"Answer\"}]\nCRITICAL: Only use information from the provided material.`\n    : `Create ${count} flashcards about \"${topic}\".\nDifficulty: ${difficulty} - ${difficultyPrompts[difficulty]}\nReturn ONLY a JSON array: [{\"front\": \"Question?\", \"back\": \"Answer\"}]`\n\n  const response = await chat(\n    [{ role: \"user\", content: userPrompt }],\n    { systemPrompt, temperature: 0.7, maxTokens: 8192 }\n  )\n\n  // Parse JSON from response\n  let jsonStr = response\n  \n  // Clean the response to remove markdown formatting and backticks\n  const cleanResponse = response\n    .replace(/```(?:json)?\\s*/g, '')  // Remove opening code block markers\n    .replace(/```\\s*$/g, '')          // Remove closing code block markers\n    .replace(/`/g, '')                // Remove any remaining backticks\n    .trim()\n  \n  // Try to extract JSON from cleaned response\n  const jsonMatch = cleanResponse.match(/```(?:json)?\\s*([\\s\\S]*?)```/)\n  if (jsonMatch) {\n    jsonStr = jsonMatch[1].trim()\n  } else {\n    const arrayMatch = cleanResponse.match(/\\[[\\s\\S]*\\]/)\n    if (arrayMatch) jsonStr = arrayMatch[0]\n  }\n\n  let flashcards: GeneratedFlashcard[]\n  try {\n    flashcards = JSON.parse(jsonStr)\n  } catch {\n    jsonStr = fixTruncatedJson(jsonStr)\n    flashcards = JSON.parse(jsonStr)\n  }\n\n  if (!Array.isArray(flashcards)) {\n    throw new Error(\"Invalid response format\")\n  }\n\n  return flashcards.filter(card => card.front && card.back).slice(0, count)\n}\n\n// ==================== ASSISTANT QUICK RESPONSES ====================\nexport async function getAssistantResponse(\n  userMessage: string,\n  context?: {\n    conversationHistory?: Message[]\n    userMaterials?: string[]\n    currentPage?: string\n  }\n): Promise<string> {\n  const systemPrompt = `You are StudyPal AI, a helpful student assistant. You help with:\n- Answering study questions\n- Explaining concepts\n- Creating flashcards and quizzes\n- Managing study schedules\n- Providing encouragement and study tips\n\nBe concise, friendly, and educational. If asked to create flashcards or perform actions, acknowledge the request and explain what you'll do.\n\n${context?.currentPage ? `The user is currently on the ${context.currentPage} page.` : \"\"}\n${context?.userMaterials?.length ? `The user has materials on: ${context.userMaterials.join(\", \")}` : \"\"}`\n\n  const messages: Message[] = [\n    ...(context?.conversationHistory || []),\n    { role: \"user\", content: userMessage }\n  ]\n\n  return chat(messages, { systemPrompt, temperature: 0.7, maxTokens: 1024 })\n}\n\n// ==================== SUMMARIZATION ====================\nexport async function summarizeContent(\n  content: string,\n  style: \"brief\" | \"detailed\" | \"bullet-points\" = \"bullet-points\"\n): Promise<string> {\n  const processedContent = truncateContent(content, 50000)\n  \n  const stylePrompts = {\n    brief: \"Provide a 2-3 sentence summary.\",\n    detailed: \"Provide a comprehensive summary covering all key points.\",\n    \"bullet-points\": \"Provide a summary as bullet points highlighting key concepts.\"\n  }\n\n  return chat([{\n    role: \"user\",\n    content: `Summarize this content. ${stylePrompts[style]}\n\nContent:\n\"\"\"\n${processedContent}\n\"\"\"`\n  }], { temperature: 0.5, maxTokens: 2048 })\n}\n\n// ==================== EXPLAIN CONCEPT ====================\nexport async function explainConcept(\n  concept: string,\n  level: \"beginner\" | \"intermediate\" | \"advanced\" = \"intermediate\"\n): Promise<string> {\n  const levelPrompts = {\n    beginner: \"Explain like I'm 10 years old, using simple language and analogies.\",\n    intermediate: \"Explain for a college student, with some technical detail.\",\n    advanced: \"Explain in depth with technical terminology and nuances.\"\n  }\n\n  return chat([{\n    role: \"user\",\n    content: `Explain: \"${concept}\"\\n\\n${levelPrompts[level]}`\n  }], { temperature: 0.7, maxTokens: 2048 })\n}\n\n// ==================== GENERATE STUDY PLAN ====================\nexport interface StudyPlanItem {\n  topic: string\n  duration: number // in minutes\n  resources: string[]\n  priority: \"high\" | \"medium\" | \"low\"\n}\n\nexport async function generateStudyPlan(\n  subject: string,\n  goals: string[],\n  availableTime: number, // in hours per week\n  currentLevel: \"beginner\" | \"intermediate\" | \"advanced\" = \"intermediate\",\n  deadline?: Date\n): Promise<StudyPlanItem[]> {\n  const deadlineStr = deadline ? `Deadline: ${deadline.toDateString()}` : \"\"\n  \n  const prompt = `Create a detailed study plan for ${subject} with the following goals: ${goals.join(\", \")}.\nAvailable study time: ${availableTime} hours per week.\nCurrent level: ${currentLevel}.\n${deadlineStr}\n\nReturn a JSON array of study plan items with this structure:\n[\n  {\n    \"topic\": \"Topic name\",\n    \"duration\": 60,\n    \"resources\": [\"Resource 1\", \"Resource 2\"],\n    \"priority\": \"high\"\n  }\n]\n\nMake the plan realistic, progressive, and optimized for spaced repetition.`\n\n  const response = await chat([{\n    role: \"user\",\n    content: prompt\n  }], { temperature: 0.3, maxTokens: 4096 })\n\n  try {\n    // Clean the response by removing markdown code blocks and backticks\n    let cleanResponse = response.trim()\n    \n    // Remove markdown code block markers\n    cleanResponse = cleanResponse.replace(/^```(?:json)?\\s*/i, '').replace(/\\s*```$/, '')\n    \n    // Remove any remaining backticks\n    cleanResponse = cleanResponse.replace(/`/g, '')\n    \n    // Try to find JSON array if response contains extra text\n    const jsonMatch = cleanResponse.match(/\\[[\\s\\S]*\\]/)\n    if (jsonMatch) {\n      cleanResponse = jsonMatch[0]\n    }\n    \n    return JSON.parse(cleanResponse)\n  } catch (e) {\n    console.error(\"Failed to parse study plan JSON:\", e)\n    console.error(\"Raw response:\", response)\n    return []\n  }\n}\n\n// ==================== GENERATE QUIZ ====================\nexport interface QuizQuestion {\n  question: string\n  options: string[]\n  correctAnswer: number\n  explanation: string\n  difficulty: \"easy\" | \"medium\" | \"hard\"\n}\n\nexport async function generateQuiz(\n  contentOrTopic: string,\n  topicOrQuestionCount?: string | number,\n  questionCountOrDifficulty?: number | \"easy\" | \"medium\" | \"hard\",\n  difficulty: \"easy\" | \"medium\" | \"hard\" = \"medium\"\n): Promise<QuizQuestion[]> {\n  let content: string\n  let topic: string\n  let questionCount: number = 10\n\n  // Handle overloads\n  if (typeof topicOrQuestionCount === 'string') {\n    // generateQuiz(content, topic, questionCount?, difficulty?)\n    content = contentOrTopic\n    topic = topicOrQuestionCount\n    if (typeof questionCountOrDifficulty === 'number') {\n      questionCount = questionCountOrDifficulty\n    }\n  } else {\n    // generateQuiz(topic, questionCount?, difficulty?)\n    content = contentOrTopic // use topic as content\n    topic = contentOrTopic\n    if (typeof topicOrQuestionCount === 'number') {\n      questionCount = topicOrQuestionCount\n    }\n    if (typeof questionCountOrDifficulty === 'string') {\n      difficulty = questionCountOrDifficulty\n    }\n  }\n\n  const processedContent = truncateContent(content, 30000)\n  \n  const prompt = `Generate a ${questionCount}-question multiple-choice quiz on \"${topic}\" based on this content.\nDifficulty level: ${difficulty}\n\nReturn a JSON array with this exact structure:\n[\n  {\n    \"question\": \"Question text?\",\n    \"options\": [\"A) Option 1\", \"B) Option 2\", \"C) Option 3\", \"D) Option 4\"],\n    \"correctAnswer\": 0,\n    \"explanation\": \"Why this is correct\",\n    \"difficulty\": \"${difficulty}\"\n  }\n]\n\nEnsure questions test understanding, not just memorization. Make options plausible but clearly distinguishable.\n\nContent:\n\"\"\"\n${processedContent}\n\"\"\"`\n\n  const response = await chat([{\n    role: \"user\",\n    content: prompt\n  }], { temperature: 0.4, maxTokens: 6144 })\n\n  try {\n    // Clean the response by removing markdown code blocks and backticks\n    let cleanResponse = response.trim()\n    \n    // Remove markdown code block markers\n    cleanResponse = cleanResponse.replace(/^```(?:json)?\\s*/i, '').replace(/\\s*```$/, '')\n    \n    // Remove any remaining backticks\n    cleanResponse = cleanResponse.replace(/`/g, '')\n    \n    // Try to find JSON array if response contains extra text\n    const jsonMatch = cleanResponse.match(/\\[[\\s\\S]*\\]/)\n    if (jsonMatch) {\n      cleanResponse = jsonMatch[0]\n    }\n    \n    return JSON.parse(cleanResponse)\n  } catch (e) {\n    console.error(\"Failed to parse quiz JSON:\", e)\n    console.error(\"Raw response:\", response)\n    return []\n  }\n}\n\n// ==================== ANALYZE LEARNING PATTERNS ====================\nexport interface LearningAnalysis {\n  strengths: string[]\n  weaknesses: string[]\n  recommendations: string[]\n  predictedImprovement: number // percentage\n  optimalStudyTimes: string[]\n}\n\nexport async function analyzeLearningPatterns(\n  userHistory: {\n    subject: string\n    score: number\n    timeSpent: number\n    date: Date\n  }[]\n): Promise<LearningAnalysis> {\n  const historyStr = userHistory.map(h => \n    `${h.subject}: ${h.score}% in ${h.timeSpent}min on ${h.date.toDateString()}`\n  ).join('\\n')\n\n  const prompt = `Analyze this learning history and provide insights:\n\n${historyStr}\n\nReturn a JSON object with:\n{\n  \"strengths\": [\"Strength 1\", \"Strength 2\"],\n  \"weaknesses\": [\"Weakness 1\"],\n  \"recommendations\": [\"Recommendation 1\"],\n  \"predictedImprovement\": 15,\n  \"optimalStudyTimes\": [\"Morning 9-11 AM\", \"Evening 7-9 PM\"]\n}\n\nFocus on patterns, time management, and subject-specific advice.`\n\n  const response = await chat([{\n    role: \"user\",\n    content: prompt\n  }], { temperature: 0.2, maxTokens: 2048 })\n\n  try {\n    // Clean the response by removing markdown code blocks and backticks\n    let cleanResponse = response.trim()\n    \n    // Remove markdown code block markers\n    cleanResponse = cleanResponse.replace(/^```(?:json)?\\s*/i, '').replace(/\\s*```$/, '')\n    \n    // Remove any remaining backticks\n    cleanResponse = cleanResponse.replace(/`/g, '')\n    \n    // Try to find JSON object if response contains extra text\n    const jsonMatch = cleanResponse.match(/\\{[\\s\\S]*\\}/)\n    if (jsonMatch) {\n      cleanResponse = jsonMatch[0]\n    }\n    \n    return JSON.parse(cleanResponse)\n  } catch (e) {\n    console.error(\"Failed to parse analysis JSON:\", e)\n    console.error(\"Raw response:\", response)\n    return {\n      strengths: [],\n      weaknesses: [],\n      recommendations: [],\n      predictedImprovement: 0,\n      optimalStudyTimes: []\n    }\n  }\n}\n\n// ==================== GENERATE PERSONALIZED CONTENT ====================\nexport async function generatePersonalizedContent(\n  userProfile: {\n    learningStyle: \"visual\" | \"auditory\" | \"kinesthetic\" | \"reading\"\n    goals: string[]\n    currentLevel: string\n    preferredSubjects: string[]\n  },\n  topic: string,\n  contentType: \"summary\" | \"examples\" | \"practice\" | \"explanation\"\n): Promise<string> {\n  const stylePrompts = {\n    visual: \"Include diagrams, charts, and visual analogies\",\n    auditory: \"Use storytelling and audio-friendly explanations\",\n    kinesthetic: \"Include hands-on examples and practical applications\",\n    reading: \"Provide detailed written explanations with references\"\n  }\n\n  const typePrompts = {\n    summary: \"Create a concise summary\",\n    examples: \"Provide practical examples and case studies\",\n    practice: \"Generate practice problems and exercises\",\n    explanation: \"Explain the concept in depth\"\n  }\n\n  const prompt = `Create ${contentType} content for \"${topic}\" tailored to:\n- Learning style: ${userProfile.learningStyle} (${stylePrompts[userProfile.learningStyle]})\n- Goals: ${userProfile.goals.join(\", \")}\n- Current level: ${userProfile.currentLevel}\n- Preferred subjects: ${userProfile.preferredSubjects.join(\", \")}\n\n${typePrompts[contentType]}\n\nMake it engaging, personalized, and effective for this learner.`\n\n  return chat([{\n    role: \"user\",\n    content: prompt\n  }], { temperature: 0.6, maxTokens: 3072 })\n}\n"],"names":["module","exports","require","vendored","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactDOM","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,9,10]}