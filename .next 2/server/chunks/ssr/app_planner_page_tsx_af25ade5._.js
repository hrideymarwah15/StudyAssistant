module.exports=[73708,a=>{"use strict";var b=a.i(87924),c=a.i(27508),d=a.i(41675),e=a.i(16201),f=a.i(65151),g=a.i(33508),h=a.i(96221),i=a.i(8406),j=a.i(81560),k=a.i(70106);let l=(0,k.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),m=(0,k.default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var n=a.i(15618),o=a.i(53722),p=a.i(40695),q=a.i(72131),r=a.i(50944);a.i(30485);var s=a.i(31052),t=a.i(18740),u=a.i(19337),v=a.i(79641),w=a.i(16780),x=a.i(53250),y=a.i(23292);function z(){let a=(0,r.useRouter)(),[k,z]=(0,q.useState)(null),[A,B]=(0,q.useState)(!0),[C,D]=(0,q.useState)(!1),[E,F]=(0,q.useState)([]),[G,H]=(0,q.useState)(null),[I,J]=(0,q.useState)(!1),[K,L]=(0,q.useState)(null),[M,N]=(0,q.useState)(!1),[O,P]=(0,q.useState)({subject:"",examDate:"",difficulty:"medium",hoursPerDay:2}),{studyTasks:Q,loadStudyTasks:R,toggleStudyTask:S,saving:T,error:U}=(0,w.usePersistentTasks)(),V=async a=>{if(k){N(!0);try{let b=Q[a]||[];if(0===b.length)return;let c=b.map(a=>`${a.title} (${a.priority}, ${a.status})`).join("\n"),d=await (0,v.generatePersonalizedContent)({learningStyle:"reading",goals:["Complete tasks efficiently","Focus on high-impact activities"],currentLevel:"intermediate",preferredSubjects:[]},`Prioritize these study tasks for maximum effectiveness:
${c}`,"explanation");[...b].sort((a,b)=>{if("completed"===a.status&&"completed"!==b.status)return 1;if("completed"===b.status&&"completed"!==a.status)return -1;let c={urgent:3,high:2,medium:1,low:0},d=c[a.priority]||0;return(c[b.priority]||0)-d}),await R(a),console.log("AI Prioritization Advice:",d)}catch(a){console.error("Error prioritizing tasks:",a)}finally{N(!1)}}};(0,q.useEffect)(()=>{let b=(0,s.onAuthStateChanged)(t.auth,async b=>{if(z(b),b)try{let a=await (0,u.getStudyPlans)(b.uid);for(let b of(F(a),a))await R(b.id);a.length>0&&H(a[0].id)}catch(a){console.error("Error loading plans:",a)}else a.push("/login");B(!1)});return()=>b()},[a]);let W=async(a,b,c)=>{await S(b,!c,a);let d=(Q[a]||[]).filter(a=>a.completed).length;await (0,u.updatePlanProgress)(a,d),F(b=>b.map(b=>b.id===a?{...b,completedTasks:d}:b))},X=async(a,b)=>{try{await (0,u.deleteStudyTask)(b),await R(a);let c=(Q[a]||[]).filter(a=>a.id!==b);F(b=>b.map(b=>b.id===a?{...b,totalTasks:c.length}:b))}catch(a){console.error("Error deleting task:",a)}},Y=async a=>{if(confirm("Delete this entire study plan and all its tasks?")){L(a);try{await (0,u.deleteStudyPlan)(a),F(b=>b.filter(b=>b.id!==a)),G===a&&H(null)}catch(a){console.error("Error deleting plan:",a)}finally{L(null)}}},Z=async()=>{if(k&&O.subject&&O.examDate){D(!0);try{let a=new Date,b=new Date(O.examDate),c=Math.ceil((b.getTime()-a.getTime())/864e5);if(c<=0){alert("Please select a future exam date"),D(!1);return}let d=await (0,u.createStudyPlan)({name:O.subject,subject:O.subject,examDate:b,difficulty:O.difficulty,hoursPerDay:O.hoursPerDay,userId:k.uid,totalTasks:0});try{let b=await (0,x.createStudyPlan)({subject:O.subject,days:Math.min(c,30),current_knowledge:"easy"===O.difficulty?"beginner":"hard"===O.difficulty?"advanced":"intermediate",retrieve_materials:!0}),e=b.plan.split("\n").filter(a=>a.trim()),f=0,g=1;for(let b of e.slice(0,Math.min(c,30)))if(b.trim()&&!b.startsWith("#")&&b.length>10){let e=new Date(a);if(e.setDate(e.getDate()+g-1),await (0,u.createStudyTask)({title:b.substring(0,100).trim(),day:g,hours:O.hoursPerDay,dueDate:e,userId:k.uid,planId:d,priority:"medium",status:"pending"}),g++,f++,g>c)break}await (0,u.updatePlanTotalTasks)(d,f),await (0,u.updatePlanProgress)(d,0),y.toast.success(`AI generated study plan with ${b.materials_used} materials`,{description:`Created a ${b.days}-day plan for ${b.subject}`,duration:4e3})}catch(i){console.warn("AI backend failed, using template fallback:",i);let b=Math.min(c,30),e="easy"===O.difficulty?.8:"hard"===O.difficulty?1.3:1,f={easy:[{phase:"Foundation Review",days:.3,description:"Review basic concepts and fundamentals"},{phase:"Core Content",days:.4,description:"Study main topics and key theories"},{phase:"Practice",days:.2,description:"Practice problems and examples"},{phase:"Final Review",days:.1,description:"Quick review and rest"}],medium:[{phase:"Foundation Review",days:.2,description:"Review prerequisites and basics"},{phase:"Deep Learning",days:.35,description:"In-depth study of core concepts"},{phase:"Application",days:.25,description:"Apply concepts to problems"},{phase:"Mock Tests",days:.1,description:"Take practice exams"},{phase:"Final Review",days:.1,description:"Review weak areas"}],hard:[{phase:"Intensive Foundation",days:.15,description:"Rapid review of all prerequisites"},{phase:"Advanced Concepts",days:.3,description:"Master complex topics"},{phase:"Problem Solving",days:.25,description:"Solve challenging problems"},{phase:"Timed Practice",days:.15,description:"Practice under exam conditions"},{phase:"Mock Exams",days:.1,description:"Full practice exams"},{phase:"Final Push",days:.05,description:"Last minute review"}]}[O.difficulty],g=1,h=0;for(let c of f){let f=Math.max(1,Math.round(b*c.days));for(let i=0;i<f&&g<=b;i++){let b=new Date(a);b.setDate(b.getDate()+g-1),await (0,u.createStudyTask)({title:`${O.subject}: ${c.phase}`,day:g,hours:Math.round(O.hoursPerDay*e*10)/10,dueDate:b,userId:k.uid,planId:d,priority:"medium",status:"pending"}),g++,h++}}await (0,u.updatePlanTotalTasks)(d,h),await (0,u.updatePlanProgress)(d,0)}let e=await (0,u.getStudyPlans)(k.uid);F(e),await R(d),H(d),J(!1),P({subject:"",examDate:"",difficulty:"medium",hoursPerDay:2})}catch(a){console.error("Error generating plan:",a),alert("Failed to generate study plan: "+(a instanceof Error?a.message:"Unknown error"))}finally{D(!1)}}},$=E.reduce((a,b)=>a+(b.totalTasks||0),0),_=E.reduce((a,b)=>a+(b.completedTasks||0),0),aa=$>0?Math.round(_/$*100):0;return A?(0,b.jsx)("main",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:(0,b.jsx)(h.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):k?(0,b.jsxs)(c.default,{title:"Study Planner",subtitle:"Create and manage study plans for your courses and exams",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,b.jsx)("div",{children:(0,b.jsx)("p",{className:"text-slate-400",children:"Manage multiple study plans for your exams"})}),(0,b.jsxs)(p.Button,{onClick:()=>J(!0),className:"bg-gradient-to-r from-primary to-purple-600",children:[(0,b.jsx)(n.Plus,{className:"w-4 h-4 mr-2"})," New Plan"]})]}),E.length>0&&(0,b.jsxs)("div",{className:"mb-8 grid md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-card border border-border text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-primary",children:E.length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Study Plans"})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-card border border-border text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-primary",children:$}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Tasks"})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-card border border-border text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-green-500",children:_}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Completed"})]}),(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-card border border-border text-center",children:[(0,b.jsxs)("p",{className:"text-2xl font-bold text-primary",children:[aa,"%"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Overall Progress"})]})]}),0===E.length?(0,b.jsxs)("div",{className:"text-center py-16 bg-card rounded-lg border border-border",children:[(0,b.jsx)(d.Calendar,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No study plans yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"Create personalized study plans for your upcoming exams"}),(0,b.jsxs)(p.Button,{onClick:()=>J(!0),className:"bg-gradient-to-r from-primary to-purple-600",children:[(0,b.jsx)(i.Sparkles,{className:"w-4 h-4 mr-2"})," Create Your First Plan"]})]}):(0,b.jsx)("div",{className:"space-y-4",children:E.map(a=>{let c=Q[a.id]||[],d=c.filter(a=>a.completed).length,g=c.length>0?Math.round(d/c.length*100):0,k=G===a.id,n=Math.ceil((a.examDate.getTime()-new Date().getTime())/864e5);return(0,b.jsxs)("div",{className:"bg-card rounded-xl border border-border overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>H(k?null:a.id),children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(o.BookOpen,{className:"w-5 h-5 text-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm text-muted-foreground mt-1",children:[(0,b.jsx)("span",{className:`px-2 py-0.5 rounded text-xs ${"easy"===a.difficulty?"bg-green-500/20 text-green-400":"hard"===a.difficulty?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:a.difficulty}),(0,b.jsx)("span",{children:n>0?`${n} days left`:"Exam passed"}),(0,b.jsx)("span",{children:a.examDate.toLocaleDateString()})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"hidden md:flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-32 h-2 bg-muted rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-gradient-to-r from-primary to-purple-600 transition-all",style:{width:`${g}%`}})}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[g,"%"]})]}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),V(a.id)},className:"text-muted-foreground hover:text-blue-500 p-1 mr-2",disabled:M,title:"AI Smart Sort",children:M?(0,b.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(i.Sparkles,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),Y(a.id)},className:"text-muted-foreground hover:text-red-500 p-1",disabled:K===a.id,children:K===a.id?(0,b.jsx)(h.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(j.Trash2,{className:"w-4 h-4"})}),k?(0,b.jsx)(m,{className:"w-5 h-5 text-muted-foreground"}):(0,b.jsx)(l,{className:"w-5 h-5 text-muted-foreground"})]})]})}),k&&(0,b.jsx)("div",{className:"border-t border-border",children:0===c.length?(0,b.jsxs)("div",{className:"p-8 text-center text-muted-foreground",children:[(0,b.jsx)(h.Loader2,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading tasks..."]}):(0,b.jsx)("div",{className:"max-h-96 overflow-y-auto",children:c.map(c=>(0,b.jsx)("div",{className:`p-4 border-b border-border last:border-b-0 transition-all ${c.completed?"bg-green-500/5":"hover:bg-muted/30"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>W(a.id,c.id,c.completed),children:c.completed?(0,b.jsx)(e.CheckCircle,{className:"w-5 h-5 text-green-500"}):(0,b.jsx)(f.Circle,{className:"w-5 h-5 text-muted-foreground hover:text-primary"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-primary/20 text-primary rounded",children:["Day ",c.day]}),(0,b.jsx)("h4",{className:`font-medium text-sm ${c.completed?"text-muted-foreground line-through":"text-foreground"}`,children:c.title})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[c.hours," hours â€¢ ",c.dueDate.toLocaleDateString()]})]}),(0,b.jsx)("button",{onClick:()=>X(a.id,c.id),className:"text-muted-foreground hover:text-red-500",children:(0,b.jsx)(j.Trash2,{className:"w-4 h-4"})})]})},c.id))})})]},a.id)})}),I&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-card rounded-xl p-6 w-full max-w-md border border-border",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,b.jsx)(i.Sparkles,{className:"w-5 h-5 text-primary"}),"Generate Study Plan"]}),(0,b.jsx)("button",{onClick:()=>J(!1),children:(0,b.jsx)(g.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Subject / Exam Name"}),(0,b.jsx)("input",{type:"text",placeholder:"e.g., Calculus, Physics, History",value:O.subject,onChange:a=>P({...O,subject:a.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Exam Date"}),(0,b.jsx)("input",{type:"date",value:O.examDate,min:new Date().toISOString().split("T")[0],onChange:a=>P({...O,examDate:a.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Difficulty Level"}),(0,b.jsxs)("select",{value:O.difficulty,onChange:a=>P({...O,difficulty:a.target.value}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none",children:[(0,b.jsx)("option",{value:"easy",children:"Easy - Light review, flexible schedule"}),(0,b.jsx)("option",{value:"medium",children:"Medium - Balanced study plan"}),(0,b.jsx)("option",{value:"hard",children:"Hard - Intensive preparation"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Hours per Day"}),(0,b.jsx)("input",{type:"number",min:"1",max:"12",value:O.hoursPerDay,onChange:a=>P({...O,hoursPerDay:parseFloat(a.target.value)||2}),className:"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none"})]}),(0,b.jsx)(p.Button,{className:"w-full bg-gradient-to-r from-primary to-purple-600",onClick:Z,disabled:C||!O.subject||!O.examDate,children:C?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Loader2,{className:"w-4 h-4 mr-2 animate-spin"})," Generating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Sparkles,{className:"w-4 h-4 mr-2"})," Generate Plan"]})})]})]})})]}):null}a.s(["default",()=>z],73708)}];

//# sourceMappingURL=app_planner_page_tsx_af25ade5._.js.map