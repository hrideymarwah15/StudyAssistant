{"version":3,"sources":["../../../../app/planner/page.tsx","../../../../node_modules/lucide-react/src/icons/chevron-up.ts","../../../../node_modules/lucide-react/src/icons/chevron-down.ts"],"sourcesContent":["\"use client\"\n\nimport Layout from \"@/components/Layout\"\nimport { Calendar, CheckCircle, Circle, X, Loader2, Sparkles, Trash2, ChevronDown, ChevronUp, Plus, BookOpen } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { onAuthStateChanged, type User } from \"firebase/auth\"\nimport { auth } from \"@/lib/firebase\"\nimport { \n  getStudyTasks, createStudyTask, toggleTaskComplete, deleteStudyTask, clearPlanTasks,\n  getStudyPlans, createStudyPlan, deleteStudyPlan, updatePlanProgress, updatePlanTotalTasks,\n  type StudyTask, type StudyPlan \n} from \"@/lib/firestore\"\nimport { generatePersonalizedContent } from \"@/lib/ai-client\"\nimport { usePersistentTasks } from \"@/lib/hooks/usePersistentTasks\"\nimport { createStudyPlan as createStudyPlanAI, APIError } from \"@/lib/api\"\nimport { toast } from \"sonner\"\n\nexport default function PlannerPage() {\n  const router = useRouter()\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [generating, setGenerating] = useState(false)\n  const [plans, setPlans] = useState<StudyPlan[]>([])\n  const [expandedPlan, setExpandedPlan] = useState<string | null>(null)\n  const [showGenerator, setShowGenerator] = useState(false)\n  const [deletingPlan, setDeletingPlan] = useState<string | null>(null)\n  const [prioritizing, setPrioritizing] = useState(false)\n  const [planConfig, setPlanConfig] = useState({\n    subject: \"\",\n    examDate: \"\",\n    difficulty: \"medium\" as \"easy\" | \"medium\" | \"hard\",\n    hoursPerDay: 2\n  })\n\n  const { studyTasks, loadStudyTasks, toggleStudyTask, saving, error } = usePersistentTasks()\n  const prioritizeTasks = async (planId: string) => {\n    if (!user) return\n    setPrioritizing(true)\n    \n    try {\n      const planTasks = studyTasks[planId] || []\n      if (planTasks.length === 0) return\n      \n      // Generate prioritization advice\n      const taskList = planTasks.map(t => `${t.title} (${t.priority}, ${t.status})`).join('\\n')\n      const advice = await generatePersonalizedContent({\n        learningStyle: \"reading\",\n        goals: [\"Complete tasks efficiently\", \"Focus on high-impact activities\"],\n        currentLevel: \"intermediate\",\n        preferredSubjects: []\n      }, `Prioritize these study tasks for maximum effectiveness:\\n${taskList}`, \"explanation\")\n      \n      // Simple prioritization based on priority and status\n      const prioritized = [...planTasks].sort((a, b) => {\n        // Completed tasks at bottom\n        if (a.status === 'completed' && b.status !== 'completed') return 1\n        if (b.status === 'completed' && a.status !== 'completed') return -1\n        \n        // Priority order\n        const priorityOrder = { urgent: 3, high: 2, medium: 1, low: 0 }\n        const aPriority = priorityOrder[a.priority] || 0\n        const bPriority = priorityOrder[b.priority] || 0\n        \n        return bPriority - aPriority\n      })\n      \n      // Update the studyTasks in the hook state\n      // Note: In a real implementation, we'd update this through the hook\n      // For now, we'll reload the tasks\n      await loadStudyTasks(planId)\n      \n      // Show AI advice (could be displayed in UI)\n      console.log(\"AI Prioritization Advice:\", advice)\n    } catch (error) {\n      console.error(\"Error prioritizing tasks:\", error)\n    } finally {\n      setPrioritizing(false)\n    }\n  }\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n      setUser(currentUser)\n      if (currentUser) {\n        try {\n          const userPlans = await getStudyPlans(currentUser.uid)\n          setPlans(userPlans)\n          \n          // Load tasks for each plan using the persistent hook\n          for (const plan of userPlans) {\n            await loadStudyTasks(plan.id)\n          }\n          \n          // Auto-expand first plan if exists\n          if (userPlans.length > 0) {\n            setExpandedPlan(userPlans[0].id)\n          }\n        } catch (error) {\n          console.error(\"Error loading plans:\", error)\n        }\n      } else {\n        router.push(\"/login\")\n      }\n      setLoading(false)\n    })\n    return () => unsubscribe()\n  }, [router])\n\n  const handleToggleComplete = async (planId: string, taskId: string, currentStatus: boolean) => {\n    await toggleStudyTask(taskId, !currentStatus, planId)\n\n    // Update plan progress after successful toggle\n    const planTasks = studyTasks[planId] || []\n    const newCompletedCount = planTasks.filter((t: StudyTask) => t.completed).length\n    await updatePlanProgress(planId, newCompletedCount)\n\n    setPlans(prev => prev.map(p =>\n      p.id === planId ? { ...p, completedTasks: newCompletedCount } : p\n    ))\n  }\n\n  const handleDeleteTask = async (planId: string, taskId: string) => {\n    // Note: The persistent hook doesn't have a delete function yet, so we'll handle this directly\n    try {\n      await deleteStudyTask(taskId)\n      // The hook will automatically update when we reload\n      await loadStudyTasks(planId)\n\n      // Update plan totals\n      const planTasks = studyTasks[planId] || []\n      const newTasks = planTasks.filter(t => t.id !== taskId)\n      setPlans(prev => prev.map(p =>\n        p.id === planId ? { ...p, totalTasks: newTasks.length } : p\n      ))\n    } catch (error) {\n      console.error(\"Error deleting task:\", error)\n    }\n  }\n\n  const handleDeletePlan = async (planId: string) => {\n    if (!confirm(\"Delete this entire study plan and all its tasks?\")) return\n    \n    setDeletingPlan(planId)\n    try {\n      await deleteStudyPlan(planId)\n      setPlans(prev => prev.filter(p => p.id !== planId))\n      // The hook will automatically update studyTasks state\n      if (expandedPlan === planId) {\n        setExpandedPlan(null)\n      }\n    } catch (error) {\n      console.error(\"Error deleting plan:\", error)\n    } finally {\n      setDeletingPlan(null)\n    }\n  }\n\n  const generateStudyPlan = async () => {\n    if (!user || !planConfig.subject || !planConfig.examDate) return\n\n    setGenerating(true)\n    try {\n      const today = new Date()\n      const examDate = new Date(planConfig.examDate)\n      const daysUntilExam = Math.ceil((examDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24))\n\n      if (daysUntilExam <= 0) {\n        alert(\"Please select a future exam date\")\n        setGenerating(false)\n        return\n      }\n\n      // Create the study plan first\n      const planId = await createStudyPlan({\n        name: planConfig.subject,\n        subject: planConfig.subject,\n        examDate: examDate,\n        difficulty: planConfig.difficulty,\n        hoursPerDay: planConfig.hoursPerDay,\n        userId: user.uid,\n        totalTasks: 0\n      })\n\n      // Try AI backend first for intelligent plan generation\n      try {\n        const result = await createStudyPlanAI({\n          subject: planConfig.subject,\n          days: Math.min(daysUntilExam, 30),\n          current_knowledge: planConfig.difficulty === \"easy\" ? \"beginner\" : planConfig.difficulty === \"hard\" ? \"advanced\" : \"intermediate\",\n          retrieve_materials: true\n        })\n\n        // Parse AI plan and create tasks\n        const lines = result.plan.split('\\n').filter(l => l.trim())\n        let totalTasks = 0\n        let currentDay = 1\n\n        for (const line of lines.slice(0, Math.min(daysUntilExam, 30))) {\n          if (line.trim() && !line.startsWith('#') && line.length > 10) {\n            const taskDate = new Date(today)\n            taskDate.setDate(taskDate.getDate() + currentDay - 1)\n\n            await createStudyTask({\n              title: line.substring(0, 100).trim(),\n              day: currentDay,\n              hours: planConfig.hoursPerDay,\n              dueDate: taskDate,\n              userId: user.uid,\n              planId: planId,\n              priority: \"medium\",\n              status: \"pending\"\n            })\n\n            currentDay++\n            totalTasks++\n\n            if (currentDay > daysUntilExam) break\n          }\n        }\n\n        // Update plan with total tasks count\n        await updatePlanTotalTasks(planId, totalTasks)\n        await updatePlanProgress(planId, 0)\n\n        toast.success(`AI generated study plan with ${result.materials_used} materials`, {\n          description: `Created a ${result.days}-day plan for ${result.subject}`,\n          duration: 4000\n        })\n\n      } catch (aiError) {\n        console.warn(\"AI backend failed, using template fallback:\", aiError)\n\n        // Fallback to template-based generation\n        const totalDays = Math.min(daysUntilExam, 30)\n        const hoursMultiplier = planConfig.difficulty === \"easy\" ? 0.8 : planConfig.difficulty === \"hard\" ? 1.3 : 1\n\n        // Study plan templates based on difficulty\n        const studyPhases = {\n          easy: [\n            { phase: \"Foundation Review\", days: 0.3, description: \"Review basic concepts and fundamentals\" },\n            { phase: \"Core Content\", days: 0.4, description: \"Study main topics and key theories\" },\n            { phase: \"Practice\", days: 0.2, description: \"Practice problems and examples\" },\n            { phase: \"Final Review\", days: 0.1, description: \"Quick review and rest\" }\n          ],\n          medium: [\n            { phase: \"Foundation Review\", days: 0.2, description: \"Review prerequisites and basics\" },\n            { phase: \"Deep Learning\", days: 0.35, description: \"In-depth study of core concepts\" },\n            { phase: \"Application\", days: 0.25, description: \"Apply concepts to problems\" },\n            { phase: \"Mock Tests\", days: 0.1, description: \"Take practice exams\" },\n            { phase: \"Final Review\", days: 0.1, description: \"Review weak areas\" }\n          ],\n          hard: [\n            { phase: \"Intensive Foundation\", days: 0.15, description: \"Rapid review of all prerequisites\" },\n            { phase: \"Advanced Concepts\", days: 0.3, description: \"Master complex topics\" },\n            { phase: \"Problem Solving\", days: 0.25, description: \"Solve challenging problems\" },\n            { phase: \"Timed Practice\", days: 0.15, description: \"Practice under exam conditions\" },\n            { phase: \"Mock Exams\", days: 0.1, description: \"Full practice exams\" },\n            { phase: \"Final Push\", days: 0.05, description: \"Last minute review\" }\n          ]\n        }\n\n        const phases = studyPhases[planConfig.difficulty]\n        let currentDay = 1\n        let totalTasks = 0\n\n        for (const phase of phases) {\n          const phaseDays = Math.max(1, Math.round(totalDays * phase.days))\n          for (let i = 0; i < phaseDays && currentDay <= totalDays; i++) {\n            const taskDate = new Date(today)\n            taskDate.setDate(taskDate.getDate() + currentDay - 1)\n\n            await createStudyTask({\n              title: `${planConfig.subject}: ${phase.phase}`,\n              day: currentDay,\n              hours: Math.round(planConfig.hoursPerDay * hoursMultiplier * 10) / 10,\n              dueDate: taskDate,\n              userId: user.uid,\n              planId: planId,\n              priority: \"medium\",\n              status: \"pending\"\n            })\n            currentDay++\n            totalTasks++\n          }\n        }\n\n        // Update plan with total tasks count\n        await updatePlanTotalTasks(planId, totalTasks)\n        await updatePlanProgress(planId, 0)\n      }\n\n      // Common code that runs after both AI and fallback\n      const userPlans = await getStudyPlans(user.uid)\n      setPlans(userPlans)\n      await loadStudyTasks(planId)\n      setExpandedPlan(planId)\n      setShowGenerator(false)\n      setPlanConfig({ subject: \"\", examDate: \"\", difficulty: \"medium\", hoursPerDay: 2 })\n\n    } catch (error) {\n      console.error(\"Error generating plan:\", error)\n      alert(\"Failed to generate study plan: \" + (error instanceof Error ? error.message : \"Unknown error\"))\n    } finally {\n      setGenerating(false)\n    }\n  }\n  //   if (!user || !planConfig.subject || !planConfig.examDate) return\n    \n  //   setGenerating(true)\n  //   try {\n  //     const today = new Date()\n  //     const examDate = new Date(planConfig.examDate)\n  //     const daysUntilExam = Math.ceil((examDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24))\n      \n  //     if (daysUntilExam <= 0) {\n  //       alert(\"Please select a future exam date\")\n  //       setGenerating(false)\n  //       return\n  //     }\n\n  //     // Create the study plan first\n  //     const planId = await createStudyPlan({\n  //       name: planConfig.subject,\n  //       subject: planConfig.subject,\n  //       examDate: examDate,\n  //       difficulty: planConfig.difficulty,\n  //       hoursPerDay: planConfig.hoursPerDay,\n  //       userId: user.uid,\n  //       totalTasks: 0\n  //     })\n\n  //     // Try AI backend first for intelligent plan generation\n  //     let aiGeneratedPlan: string | null = null\n  //     try {\n  //       const result = await createStudyPlanAI({\n  //         subject: planConfig.subject,\n  //         days: Math.min(daysUntilExam, 30),\n  //         current_knowledge: planConfig.difficulty === \"easy\" ? \"beginner\" : planConfig.difficulty === \"hard\" ? \"advanced\" : \"intermediate\",\n  //         retrieve_materials: true\n  //       })\n\n  //       aiGeneratedPlan = result.plan\n        \n  //       toast.success(`AI generated study plan with ${result.materials_used} materials`, {\n  //         description: `Created a ${result.days}-day plan for ${result.subject}`,\n  //         duration: 4000\n  //       })\n\n  //       // Parse AI plan and create tasks (simplified - parse the text plan)\n  //       const lines = result.plan.split('\\n').filter(l => l.trim())\n  //       let totalTasks = 0\n  //       let currentDay = 1\n\n  //       for (const line of lines.slice(0, Math.min(daysUntilExam, 30))) {\n  //         if (line.trim() && !line.startsWith('#') && line.length > 10) {\n  //           const taskDate = new Date(today)\n  //           taskDate.setDate(taskDate.getDate() + currentDay - 1)\n            \n  //           await createStudyTask({\n  //             title: line.substring(0, 100).trim(),\n  //             day: currentDay,\n  //             hours: planConfig.hoursPerDay,\n  //             dueDate: taskDate,\n  //             userId: user.uid,\n  //             planId: planId,\n  //             priority: \"medium\",\n  //             status: \"pending\"\n  //           })\n            \n  //           currentDay++\n  //           totalTasks++\n            \n  //           if (currentDay > daysUntilExam) break\n  //         }\n  //       }\n\n  //       // Update plan with total tasks count\n  //       await updatePlanTotalTasks(planId, totalTasks)\n  //       await updatePlanProgress(planId, 0)\n\n  //     } catch (error) {\n  //       console.warn(\"AI backend failed, using template fallback:\", error)\n        \n  //       // Fallback to template-based generation\n  //       const totalDays = Math.min(daysUntilExam, 30)\n  //       const hoursMultiplier = planConfig.difficulty === \"easy\" ? 0.8 : planConfig.difficulty === \"hard\" ? 1.3 : 1\n      \n  //     // Study plan templates based on difficulty\n  //     const studyPhases = {\n  //       easy: [\n  //         { phase: \"Foundation Review\", days: 0.3, description: \"Review basic concepts and fundamentals\" },\n  //         { phase: \"Core Content\", days: 0.4, description: \"Study main topics and key theories\" },\n  //         { phase: \"Practice\", days: 0.2, description: \"Practice problems and examples\" },\n  //         { phase: \"Final Review\", days: 0.1, description: \"Quick review and rest\" }\n  //       ],\n  //       medium: [\n  //         { phase: \"Foundation Review\", days: 0.2, description: \"Review prerequisites and basics\" },\n  //         { phase: \"Deep Learning\", days: 0.35, description: \"In-depth study of core concepts\" },\n  //         { phase: \"Application\", days: 0.25, description: \"Apply concepts to problems\" },\n  //         { phase: \"Mock Tests\", days: 0.1, description: \"Take practice exams\" },\n  //         { phase: \"Final Review\", days: 0.1, description: \"Review weak areas\" }\n  //       ],\n  //       hard: [\n  //         { phase: \"Intensive Foundation\", days: 0.15, description: \"Rapid review of all prerequisites\" },\n  //         { phase: \"Advanced Concepts\", days: 0.3, description: \"Master complex topics\" },\n  //         { phase: \"Problem Solving\", days: 0.25, description: \"Solve challenging problems\" },\n  //         { phase: \"Timed Practice\", days: 0.15, description: \"Practice under exam conditions\" },\n  //         { phase: \"Mock Exams\", days: 0.1, description: \"Full practice exams\" },\n  //         { phase: \"Final Push\", days: 0.05, description: \"Last minute review\" }\n  //       ]\n  //     }\n\n  //     const phases = studyPhases[planConfig.difficulty]\n  //     let currentDay = 1\n  //     let totalTasks = 0\n\n  //     for (const phase of phases) {\n  //       const phaseDays = Math.max(1, Math.round(totalDays * phase.days))\n  //       for (let i = 0; i < phaseDays && currentDay <= totalDays; i++) {\n  //         const taskDate = new Date(today)\n  //         taskDate.setDate(taskDate.getDate() + currentDay - 1)\n          \n  //         await createStudyTask({\n  //           title: `${planConfig.subject}: ${phase.phase}`,\n  //           day: currentDay,\n  //           hours: Math.round(planConfig.hoursPerDay * hoursMultiplier * 10) / 10,\n  //           dueDate: taskDate,\n  //           userId: user.uid,\n  //           planId: planId,\n  //           priority: \"medium\",\n  //           status: \"pending\"\n  //         })\n  //         currentDay++\n  //         totalTasks++\n  //       }\n  //     }\n\n  //     // Update plan with total tasks count\n  //     await updatePlanTotalTasks(planId, totalTasks)\n  //     await updatePlanProgress(planId, 0)\n\n  //     // Reload plans and tasks\n  //     const userPlans = await getStudyPlans(user.uid)\n  //     setPlans(userPlans)\n\n  //     await loadStudyTasks(planId)\n\n  //     setExpandedPlan(planId)\n  //     setShowGenerator(false)\n  //     setPlanConfig({ subject: \"\", examDate: \"\", difficulty: \"medium\", hoursPerDay: 2 })\n  //   } catch (error) {\n  //     console.error(\"Error generating plan:\", error)\n  //     alert(\"Failed to generate study plan: \" + (error?.message || \"Unknown error\"))\n  //   } finally {\n  //     setGenerating(false)\n  //   }\n  // }\n\n  // Calculate overall stats\n  const totalTasks = plans.reduce((sum, p) => sum + (p.totalTasks || 0), 0)\n  const completedTasks = plans.reduce((sum, p) => sum + (p.completedTasks || 0), 0)\n  const progressPercent = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0\n\n  if (loading) {\n    return (\n      <main className=\"min-h-screen bg-slate-900 flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n      </main>\n    )\n  }\n\n  if (!user) return null\n\n  return (\n    <Layout \n      title=\"Study Planner\" \n      subtitle=\"Create and manage study plans for your courses and exams\"\n    >\n      <div className=\"flex justify-between items-start mb-8\">\n        <div>\n          <p className=\"text-slate-400\">Manage multiple study plans for your exams</p>\n        </div>\n        <Button onClick={() => setShowGenerator(true)} className=\"bg-gradient-to-r from-primary to-purple-600\">\n          <Plus className=\"w-4 h-4 mr-2\" /> New Plan\n        </Button>\n      </div>\n\n        {/* Overall Stats */}\n        {plans.length > 0 && (\n          <div className=\"mb-8 grid md:grid-cols-4 gap-4\">\n            <div className=\"p-4 rounded-lg bg-card border border-border text-center\">\n              <p className=\"text-2xl font-bold text-primary\">{plans.length}</p>\n              <p className=\"text-sm text-muted-foreground\">Study Plans</p>\n            </div>\n            <div className=\"p-4 rounded-lg bg-card border border-border text-center\">\n              <p className=\"text-2xl font-bold text-primary\">{totalTasks}</p>\n              <p className=\"text-sm text-muted-foreground\">Total Tasks</p>\n            </div>\n            <div className=\"p-4 rounded-lg bg-card border border-border text-center\">\n              <p className=\"text-2xl font-bold text-green-500\">{completedTasks}</p>\n              <p className=\"text-sm text-muted-foreground\">Completed</p>\n            </div>\n            <div className=\"p-4 rounded-lg bg-card border border-border text-center\">\n              <p className=\"text-2xl font-bold text-primary\">{progressPercent}%</p>\n              <p className=\"text-sm text-muted-foreground\">Overall Progress</p>\n            </div>\n          </div>\n        )}\n\n        {/* Plans List */}\n        {plans.length === 0 ? (\n          <div className=\"text-center py-16 bg-card rounded-lg border border-border\">\n            <Calendar className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-foreground mb-2\">No study plans yet</h3>\n            <p className=\"text-muted-foreground mb-6\">Create personalized study plans for your upcoming exams</p>\n            <Button onClick={() => setShowGenerator(true)} className=\"bg-gradient-to-r from-primary to-purple-600\">\n              <Sparkles className=\"w-4 h-4 mr-2\" /> Create Your First Plan\n            </Button>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {plans.map((plan) => {\n              const planTasks = studyTasks[plan.id] || []\n              const planCompletedCount = planTasks.filter(t => t.completed).length\n              const planProgressPercent = planTasks.length > 0\n                ? Math.round((planCompletedCount / planTasks.length) * 100)\n                : 0\n              const isExpanded = expandedPlan === plan.id\n              const daysLeft = Math.ceil((plan.examDate.getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24))\n\n              return (\n                <div key={plan.id} className=\"bg-card rounded-xl border border-border overflow-hidden\">\n                  {/* Plan Header */}\n                  <div \n                    className=\"p-4 cursor-pointer hover:bg-muted/30 transition-colors\"\n                    onClick={() => setExpandedPlan(isExpanded ? null : plan.id)}\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-3\">\n                        <BookOpen className=\"w-5 h-5 text-primary\" />\n                        <div>\n                          <h3 className=\"font-semibold text-foreground\">{plan.name}</h3>\n                          <div className=\"flex items-center gap-3 text-sm text-muted-foreground mt-1\">\n                            <span className={`px-2 py-0.5 rounded text-xs ${\n                              plan.difficulty === \"easy\" ? \"bg-green-500/20 text-green-400\" :\n                              plan.difficulty === \"hard\" ? \"bg-red-500/20 text-red-400\" :\n                              \"bg-yellow-500/20 text-yellow-400\"\n                            }`}>\n                              {plan.difficulty}\n                            </span>\n                            <span>{daysLeft > 0 ? `${daysLeft} days left` : \"Exam passed\"}</span>\n                            <span>{plan.examDate.toLocaleDateString()}</span>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-4\">\n                        {/* Progress bar */}\n                        <div className=\"hidden md:flex items-center gap-2\">\n                          <div className=\"w-32 h-2 bg-muted rounded-full overflow-hidden\">\n                            <div \n                              className=\"h-full bg-gradient-to-r from-primary to-purple-600 transition-all\"\n                              style={{ width: `${planProgressPercent}%` }}\n                            />\n                          </div>\n                          <span className=\"text-sm text-muted-foreground\">{planProgressPercent}%</span>\n                        </div>\n                        <button \n                          onClick={(e) => { e.stopPropagation(); prioritizeTasks(plan.id); }}\n                          className=\"text-muted-foreground hover:text-blue-500 p-1 mr-2\"\n                          disabled={prioritizing}\n                          title=\"AI Smart Sort\"\n                        >\n                          {prioritizing ? (\n                            <Loader2 className=\"w-4 h-4 animate-spin\" />\n                          ) : (\n                            <Sparkles className=\"w-4 h-4\" />\n                          )}\n                        </button>\n                        <button \n                          onClick={(e) => { e.stopPropagation(); handleDeletePlan(plan.id); }}\n                          className=\"text-muted-foreground hover:text-red-500 p-1\"\n                          disabled={deletingPlan === plan.id}\n                        >\n                          {deletingPlan === plan.id ? (\n                            <Loader2 className=\"w-4 h-4 animate-spin\" />\n                          ) : (\n                            <Trash2 className=\"w-4 h-4\" />\n                          )}\n                        </button>\n                        {isExpanded ? (\n                          <ChevronUp className=\"w-5 h-5 text-muted-foreground\" />\n                        ) : (\n                          <ChevronDown className=\"w-5 h-5 text-muted-foreground\" />\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Plan Tasks */}\n                  {isExpanded && (\n                    <div className=\"border-t border-border\">\n                      {planTasks.length === 0 ? (\n                        <div className=\"p-8 text-center text-muted-foreground\">\n                          <Loader2 className=\"w-6 h-6 animate-spin mx-auto mb-2\" />\n                          Loading tasks...\n                        </div>\n                      ) : (\n                        <div className=\"max-h-96 overflow-y-auto\">\n                          {planTasks.map((task) => (\n                            <div\n                              key={task.id}\n                              className={`p-4 border-b border-border last:border-b-0 transition-all ${\n                                task.completed \n                                  ? \"bg-green-500/5\" \n                                  : \"hover:bg-muted/30\"\n                              }`}\n                            >\n                              <div className=\"flex items-center gap-4\">\n                                <button onClick={() => handleToggleComplete(plan.id, task.id, task.completed)}>\n                                  {task.completed ? (\n                                    <CheckCircle className=\"w-5 h-5 text-green-500\" />\n                                  ) : (\n                                    <Circle className=\"w-5 h-5 text-muted-foreground hover:text-primary\" />\n                                  )}\n                                </button>\n                                <div className=\"flex-1\">\n                                  <div className=\"flex items-center gap-2\">\n                                    <span className=\"text-xs px-2 py-0.5 bg-primary/20 text-primary rounded\">Day {task.day}</span>\n                                    <h4 className={`font-medium text-sm ${task.completed ? \"text-muted-foreground line-through\" : \"text-foreground\"}`}>\n                                      {task.title}\n                                    </h4>\n                                  </div>\n                                  <p className=\"text-xs text-muted-foreground mt-1\">\n                                    {task.hours} hours â€¢ {task.dueDate.toLocaleDateString()}\n                                  </p>\n                                </div>\n                                <button \n                                  onClick={() => handleDeleteTask(plan.id, task.id)}\n                                  className=\"text-muted-foreground hover:text-red-500\"\n                                >\n                                  <Trash2 className=\"w-4 h-4\" />\n                                </button>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              )\n            })}\n          </div>\n        )}\n\n      {/* Generate Plan Modal */}\n      {showGenerator && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-card rounded-xl p-6 w-full max-w-md border border-border\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-xl font-semibold flex items-center gap-2\">\n                <Sparkles className=\"w-5 h-5 text-primary\" />\n                Generate Study Plan\n              </h2>\n              <button onClick={() => setShowGenerator(false)}><X className=\"w-5 h-5\" /></button>\n            </div>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"text-sm text-muted-foreground mb-1 block\">Subject / Exam Name</label>\n                <input\n                  type=\"text\"\n                  placeholder=\"e.g., Calculus, Physics, History\"\n                  value={planConfig.subject}\n                  onChange={(e) => setPlanConfig({ ...planConfig, subject: e.target.value })}\n                  className=\"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none\"\n                />\n              </div>\n              <div>\n                <label className=\"text-sm text-muted-foreground mb-1 block\">Exam Date</label>\n                <input\n                  type=\"date\"\n                  value={planConfig.examDate}\n                  min={new Date().toISOString().split('T')[0]}\n                  onChange={(e) => setPlanConfig({ ...planConfig, examDate: e.target.value })}\n                  className=\"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none\"\n                />\n              </div>\n              <div>\n                <label className=\"text-sm text-muted-foreground mb-1 block\">Difficulty Level</label>\n                <select\n                  value={planConfig.difficulty}\n                  onChange={(e) => setPlanConfig({ ...planConfig, difficulty: e.target.value as \"easy\" | \"medium\" | \"hard\" })}\n                  className=\"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none\"\n                >\n                  <option value=\"easy\">Easy - Light review, flexible schedule</option>\n                  <option value=\"medium\">Medium - Balanced study plan</option>\n                  <option value=\"hard\">Hard - Intensive preparation</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"text-sm text-muted-foreground mb-1 block\">Hours per Day</label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"12\"\n                  value={planConfig.hoursPerDay}\n                  onChange={(e) => setPlanConfig({ ...planConfig, hoursPerDay: parseFloat(e.target.value) || 2 })}\n                  className=\"w-full px-4 py-2 rounded-lg bg-background border border-border focus:border-primary outline-none\"\n                />\n              </div>\n              <Button \n                className=\"w-full bg-gradient-to-r from-primary to-purple-600\" \n                onClick={generateStudyPlan}\n                disabled={generating || !planConfig.subject || !planConfig.examDate}\n              >\n                {generating ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" /> Generating...\n                  </>\n                ) : (\n                  <>\n                    <Sparkles className=\"w-4 h-4 mr-2\" /> Generate Plan\n                  </>\n                )}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </Layout>\n  )\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ChevronUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTggMTUtNi02LTYgNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronUp = createLucideIcon('ChevronUp', [['path', { d: 'm18 15-6-6-6 6', key: '153udz' }]]);\n\nexport default ChevronUp;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ChevronDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiA5IDYgNiA2LTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/chevron-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronDown = createLucideIcon('ChevronDown', [\n  ['path', { d: 'm6 9 6 6 6-6', key: 'qrunsl' }],\n]);\n\nexport default ChevronDown;\n"],"names":[],"mappings":"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","ignoreList":[1,2]}