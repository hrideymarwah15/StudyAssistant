module.exports=[93444,a=>{"use strict";var b=a.i(87924),c=a.i(27508),d=a.i(40695),e=a.i(21958),f=a.i(24669),g=a.i(41710),h=a.i(50429),i=a.i(90669),j=a.i(96221),k=a.i(70106);let l=(0,k.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=a.i(72131),n=a.i(50944),o=a.i(19337),p=a.i(23292);a.i(30485);var q=a.i(31052),r=a.i(18740);class s{context;constructor(a){this.context=a}updateContext(a){this.context={...this.context,...a}}calculateProgressMetrics(){let{tasks:a,habits:b,dailyStats:c,studySessions:d,dateRange:e}=this.context,f=a.filter(a=>a.createdAt>=e.start&&a.createdAt<=e.end),g=c.filter(a=>a.date>=e.start&&a.date<=e.end),h=d.filter(a=>a.startTime>=e.start&&a.startTime<=e.end).reduce((a,b)=>a+b.duration,0),i=h/Math.max(Math.ceil((e.end.getTime()-e.start.getTime())/864e5),1),j=this.calculateStreaks(g),k=j.current,l=j.longest,m=f.filter(a=>"done"===a.status).length,n=f.length;return{totalStudyTime:h,averageDailyStudy:i,currentStreak:k,longestStreak:l,tasksCompleted:m,tasksCreated:n,completionRate:n>0?m/n*100:0,habitsCompleted:b.reduce((a,b)=>a+b.completions.filter(a=>a.date>=this.formatDate(e.start)&&a.date<=this.formatDate(e.end)&&a.completed).length,0),habitsStreak:b.length>0?b.reduce((a,b)=>a+b.currentStreak,0)/b.length:0,coursesActive:this.context.courses.length}}generateTrendData(){let{dailyStats:a,tasks:b,dateRange:c}=this.context,d=this.getDaysInRange(c.start,c.end),e=d.map(b=>{let c=a.find(a=>this.formatDate(a.date)===b);return{date:b,minutes:c?.totalStudyMinutes||0}}),f=d.map(a=>{let c=b.filter(b=>this.formatDate(b.createdAt)===a||b.completedAt&&this.formatDate(b.completedAt)===a);return{date:a,completed:c.filter(a=>"done"===a.status).length,created:c.length}});return{studyTimeTrend:e,taskCompletionTrend:f,habitCompletionTrend:d.map(a=>{let b=this.context.habits.reduce((b,c)=>b+ +!!c.completions.find(b=>b.date===a&&b.completed),0);return{date:a,completed:b}}),productivityTrend:d.map(b=>{let c=a.find(a=>this.formatDate(a.date)===b);return{date:b,score:c?.productivityAvg||0}})}}generateHeatmapData(){let{dailyStats:a,tasks:b,habits:c,dateRange:d}=this.context;return this.getDaysInRange(d.start,d.end).map(d=>{let e=a.find(a=>this.formatDate(a.date)===d),f=b.filter(a=>a.completedAt&&this.formatDate(a.completedAt)===d||a.dueDate&&this.formatDate(a.dueDate)===d),g=c.reduce((a,b)=>a+ +!!b.completions.find(a=>a.date===d&&a.completed),0),h=e?.totalStudyMinutes||0,i=f.filter(a=>"done"===a.status).length,j=0;return h>0&&j++,h>=60&&j++,i>0&&j++,g>0&&j++,(h>=120||i>=3||g>=c.length)&&(j=Math.min(j+1,4)),{date:d,studyMinutes:h,tasksCompleted:i,habitsCompleted:g,intensity:j}})}generatePredictiveInsights(){let a=this.calculateProgressMetrics(),b=this.generateTrendData(),c={studyHours:Math.round(7*(b.studyTimeTrend.reduce((a,b)=>a+b.minutes,0)/b.studyTimeTrend.length)/60*10)/10,tasksToComplete:Math.round(7*(b.taskCompletionTrend.reduce((a,b)=>a+b.completed,0)/b.taskCompletionTrend.length)),habitsToMaintain:Math.round(7*(b.habitCompletionTrend.reduce((a,b)=>a+b.completed,0)/b.habitCompletionTrend.length)/Math.max(this.context.habits.length,1))},d=[];a.currentStreak<3&&d.push({type:"streak",severity:0===a.currentStreak?"high":"medium",message:`Study streak is ${0===a.currentStreak?"broken":"weak"} (${a.currentStreak} days)`,recommendation:"Start a study session today to rebuild momentum"});let e=this.context.tasks.filter(a=>a.dueDate&&a.dueDate<new Date&&"done"!==a.status);e.length>0&&d.push({type:"overdue_tasks",severity:e.length>3?"high":"medium",message:`${e.length} tasks are overdue`,recommendation:"Focus on completing overdue tasks to reduce stress"});let f=this.context.habits.filter(a=>a.currentStreak<3);f.length>0&&d.push({type:"habit_slip",severity:f.length>this.context.habits.length/2?"high":"medium",message:`${f.length} habit${f.length>1?"s":""} at risk of breaking`,recommendation:"Complete habits today to maintain consistency"});let g=[];return a.averageDailyStudy<90&&g.push({type:"study_time",potential:a.averageDailyStudy<30?"high":"medium",message:"Study time could be increased for better retention",action:"Aim for 2 hours of focused study daily"}),a.habitsStreak<5&&this.context.habits.length>0&&g.push({type:"habit_building",potential:"medium",message:"Building stronger habit streaks will improve consistency",action:"Focus on maintaining daily habits for the next week"}),a.completionRate<70&&g.push({type:"task_focus",potential:"high",message:"Task completion rate could be improved",action:"Break large tasks into smaller, manageable steps"}),{nextWeekPrediction:c,riskFactors:d,opportunities:g}}generateProgressArcs(){let a=this.calculateProgressMetrics(),b=this.generateTrendData(),c=[],d=a.totalStudyTime;c.push({subject:"Weekly Study Time",current:d,target:840,unit:"minutes",percentage:Math.min(d/840*100,100),trend:this.calculateTrend(b.studyTimeTrend.map(a=>a.minutes)),trendValue:this.calculateTrendValue(b.studyTimeTrend.map(a=>a.minutes)),color:d>=840?"#10b981":d>=588?"#f59e0b":"#ef4444"});let e=a.tasksCompleted;c.push({subject:"Weekly Tasks",current:e,target:10,unit:"tasks",percentage:Math.min(e/10*100,100),trend:this.calculateTrend(b.taskCompletionTrend.map(a=>a.completed)),trendValue:this.calculateTrendValue(b.taskCompletionTrend.map(a=>a.completed)),color:e>=10?"#10b981":e>=7?"#f59e0b":"#ef4444"});let f=7*this.context.habits.length,g=a.habitsCompleted;return c.push({subject:"Habit Consistency",current:g,target:f,unit:"completions",percentage:Math.min(g/f*100,100),trend:this.calculateTrend(b.habitCompletionTrend.map(a=>a.completed)),trendValue:this.calculateTrendValue(b.habitCompletionTrend.map(a=>a.completed)),color:g>=f?"#10b981":g>=.7*f?"#f59e0b":"#ef4444"}),c.push({subject:"Study Streak",current:a.currentStreak,target:30,unit:"days",percentage:Math.min(a.currentStreak/30*100,100),trend:a.currentStreak>0?"up":"stable",trendValue:a.currentStreak,color:a.currentStreak>=30?"#10b981":a.currentStreak>=15?"#f59e0b":"#ef4444"}),c}calculateStreaks(a){if(0===a.length)return{current:0,longest:0};let b=a.sort((a,b)=>a.date.getTime()-b.date.getTime()),c=0,d=0,e=0;for(let a=b.length-1;a>=0;a--)b[a].totalStudyMinutes>0?(e++,a===b.length-1&&(c=e)):(e>d&&(d=e),e=0);return e>d&&(d=e),{current:c,longest:d}}calculateTrend(a){if(a.length<2)return"stable";let b=a.slice(-7),c=a.slice(-14,-7);if(0===b.length||0===c.length)return"stable";let d=b.reduce((a,b)=>a+b,0)/b.length,e=c.reduce((a,b)=>a+b,0)/c.length,f=(d-e)/Math.max(e,1)*100;return f>10?"up":f<-10?"down":"stable"}calculateTrendValue(a){if(a.length<2)return 0;let b=a.slice(-7),c=a.slice(-14,-7);return 0===b.length||0===c.length?0:Math.round(b.reduce((a,b)=>a+b,0)/b.length-c.reduce((a,b)=>a+b,0)/c.length)}getDaysInRange(a,b){let c=[],d=new Date(a);for(;d<=b;)c.push(this.formatDate(d)),d.setDate(d.getDate()+1);return c}formatDate(a){return a.toISOString().split("T")[0]}}let t=null;function u({data:a,className:c=""}){let{weeks:d,maxIntensity:e}=(0,m.useMemo)(()=>{let b=[],c=[],d=0;return a.forEach(a=>{0===new Date(a.date+"T00:00:00").getDay()&&c.length>0&&(b.push([...c]),c=[]),c.push(a),d=Math.max(d,a.intensity)}),c.length>0&&b.push(c),{weeks:b,maxIntensity:d}},[a]);return(0,b.jsxs)("div",{className:`p-4 bg-card rounded-lg border ${c}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Study Activity"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)("span",{children:"Less"}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-sm bg-gray-100"}),(0,b.jsx)("div",{className:"w-3 h-3 rounded-sm bg-green-200"}),(0,b.jsx)("div",{className:"w-3 h-3 rounded-sm bg-green-300"}),(0,b.jsx)("div",{className:"w-3 h-3 rounded-sm bg-green-400"}),(0,b.jsx)("div",{className:"w-3 h-3 rounded-sm bg-green-500"})]}),(0,b.jsx)("span",{children:"More"})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("div",{className:"inline-flex gap-1",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1 pr-2",children:[(0,b.jsx)("div",{className:"h-6"})," ",["Mon","Wed","Fri"].map(a=>(0,b.jsx)("div",{className:"h-3 text-xs text-muted-foreground flex items-center",children:a},a))]}),d.slice(-12).map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("div",{className:"h-6 text-xs text-muted-foreground flex items-center justify-center",children:a.length>0&&7>=new Date(a[0].date+"T00:00:00").getDate()&&new Date(a[0].date+"T00:00:00").toLocaleDateString("en-US",{month:"short"})}),a.map(a=>{let c;return(0,b.jsx)("div",{className:`w-3 h-3 rounded-sm cursor-pointer transition-all hover:ring-2 hover:ring-blue-300 hover:ring-offset-1 ${((a,b)=>{if(0===a)return"bg-gray-100";let c=a/Math.max(b,1);return c>=.8?"bg-green-500":c>=.6?"bg-green-400":c>=.4?"bg-green-300":c>=.2?"bg-green-200":"bg-green-100"})(a.intensity,e)}`,title:(c=new Date(a.date+"T00:00:00"),`${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][c.getDay()]}, ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c.getMonth()]} ${c.getDate()}
${a.studyMinutes>0?`${Math.round(a.studyMinutes)} min study`:"No study"}
${a.tasksCompleted>0?`${a.tasksCompleted} tasks completed`:""}
${a.habitsCompleted>0?`${a.habitsCompleted} habits completed`:""}`.trim())},a.date)}),Array.from({length:7-a.length}).map((a,c)=>(0,b.jsx)("div",{className:"w-3 h-3 rounded-sm bg-gray-50"},`empty-${c}`))]},c))]})}),(0,b.jsx)("div",{className:"mt-4 text-sm text-muted-foreground",children:(0,b.jsx)("p",{children:"Click on any cell to see detailed activity for that day"})})]})}let v=(0,k.default)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),w=(0,k.default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function x({arcs:a,className:c=""}){return(0,b.jsx)("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 ${c}`,children:a.map((a,c)=>(0,b.jsxs)("div",{className:"p-4 bg-card rounded-lg border",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:a.subject}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(a=>{switch(a){case"up":return(0,b.jsx)(f.TrendingUp,{className:"w-4 h-4 text-green-500"});case"down":return(0,b.jsx)(v,{className:"w-4 h-4 text-red-500"});default:return(0,b.jsx)(w,{className:"w-4 h-4 text-gray-500"})}})(a.trend),(0,b.jsxs)("span",{className:`text-xs font-medium ${(a=>{switch(a){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}})(a.trend)}`,children:[a.trendValue>0?"+":"",a.trendValue]})]})]}),(0,b.jsxs)("div",{className:"relative w-20 h-20 mx-auto mb-2",children:[(0,b.jsxs)("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 36 36",children:[(0,b.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-200"}),(0,b.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:a.color,strokeWidth:"2",strokeDasharray:`${a.percentage}, 100`,className:"transition-all duration-300"})]}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsxs)("span",{className:"text-lg font-bold",style:{color:a.color},children:[Math.round(a.percentage),"%"]})})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.current," / ",a.target," ",a.unit]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["up"===a.trend&&"Improving","down"===a.trend&&"Declining","stable"===a.trend&&"Stable"]})]})]},c))})}var y=a.i(54161),z=a.i(3130),A=a.i(73570),B=a.i(1027);function C({insights:a,className:c=""}){let d=[...a.riskFactors.map(a=>({...a,category:"risk",severity:a.severity})),...a.opportunities.map(a=>({...a,category:"opportunity",severity:a.potential}))];return 0===d.length?(0,b.jsx)(z.Card,{className:c,children:(0,b.jsx)(z.CardContent,{className:"flex items-center justify-center py-8",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No predictive insights available yet."})})}):(0,b.jsxs)("div",{className:`space-y-4 ${c}`,children:[(0,b.jsxs)(z.Card,{children:[(0,b.jsx)(z.CardHeader,{children:(0,b.jsxs)(z.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(f.TrendingUp,{className:"w-5 h-5"}),"Next Week Prediction"]})}),(0,b.jsx)(z.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[a.nextWeekPrediction.studyHours,"h"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Study Time"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:a.nextWeekPrediction.tasksToComplete}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tasks"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:a.nextWeekPrediction.habitsToMaintain}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Habits"})]})]})})]}),d.map((a,c)=>(0,b.jsxs)(z.Card,{className:`border-2 ${(a=>{switch(a){case"high":return"border-red-200 bg-red-50";case"medium":return"border-yellow-200 bg-yellow-50";default:return"border-gray-200 bg-gray-50"}})(a.severity||a.potential||"low")}`,children:[(0,b.jsx)(z.CardHeader,{className:"pb-3",children:(0,b.jsxs)(z.CardTitle,{className:"text-sm flex items-center gap-2",children:[(a=>{switch(a){case"streak":case"habit_slip":return(0,b.jsx)(A.AlertTriangle,{className:"w-5 h-5 text-red-500"});case"overdue_tasks":return(0,b.jsx)(g.Clock,{className:"w-5 h-5 text-orange-500"});case"study_time":return(0,b.jsx)(f.TrendingUp,{className:"w-5 h-5 text-green-500"});case"habit_building":return(0,b.jsx)(h.Target,{className:"w-5 h-5 text-blue-500"});case"task_focus":return(0,b.jsx)(B.Zap,{className:"w-5 h-5 text-purple-500"});default:return(0,b.jsx)(A.AlertTriangle,{className:"w-5 h-5 text-gray-500"})}})(a.type),(0,b.jsx)("span",{className:"capitalize",children:a.category}),(0,b.jsx)(y.Badge,{variant:"outline",className:"ml-auto",children:a.severity||a.potential})]})}),(0,b.jsxs)(z.CardContent,{children:[(0,b.jsx)("p",{className:"text-sm mb-2",children:a.message}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.recommendation||a.action})]})]},c))]})}var D=a.i(54816);let E=(0,k.default)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function F({recommendation:a,children:c}){var d,e;let i=a=>{switch(a.toLowerCase()){case"urgency":return(0,b.jsx)(g.Clock,{className:"w-3 h-3"});case"importance":return(0,b.jsx)(h.Target,{className:"w-3 h-3"});case"streak":return(0,b.jsx)(f.TrendingUp,{className:"w-3 h-3"});default:return(0,b.jsx)(E,{className:"w-3 h-3"})}};return(0,b.jsx)(D.TooltipProvider,{children:(0,b.jsxs)(D.Tooltip,{children:[(0,b.jsx)(D.TooltipTrigger,{asChild:!0,children:c}),(0,b.jsx)(D.TooltipContent,{side:"right",className:"w-80 p-0",children:(0,b.jsxs)(z.Card,{className:"border-0 shadow-lg",children:[(0,b.jsx)(z.CardHeader,{className:"pb-3",children:(0,b.jsxs)(z.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,b.jsx)(E,{className:"w-4 h-4"}),"Recommendation Analysis"]})}),(0,b.jsxs)(z.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Overall Score"}),(0,b.jsxs)(y.Badge,{className:`${(d=a.score)>=80?"bg-green-100":d>=60?"bg-yellow-100":"bg-red-100"} ${(e=a.score)>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600"} border-0`,children:[a.score,"/100"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Contributing Factors"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[i("urgency"),(0,b.jsx)("span",{children:"Urgency"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:a.urgency}),(0,b.jsx)(y.Badge,{variant:"outline",className:"text-xs",children:"40% weight"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[i("importance"),(0,b.jsx)("span",{children:"Importance"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:a.importance}),(0,b.jsx)(y.Badge,{variant:"outline",className:"text-xs",children:"40% weight"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[i("streak"),(0,b.jsx)("span",{children:"Streak Impact"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:a.streakImpact}),(0,b.jsx)(y.Badge,{variant:"outline",className:"text-xs",children:"20% weight"})]})]})]})]}),a.reasoning&&a.reasoning.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-2",children:"Why This Recommendation"}),(0,b.jsx)("ul",{className:"text-sm text-muted-foreground space-y-1",children:a.reasoning.map((a,c)=>(0,b.jsxs)("li",{children:["• ",a]},c))})]}),(0,b.jsx)("div",{className:"pt-2 border-t",children:(0,b.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:["Type: ",a.type]}),(0,b.jsxs)("span",{children:["ID: ",a.id]})]})})]})]})})]})})}function G(){let a=(0,n.useRouter)(),[k,v]=(0,m.useState)(null),[w,y]=(0,m.useState)(!0),[z,A]=(0,m.useState)([]),[B,E]=(0,m.useState)([]),[G,H]=(0,m.useState)([]),[I,J]=(0,m.useState)("week"),[K,L]=(0,m.useState)(null),[M,N]=(0,m.useState)([]),O=async b=>{try{switch(b.action.type){case"navigate":let{path:c,filter:d,taskId:e}=b.action.data,f=c;d&&(f+=`?filter=${d}`,e&&(f+=`&taskId=${e}`)),a.push(f);break;case"toggle_habit":let g=new Date().toISOString().split("T")[0];await (0,o.toggleHabitCompletion)(b.action.data.habitId,g),p.toast.success(`Completed habit: ${b.title}`),setTimeout(()=>{window.location.reload()},1e3);break;case"start_focus":a.push("/dashboard"),p.toast.info("Starting focus session...",{description:"Navigate to the dashboard to begin your 25-minute focus session."});break;default:p.toast.error("Action not implemented yet")}}catch(a){console.error("Error handling recommendation action:",a),p.toast.error("Failed to complete action")}};(0,m.useEffect)(()=>{let b=(0,q.onAuthStateChanged)(r.auth,async b=>{if(v(b),b)try{var c;let a=new Date,d=new Date;"week"===I?d.setDate(a.getDate()-7):"month"===I?d.setMonth(a.getMonth()-1):d.setFullYear(a.getFullYear()-1);let[e,f]=await Promise.all([(0,o.getStudySessions)(b.uid,{start:d,end:a}),(0,o.getPomodoroSessions)(b.uid,{start:d,end:a})]),g=[];for(let a=0;a<7;a++){let c=new Date;c.setDate(c.getDate()-a);let d=c.toISOString().split("T")[0];g.push((0,o.getDailyStats)(b.uid,d))}let h=(await Promise.all(g)).filter(a=>null!==a),[i,j,k]=await Promise.all([(0,o.getTasks)(b.uid),(0,o.getCourses)(b.uid),(0,o.getHabits)(b.uid)]);A(h),E(e),H(f);let l=(c=function(a,b,c,d,e,f,g=30){let h=new Date,i=new Date;return i.setDate(h.getDate()-g),{userId:a,tasks:b,courses:c,habits:d,dailyStats:e,studySessions:f,dateRange:{start:i,end:h}}}(b.uid,i,j,k,h,e,30),t?t.updateContext(c):t=new s(c),t),m={progressMetrics:{totalStudyTime:0,averageDailyStudy:0,currentStreak:0,longestStreak:0,tasksCompleted:0,tasksCreated:0,completionRate:0,habitsCompleted:0,habitsStreak:0,coursesActive:0},heatmapData:[],progressArcs:[],insights:{nextWeekPrediction:{studyHours:0,tasksToComplete:0,habitsToMaintain:0},riskFactors:[],opportunities:[]}};try{let a={progressMetrics:l.calculateProgressMetrics(),heatmapData:l.generateHeatmapData(),progressArcs:l.generateProgressArcs(),insights:l.generatePredictiveInsights()};m={progressMetrics:a.progressMetrics||m.progressMetrics,heatmapData:Array.isArray(a.heatmapData)?a.heatmapData:[],progressArcs:Array.isArray(a.progressArcs)?a.progressArcs:[],insights:a.insights||m.insights}}catch(a){console.error("Error generating analytics data:",a)}L(m),N([{id:"1",type:"task",title:"Review Math Flashcards",description:"You have 25 flashcards due for review",score:85,urgency:.9,importance:.8,streakImpact:.7,reasoning:["High urgency due to due date approaching","Strong performance streak to maintain"],action:{type:"flashcard_review"}},{id:"2",type:"task",title:"Complete Physics Assignment",description:"Physics homework due tomorrow",score:78,urgency:.95,importance:.7,streakImpact:.6,reasoning:["Due tomorrow with high academic importance"],action:{type:"task_completion"}}])}catch(a){console.error("Error loading analytics:",a)}else a.push("/login");y(!1)});return()=>b()},[a,I]);let P=B.reduce((a,b)=>a+b.duration,0),Q=G.filter(a=>"work"===a.type).length;G.filter(a=>"work"===a.type&&a.completed).reduce((a,b)=>a+(b.actualDuration||b.plannedDuration),0);let R=B.length>0?Math.round(P/B.length):0,S=G.length>0?Math.round(G.filter(a=>a.completed).length/G.length*100):0;return(z.length>0&&z.reduce((a,b)=>(b.totalStudyMinutes||0)>(a.totalStudyMinutes||0)?b:a),w)?(0,b.jsx)(c.default,{children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[50vh]",children:(0,b.jsx)(j.Loader2,{className:"w-8 h-8 animate-spin text-primary"})})}):(0,b.jsxs)(c.default,{title:"Deep Analytics",subtitle:"AI-powered insights into your study patterns",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-8",children:[(0,b.jsx)("div",{children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Predictive analytics, progress tracking, and personalized recommendations"})}),(0,b.jsx)("div",{className:"flex gap-2",children:["week","month","year"].map(a=>(0,b.jsx)(d.Button,{variant:I===a?"default":"outline",size:"sm",onClick:()=>J(a),className:"capitalize",children:a},a))})]}),(0,b.jsxs)(e.Tabs,{defaultValue:"overview",className:"space-y-6",children:[(0,b.jsxs)(e.TabsList,{className:"grid w-full grid-cols-4",children:[(0,b.jsx)(e.TabsTrigger,{value:"overview",children:"Overview"}),(0,b.jsx)(e.TabsTrigger,{value:"progress",children:"Progress"}),(0,b.jsx)(e.TabsTrigger,{value:"insights",children:"Insights"}),(0,b.jsx)(e.TabsTrigger,{value:"patterns",children:"Patterns"})]}),(0,b.jsxs)(e.TabsContent,{value:"overview",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(g.Clock,{className:"w-5 h-5 text-blue-500"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Study Time"})]}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-foreground",children:[Math.round(P/60),"h ",P%60,"m"]})]}),(0,b.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(h.Target,{className:"w-5 h-5 text-green-500"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Focus Sessions"})]}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:Q})]}),(0,b.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(i.Activity,{className:"w-5 h-5 text-purple-500"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Avg Session"})]}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-foreground",children:[R," min"]})]}),(0,b.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(f.TrendingUp,{className:"w-5 h-5 text-orange-500"}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Completion Rate"})]}),(0,b.jsx)(D.TooltipProvider,{children:(0,b.jsxs)(D.Tooltip,{children:[(0,b.jsx)(D.TooltipTrigger,{asChild:!0,children:(0,b.jsxs)("p",{className:"text-2xl font-bold text-foreground cursor-help",children:[S,"%"]})}),(0,b.jsx)(D.TooltipContent,{children:(0,b.jsxs)("p",{className:"max-w-xs",children:[(0,b.jsx)("strong",{children:"How it's calculated:"}),(0,b.jsx)("br",{}),"Tasks completed ÷ Tasks created × 100",(0,b.jsx)("br",{}),"Based on your task completion history over the selected time period."]})})]})})]})]}),K?.progressArcs&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Subject Progress"}),(0,b.jsx)(x,{arcs:K.progressArcs})]}),K?.heatmapData&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Study Activity Heatmap"}),(0,b.jsx)(u,{data:K.heatmapData})]})]}),(0,b.jsx)(e.TabsContent,{value:"progress",className:"space-y-6",children:K?.progressArcs&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Detailed Progress Tracking"}),(0,b.jsx)(x,{arcs:K.progressArcs})]})}),(0,b.jsxs)(e.TabsContent,{value:"insights",className:"space-y-6",children:[K?.insights&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(l,{className:"w-5 h-5"}),"Predictive Insights"]}),(0,b.jsx)(C,{insights:K.insights})]}),M.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Personalized Recommendations"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M.slice(0,6).map((a,c)=>(0,b.jsx)(F,{recommendation:a,children:(0,b.jsxs)("div",{className:"p-4 bg-card border border-border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>O(a),children:[(0,b.jsx)("h4",{className:"font-medium mb-2",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Type: ",a.type]}),(0,b.jsxs)("span",{className:"text-xs font-medium",children:["Score: ",a.score,"/100"]})]})]})},c))})]})]}),(0,b.jsx)(e.TabsContent,{value:"patterns",className:"space-y-6",children:K?.heatmapData&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Complete Activity Patterns"}),(0,b.jsx)(u,{data:K.heatmapData})]})})]})]})}a.s(["default",()=>G],93444)}];

//# sourceMappingURL=app_analytics_page_tsx_809c1f99._.js.map